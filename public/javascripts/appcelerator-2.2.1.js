var Prototype={Version:"1.6.0",Browser:{IE:!!(window.attachEvent&&!window.opera),Opera:!!window.opera,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1,MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)},BrowserFeatures:{XPath:!!document.evaluate,ElementExtensions:!!window.HTMLElement,SpecificElementExtensions:document.createElement("div").__proto__&&document.createElement("div").__proto__!==document.createElement("form").__proto__},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(A){return A}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}if(Prototype.Browser.WebKit){Prototype.BrowserFeatures.XPath=false}var Class={create:function(){var E=null,D=$A(arguments);if(Object.isFunction(D[0])){E=D.shift()}function A(){this.initialize.apply(this,arguments)}Object.extend(A,Class.Methods);A.superclass=E;A.subclasses=[];if(E){var B=function(){};B.prototype=E.prototype;A.prototype=new B;E.subclasses.push(A)}for(var C=0;C<D.length;C++){A.addMethods(D[C])}if(!A.prototype.initialize){A.prototype.initialize=Prototype.emptyFunction}A.prototype.constructor=A;return A}};Class.Methods={addMethods:function(G){var C=this.superclass&&this.superclass.prototype;var B=Object.keys(G);if(!Object.keys({toString:true}).length){B.push("toString","valueOf")}for(var A=0,D=B.length;A<D;A++){var F=B[A],E=G[F];if(C&&Object.isFunction(E)&&E.argumentNames().first()=="$super"){var H=E,E=Object.extend((function(I){return function(){return C[I].apply(this,arguments)}})(F).wrap(H),{valueOf:function(){return H},toString:function(){return H.toString()}})}this.prototype[F]=E}return this}};var Abstract={};Object.extend=function(A,C){for(var B in C){A[B]=C[B]}return A};Object.extend(Object,{inspect:function(A){try{if(A===undefined){return"undefined"}if(A===null){return"null"}return A.inspect?A.inspect():A.toString()}catch(B){if(B instanceof RangeError){return"..."}throw B}},toJSON:function(A){var C=typeof A;switch(C){case"undefined":case"function":case"unknown":return ;case"boolean":return A.toString()}if(A===null){return"null"}if(A.toJSON){return A.toJSON()}if(Object.isElement(A)){return }var B=[];for(var E in A){var D=Object.toJSON(A[E]);if(D!==undefined){B.push(E.toJSON()+": "+D)}}return"{"+B.join(", ")+"}"},toQueryString:function(A){return $H(A).toQueryString()},toHTML:function(A){return A&&A.toHTML?A.toHTML():String.interpret(A)},keys:function(A){var B=[];for(var C in A){B.push(C)}return B},values:function(B){var A=[];for(var C in B){A.push(B[C])}return A},clone:function(A){return Object.extend({},A)},isElement:function(A){return A&&A.nodeType==1},isArray:function(A){return A&&A.constructor===Array},isHash:function(A){return A instanceof Hash},isFunction:function(A){return typeof A=="function"},isString:function(A){return typeof A=="string"},isNumber:function(A){return typeof A=="number"},isUndefined:function(A){return typeof A=="undefined"}});Object.extend(Function.prototype,{argumentNames:function(){var A=this.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",").invoke("strip");return A.length==1&&!A[0]?[]:A},bind:function(){if(arguments.length<2&&arguments[0]===undefined){return this}var A=this,C=$A(arguments),B=C.shift();return function(){return A.apply(B,C.concat($A(arguments)))}},bindAsEventListener:function(){var A=this,C=$A(arguments),B=C.shift();return function(D){return A.apply(B,[D||window.event].concat(C))}},curry:function(){if(!arguments.length){return this}var A=this,B=$A(arguments);return function(){return A.apply(this,B.concat($A(arguments)))}},delay:function(){var A=this,B=$A(arguments),C=B.shift()*1000;return window.setTimeout(function(){return A.apply(A,B)},C)},wrap:function(B){var A=this;return function(){return B.apply(this,[A.bind(this)].concat($A(arguments)))}},methodize:function(){if(this._methodized){return this._methodized}var A=this;return this._methodized=function(){return A.apply(null,[this].concat($A(arguments)))}}});Function.prototype.defer=Function.prototype.delay.curry(0.01);Date.prototype.toJSON=function(){return'"'+this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+'Z"'};var Try={these:function(){var C;for(var B=0,D=arguments.length;B<D;B++){var A=arguments[B];try{C=A();break}catch(E){}}return C}};RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(A){return String(A).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(B,A){this.callback=B;this.frequency=A;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return }clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute()}finally{this.currentlyExecuting=false}}}});Object.extend(String,{interpret:function(A){return A==null?"":String(A)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,{gsub:function(E,C){var A="",D=this,B;C=arguments.callee.prepareReplacement(C);while(D.length>0){if(B=D.match(E)){A+=D.slice(0,B.index);A+=String.interpret(C(B));D=D.slice(B.index+B[0].length)}else{A+=D,D=""}}return A},sub:function(C,A,B){A=this.gsub.prepareReplacement(A);B=B===undefined?1:B;return this.gsub(C,function(D){if(--B<0){return D[0]}return A(D)})},scan:function(B,A){this.gsub(B,A);return String(this)},truncate:function(B,A){B=B||30;A=A===undefined?"...":A;return this.length>B?this.slice(0,B-A.length)+A:String(this)},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var B=new RegExp(Prototype.ScriptFragment,"img");var A=new RegExp(Prototype.ScriptFragment,"im");return(this.match(B)||[]).map(function(C){return(C.match(A)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(script){return eval(script)})},escapeHTML:function(){var A=arguments.callee;A.text.data=this;return A.div.innerHTML},unescapeHTML:function(){var A=new Element("div");A.innerHTML=this.stripTags();return A.childNodes[0]?(A.childNodes.length>1?$A(A.childNodes).inject("",function(B,C){return B+C.nodeValue}):A.childNodes[0].nodeValue):""},toQueryParams:function(B){var A=this.strip().match(/([^?#]*)(#.*)?$/);if(!A){return{}}return A[1].split(B||"&").inject({},function(E,F){if((F=F.split("="))[0]){var C=decodeURIComponent(F.shift());var D=F.length>1?F.join("="):F[0];if(D!=undefined){D=decodeURIComponent(D)}if(C in E){if(!Object.isArray(E[C])){E[C]=[E[C]]}E[C].push(D)}else{E[C]=D}}return E})},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(A){return A<1?"":new Array(A+1).join(this)},camelize:function(){var D=this.split("-"),A=D.length;if(A==1){return D[0]}var C=this.charAt(0)=="-"?D[0].charAt(0).toUpperCase()+D[0].substring(1):D[0];for(var B=1;B<A;B++){C+=D[B].charAt(0).toUpperCase()+D[B].substring(1)}return C},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(B){var A=this.gsub(/[\x00-\x1f\\]/,function(C){var D=String.specialChar[C[0]];return D?D:"\\u00"+C[0].charCodeAt().toPaddedString(2,16)});if(B){return'"'+A.replace(/"/g,'\\"')+'"'}return"'"+A.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(true)},unfilterJSON:function(A){return this.sub(A||Prototype.JSONFilter,"#{1}")},isJSON:function(){var A=this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(A)},evalJSON:function(sanitize){var json=this.unfilterJSON();try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())},include:function(A){return this.indexOf(A)>-1},startsWith:function(A){return this.indexOf(A)===0},endsWith:function(A){var B=this.length-A.length;return B>=0&&this.lastIndexOf(A)===B},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)},interpolate:function(A,B){return new Template(this,B).evaluate(A)}});if(Prototype.Browser.WebKit||Prototype.Browser.IE){Object.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}})}String.prototype.gsub.prepareReplacement=function(B){if(Object.isFunction(B)){return B}var A=new Template(B);return function(C){return A.evaluate(C)}};String.prototype.parseQuery=String.prototype.toQueryParams;Object.extend(String.prototype.escapeHTML,{div:document.createElement("div"),text:document.createTextNode("")});with(String.prototype.escapeHTML){div.appendChild(text)}var Template=Class.create({initialize:function(A,B){this.template=A.toString();this.pattern=B||Template.Pattern},evaluate:function(A){if(Object.isFunction(A.toTemplateReplacements)){A=A.toTemplateReplacements()}return this.template.gsub(this.pattern,function(D){if(A==null){return""}var F=D[1]||"";if(F=="\\"){return D[2]}var B=A,G=D[3];var E=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/,D=E.exec(G);if(D==null){return F}while(D!=null){var C=D[1].startsWith("[")?D[2].gsub("\\\\]","]"):D[1];B=B[C];if(null==B||""==D[3]){break}G=G.substring("["==D[3]?D[1].length:D[0].length);D=E.exec(G)}return F+String.interpret(B)}.bind(this))}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable={each:function(C,B){var A=0;C=C.bind(B);try{this._each(function(E){C(E,A++)})}catch(D){if(D!=$break){throw D}}return this},eachSlice:function(D,C,B){C=C?C.bind(B):Prototype.K;var A=-D,E=[],F=this.toArray();while((A+=D)<F.length){E.push(F.slice(A,A+D))}return E.collect(C,B)},all:function(C,B){C=C?C.bind(B):Prototype.K;var A=true;this.each(function(E,D){A=A&&!!C(E,D);if(!A){throw $break}});return A},any:function(C,B){C=C?C.bind(B):Prototype.K;var A=false;this.each(function(E,D){if(A=!!C(E,D)){throw $break}});return A},collect:function(C,B){C=C?C.bind(B):Prototype.K;var A=[];this.each(function(E,D){A.push(C(E,D))});return A},detect:function(C,B){C=C.bind(B);var A;this.each(function(E,D){if(C(E,D)){A=E;throw $break}});return A},findAll:function(C,B){C=C.bind(B);var A=[];this.each(function(E,D){if(C(E,D)){A.push(E)}});return A},grep:function(D,C,B){C=C?C.bind(B):Prototype.K;var A=[];if(Object.isString(D)){D=new RegExp(D)}this.each(function(F,E){if(D.match(F)){A.push(C(F,E))}});return A},include:function(A){if(Object.isFunction(this.indexOf)){if(this.indexOf(A)!=-1){return true}}var B=false;this.each(function(C){if(C==A){B=true;throw $break}});return B},inGroupsOf:function(B,A){A=A===undefined?null:A;return this.eachSlice(B,function(C){while(C.length<B){C.push(A)}return C})},inject:function(A,C,B){C=C.bind(B);this.each(function(E,D){A=C(A,E,D)});return A},invoke:function(B){var A=$A(arguments).slice(1);return this.map(function(C){return C[B].apply(C,A)})},max:function(C,B){C=C?C.bind(B):Prototype.K;var A;this.each(function(E,D){E=C(E,D);if(A==undefined||E>=A){A=E}});return A},min:function(C,B){C=C?C.bind(B):Prototype.K;var A;this.each(function(E,D){E=C(E,D);if(A==undefined||E<A){A=E}});return A},partition:function(D,B){D=D?D.bind(B):Prototype.K;var C=[],A=[];this.each(function(F,E){(D(F,E)?C:A).push(F)});return[C,A]},pluck:function(B){var A=[];this.each(function(C){A.push(C[B])});return A},reject:function(C,B){C=C.bind(B);var A=[];this.each(function(E,D){if(!C(E,D)){A.push(E)}});return A},sortBy:function(B,A){B=B.bind(A);return this.map(function(D,C){return{value:D,criteria:B(D,C)}}).sort(function(F,E){var D=F.criteria,C=E.criteria;return D<C?-1:D>C?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var B=Prototype.K,A=$A(arguments);if(Object.isFunction(A.last())){B=A.pop()}var C=[this].concat(A).map($A);return this.map(function(E,D){return B(C.pluck(D))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,filter:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray,every:Enumerable.all,some:Enumerable.any});function $A(C){if(!C){return[]}if(C.toArray){return C.toArray()}var B=C.length,A=new Array(B);while(B--){A[B]=C[B]}return A}if(Prototype.Browser.WebKit){function $A(C){if(!C){return[]}if(!(Object.isFunction(C)&&C=="[object NodeList]")&&C.toArray){return C.toArray()}var B=C.length,A=new Array(B);while(B--){A[B]=C[B]}return A}}Array.from=$A;Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse){Array.prototype._reverse=Array.prototype.reverse}Object.extend(Array.prototype,{_each:function(B){for(var A=0,C=this.length;A<C;A++){B(this[A])}},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(A){return A!=null})},flatten:function(){return this.inject([],function(B,A){return B.concat(Object.isArray(A)?A.flatten():[A])})},without:function(){var A=$A(arguments);return this.select(function(B){return !A.include(B)})},reverse:function(A){return(A!==false?this:this.toArray())._reverse()},reduce:function(){return this.length>1?this:this[0]},uniq:function(A){return this.inject([],function(D,C,B){if(0==B||(A?D.last()!=C:!D.include(C))){D.push(C)}return D})},intersect:function(A){return this.uniq().findAll(function(B){return A.detect(function(C){return B===C})})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"},toJSON:function(){var A=[];this.each(function(B){var C=Object.toJSON(B);if(C!==undefined){A.push(C)}});return"["+A.join(", ")+"]"}});if(Object.isFunction(Array.prototype.forEach)){Array.prototype._each=Array.prototype.forEach}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(C,A){A||(A=0);var B=this.length;if(A<0){A=B+A}for(;A<B;A++){if(this[A]===C){return A}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(B,A){A=isNaN(A)?this.length:(A<0?this.length+A:A)+1;var C=this.slice(0,A).reverse().indexOf(B);return(C<0)?C:A-C-1}}Array.prototype.toArray=Array.prototype.clone;function $w(A){if(!Object.isString(A)){return[]}A=A.strip();return A?A.split(/\s+/):[]}if(Prototype.Browser.Opera){Array.prototype.concat=function(){var E=[];for(var B=0,C=this.length;B<C;B++){E.push(this[B])}for(var B=0,C=arguments.length;B<C;B++){if(Object.isArray(arguments[B])){for(var A=0,D=arguments[B].length;A<D;A++){E.push(arguments[B][A])}}else{E.push(arguments[B])}}return E}}Object.extend(Number.prototype,{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(A){$R(0,this,true).each(A);return this},toPaddedString:function(C,B){var A=this.toString(B||10);return"0".times(C-A.length)+A},toJSON:function(){return isFinite(this)?this.toString():"null"}});$w("abs round ceil floor").each(function(A){Number.prototype[A]=Math[A].methodize()});function $H(A){return new Hash(A)}var Hash=Class.create(Enumerable,(function(){if(function(){var C=0,E=function(F){this.key=F};E.prototype.key="foo";for(var D in new E("bar")){C++}return C>1}()){function B(E){var C=[];for(var D in this._object){var F=this._object[D];if(C.include(D)){continue}C.push(D);var G=[D,F];G.key=D;G.value=F;E(G)}}}else{function B(D){for(var C in this._object){var E=this._object[C],F=[C,E];F.key=C;F.value=E;D(F)}}}function A(C,D){if(Object.isUndefined(D)){return C}return C+"="+encodeURIComponent(String.interpret(D))}return{initialize:function(C){this._object=Object.isHash(C)?C.toObject():Object.clone(C)},_each:B,set:function(C,D){return this._object[C]=D},get:function(C){return this._object[C]},unset:function(C){var D=this._object[C];delete this._object[C];return D},toObject:function(){return Object.clone(this._object)},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(D){var C=this.detect(function(E){return E.value===D});return C&&C.key},merge:function(C){return this.clone().update(C)},update:function(C){return new Hash(C).inject(this,function(D,E){D.set(E.key,E.value);return D})},toQueryString:function(){return this.map(function(E){var D=encodeURIComponent(E.key),C=E.value;if(C&&typeof C=="object"){if(Object.isArray(C)){return C.map(A.curry(D)).join("&")}}return A(D,C)}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(C){return C.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:function(){return Object.toJSON(this.toObject())},clone:function(){return new Hash(this)}}})());Hash.prototype.toTemplateReplacements=Hash.prototype.toObject;Hash.from=$H;var ObjectRange=Class.create(Enumerable,{initialize:function(C,A,B){this.start=C;this.end=A;this.exclusive=B},_each:function(A){var B=this.start;while(this.include(B)){A(B);B=B.succ()}},include:function(A){if(A<this.start){return false}if(this.exclusive){return A<this.end}return A<=this.end}});var $R=function(C,A,B){return new ObjectRange(C,A,B)};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(A){this.responders._each(A)},register:function(A){if(!this.include(A)){this.responders.push(A)}},unregister:function(A){this.responders=this.responders.without(A)},dispatch:function(D,B,C,A){this.each(function(E){if(Object.isFunction(E[D])){try{E[D].apply(E,[B,C,A])}catch(F){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(A){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,A||{});this.options.method=this.options.method.toLowerCase();if(Object.isString(this.options.parameters)){this.options.parameters=this.options.parameters.toQueryParams()}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,B,A){$super(A);this.transport=Ajax.getTransport();this.request(B)},request:function(B){this.url=B;this.method=this.options.method;var D=Object.clone(this.options.parameters);if(!["get","post"].include(this.method)){D["_method"]=this.method;this.method="post"}this.parameters=D;if(D=Object.toQueryString(D)){if(this.method=="get"){this.url+=(this.url.include("?")?"&":"?")+D}else{if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){D+="&_="}}}try{var A=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(A)}Ajax.Responders.dispatch("onCreate",this,A);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||D):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(C){this.dispatchException(C)}},onStateChange:function(){var A=this.transport.readyState;if(A>1&&!((A==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var E={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,"Accept":"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){E["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){E["Connection"]="close"}}if(typeof this.options.requestHeaders=="object"){var C=this.options.requestHeaders;if(Object.isFunction(C.push)){for(var B=0,D=C.length;B<D;B+=2){E[C[B]]=C[B+1]}}else{$H(C).each(function(F){E[F.key]=F.value})}}for(var A in E){this.transport.setRequestHeader(A,E[A])}},success:function(){var A=this.getStatus();return !A||(A>=200&&A<300)},getStatus:function(){try{return this.transport.status||0}catch(A){return 0}},respondToReadyState:function(A){var C=Ajax.Request.Events[A],B=new Ajax.Response(this);if(C=="Complete"){try{this._complete=true;(this.options["on"+B.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(B,B.headerJSON)}catch(D){this.dispatchException(D)}var E=B.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&E&&E.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+C]||Prototype.emptyFunction)(B,B.headerJSON);Ajax.Responders.dispatch("on"+C,this,B,B.headerJSON)}catch(D){this.dispatchException(D)}if(C=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},getHeader:function(A){try{return this.transport.getResponseHeader(A)}catch(B){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(A){(this.options.onException||Prototype.emptyFunction)(this,A);Ajax.Responders.dispatch("onException",this,A)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(C){this.request=C;var D=this.transport=C.transport,A=this.readyState=D.readyState;if((A>2&&!Prototype.Browser.IE)||A==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(D.responseText);this.headerJSON=this._getHeaderJSON()}if(A==4){var B=D.responseXML;this.responseXML=B===undefined?null:B;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(A){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(A){return null}},getResponseHeader:function(A){return this.transport.getResponseHeader(A)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var A=this.getHeader("X-JSON");if(!A){return null}A=decodeURIComponent(escape(A));try{return A.evalJSON(this.request.options.sanitizeJSON)}catch(B){this.request.dispatchException(B)}},_getResponseJSON:function(){var A=this.request.options;if(!A.evalJSON||(A.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))){return null}try{return this.transport.responseText.evalJSON(A.sanitizeJSON)}catch(B){this.request.dispatchException(B)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,A,C,B){this.container={success:(A.success||A),failure:(A.failure||(A.success?null:A))};B=B||{};var D=B.onComplete;B.onComplete=(function(E,F){this.updateContent(E.responseText);if(Object.isFunction(D)){D(E,F)}}).bind(this);$super(C,B)},updateContent:function(D){var C=this.container[this.success()?"success":"failure"],A=this.options;if(!A.evalScripts){D=D.stripScripts()}if(C=$(C)){if(A.insertion){if(Object.isString(A.insertion)){var B={};B[A.insertion]=D;C.insert(B)}else{A.insertion(C,D)}}else{C.update(D)}}if(this.success()){if(this.onComplete){this.onComplete.bind(this).defer()}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,A,C,B){$super(B);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=A;this.url=C;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(A){if(this.options.decay){this.decay=(A.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=A.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(B){if(arguments.length>1){for(var A=0,D=[],C=arguments.length;A<C;A++){D.push($(arguments[A]))}return D}if(Object.isString(B)){B=document.getElementById(B)}return Element.extend(B)}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(F,A){var C=[];var E=document.evaluate(F,$(A)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var B=0,D=E.snapshotLength;B<D;B++){C.push(Element.extend(E.snapshotItem(B)))}return C}}if(!window.Node){var Node={}}if(!Node.ELEMENT_NODE){Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}(function(){var A=this.Element;this.Element=function(D,C){C=C||{};D=D.toLowerCase();var B=Element.cache;if(Prototype.Browser.IE&&C.name){D="<"+D+' name="'+C.name+'">';delete C.name;return Element.writeAttribute(document.createElement(D),C)}if(!B[D]){B[D]=Element.extend(document.createElement(D))}return Element.writeAttribute(B[D].cloneNode(false),C)};Object.extend(this.Element,A||{})}).call(window);Element.cache={};Element.Methods={visible:function(A){return $(A).style.display!="none"},toggle:function(A){A=$(A);Element[Element.visible(A)?"hide":"show"](A);return A},hide:function(A){$(A).style.display="none";return A},show:function(A){$(A).style.display="";return A},remove:function(A){A=$(A);A.parentNode.removeChild(A);return A},update:function(A,B){A=$(A);if(B&&B.toElement){B=B.toElement()}if(Object.isElement(B)){return A.update().insert(B)}B=Object.toHTML(B);A.innerHTML=B.stripScripts();B.evalScripts.bind(B).defer();return A},replace:function(B,C){B=$(B);if(C&&C.toElement){C=C.toElement()}else{if(!Object.isElement(C)){C=Object.toHTML(C);var A=B.ownerDocument.createRange();A.selectNode(B);C.evalScripts.bind(C).defer();C=A.createContextualFragment(C.stripScripts())}}B.parentNode.replaceChild(C,B);return B},insert:function(C,E){C=$(C);if(Object.isString(E)||Object.isNumber(E)||Object.isElement(E)||(E&&(E.toElement||E.toHTML))){E={bottom:E}}var D,B,A;for(position in E){D=E[position];position=position.toLowerCase();B=Element._insertionTranslations[position];if(D&&D.toElement){D=D.toElement()}if(Object.isElement(D)){B.insert(C,D);continue}D=Object.toHTML(D);A=C.ownerDocument.createRange();B.initializeRange(C,A);B.insert(C,A.createContextualFragment(D.stripScripts()));D.evalScripts.bind(D).defer()}return C},wrap:function(B,C,A){B=$(B);if(Object.isElement(C)){$(C).writeAttribute(A||{})}else{if(Object.isString(C)){C=new Element(C,A)}else{C=new Element("div",C)}}if(B.parentNode){B.parentNode.replaceChild(C,B)}C.appendChild(B);return C},inspect:function(B){B=$(B);var A="<"+B.tagName.toLowerCase();$H({"id":"id","className":"class"}).each(function(F){var E=F.first(),C=F.last();var D=(B[E]||"").toString();if(D){A+=" "+C+"="+D.inspect(true)}});return A+">"},recursivelyCollect:function(A,C){A=$(A);var B=[];while(A=A[C]){if(A.nodeType==1){B.push(Element.extend(A))}}return B},ancestors:function(A){return $(A).recursivelyCollect("parentNode")},descendants:function(A){return $A($(A).getElementsByTagName("*")).each(Element.extend)},firstDescendant:function(A){A=$(A).firstChild;while(A&&A.nodeType!=1){A=A.nextSibling}return $(A)},immediateDescendants:function(A){if(!(A=$(A).firstChild)){return[]}while(A&&A.nodeType!=1){A=A.nextSibling}if(A){return[A].concat($(A).nextSiblings())}return[]},previousSiblings:function(A){return $(A).recursivelyCollect("previousSibling")},nextSiblings:function(A){return $(A).recursivelyCollect("nextSibling")},siblings:function(A){A=$(A);return A.previousSiblings().reverse().concat(A.nextSiblings())},match:function(B,A){if(Object.isString(A)){A=new Selector(A)}return A.match($(B))},up:function(B,D,A){B=$(B);if(arguments.length==1){return $(B.parentNode)}var C=B.ancestors();return D?Selector.findElement(C,D,A):C[A||0]},down:function(B,C,A){B=$(B);if(arguments.length==1){return B.firstDescendant()}var D=B.descendants();return C?Selector.findElement(D,C,A):D[A||0]},previous:function(B,D,A){B=$(B);if(arguments.length==1){return $(Selector.handlers.previousElementSibling(B))}var C=B.previousSiblings();return D?Selector.findElement(C,D,A):C[A||0]},next:function(C,D,B){C=$(C);if(arguments.length==1){return $(Selector.handlers.nextElementSibling(C))}var A=C.nextSiblings();return D?Selector.findElement(A,D,B):A[B||0]},select:function(){var A=$A(arguments),B=$(A.shift());return Selector.findChildElements(B,A)},adjacent:function(){var A=$A(arguments),B=$(A.shift());return Selector.findChildElements(B.parentNode,A).without(B)},identify:function(B){B=$(B);var C=B.readAttribute("id"),A=arguments.callee;if(C){return C}do{C="anonymous_element_"+A.counter++}while($(C));B.writeAttribute("id",C);return C},readAttribute:function(C,A){C=$(C);if(Prototype.Browser.IE){var B=Element._attributeTranslations.read;if(B.values[A]){return B.values[A](C,A)}if(B.names[A]){A=B.names[A]}if(A.include(":")){return(!C.attributes||!C.attributes[A])?null:C.attributes[A].value}}return C.getAttribute(A)},writeAttribute:function(E,C,F){E=$(E);var B={},D=Element._attributeTranslations.write;if(typeof C=="object"){B=C}else{B[C]=F===undefined?true:F}for(var A in B){var C=D.names[A]||A,F=B[A];if(D.values[A]){C=D.values[A](E,F)}if(F===false||F===null){E.removeAttribute(C)}else{if(F===true){E.setAttribute(C,C)}else{E.setAttribute(C,F)}}}return E},getHeight:function(A){return $(A).getDimensions().height},getWidth:function(A){return $(A).getDimensions().width},classNames:function(A){return new Element.ClassNames(A)},hasClassName:function(A,B){if(!(A=$(A))){return }var C=A.className;return(C.length>0&&(C==B||new RegExp("(^|\\s)"+B+"(\\s|$)").test(C)))},addClassName:function(A,B){if(!(A=$(A))){return }if(!A.hasClassName(B)){A.className+=(A.className?" ":"")+B}return A},removeClassName:function(A,B){if(!(A=$(A))){return }A.className=A.className.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)")," ").strip();return A},toggleClassName:function(A,B){if(!(A=$(A))){return }return A[A.hasClassName(B)?"removeClassName":"addClassName"](B)},cleanWhitespace:function(B){B=$(B);var C=B.firstChild;while(C){var A=C.nextSibling;if(C.nodeType==3&&!/\S/.test(C.nodeValue)){B.removeChild(C)}C=A}return B},empty:function(A){return $(A).innerHTML.blank()},descendantOf:function(D,C){D=$(D),C=$(C);if(D.compareDocumentPosition){return(D.compareDocumentPosition(C)&8)===8}if(D.sourceIndex&&!Prototype.Browser.Opera){var E=D.sourceIndex,B=C.sourceIndex,A=C.nextSibling;if(!A){do{C=C.parentNode}while(!(A=C.nextSibling)&&C.parentNode)}if(A){return(E>B&&E<A.sourceIndex)}}while(D=D.parentNode){if(D==C){return true}}return false},scrollTo:function(A){A=$(A);var B=A.cumulativeOffset();window.scrollTo(B[0],B[1]);return A},getStyle:function(B,C){B=$(B);C=C=="float"?"cssFloat":C.camelize();var D=B.style[C];if(!D){var A=document.defaultView.getComputedStyle(B,null);D=A?A[C]:null}if(C=="opacity"){return D?parseFloat(D):1}return D=="auto"?null:D},getOpacity:function(A){return $(A).getStyle("opacity")},setStyle:function(B,C){B=$(B);var E=B.style,A;if(Object.isString(C)){B.style.cssText+=";"+C;return C.include("opacity")?B.setOpacity(C.match(/opacity:\s*(\d?\.?\d*)/)[1]):B}for(var D in C){if(D=="opacity"){B.setOpacity(C[D])}else{E[(D=="float"||D=="cssFloat")?(E.styleFloat===undefined?"cssFloat":"styleFloat"):D]=C[D]}}return B},setOpacity:function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;return A},getDimensions:function(C){C=$(C);var G=$(C).getStyle("display");if(G!="none"&&G!=null){return{width:C.offsetWidth,height:C.offsetHeight}}var B=C.style;var F=B.visibility;var D=B.position;var A=B.display;B.visibility="hidden";B.position="absolute";B.display="block";var H=C.clientWidth;var E=C.clientHeight;B.display=A;B.position=D;B.visibility=F;return{width:H,height:E}},makePositioned:function(A){A=$(A);var B=Element.getStyle(A,"position");if(B=="static"||!B){A._madePositioned=true;A.style.position="relative";if(window.opera){A.style.top=0;A.style.left=0}}return A},undoPositioned:function(A){A=$(A);if(A._madePositioned){A._madePositioned=undefined;A.style.position=A.style.top=A.style.left=A.style.bottom=A.style.right=""}return A},makeClipping:function(A){A=$(A);if(A._overflow){return A}A._overflow=Element.getStyle(A,"overflow")||"auto";if(A._overflow!=="hidden"){A.style.overflow="hidden"}return A},undoClipping:function(A){A=$(A);if(!A._overflow){return A}A.style.overflow=A._overflow=="auto"?"":A._overflow;A._overflow=null;return A},cumulativeOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return Element._returnOffset(C,A)},positionedOffset:function(B){var A=0,D=0;do{A+=B.offsetTop||0;D+=B.offsetLeft||0;B=B.offsetParent;if(B){if(B.tagName=="BODY"){break}var C=Element.getStyle(B,"position");if(C=="relative"||C=="absolute"){break}}}while(B);return Element._returnOffset(D,A)},absolutize:function(B){B=$(B);if(B.getStyle("position")=="absolute"){return }var D=B.positionedOffset();var F=D[1];var E=D[0];var C=B.clientWidth;var A=B.clientHeight;B._originalLeft=E-parseFloat(B.style.left||0);B._originalTop=F-parseFloat(B.style.top||0);B._originalWidth=B.style.width;B._originalHeight=B.style.height;B.style.position="absolute";B.style.top=F+"px";B.style.left=E+"px";B.style.width=C+"px";B.style.height=A+"px";return B},relativize:function(A){A=$(A);if(A.getStyle("position")=="relative"){return }A.style.position="relative";var C=parseFloat(A.style.top||0)-(A._originalTop||0);var B=parseFloat(A.style.left||0)-(A._originalLeft||0);A.style.top=C+"px";A.style.left=B+"px";A.style.height=A._originalHeight;A.style.width=A._originalWidth;return A},cumulativeScrollOffset:function(B){var A=0,C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return Element._returnOffset(C,A)},getOffsetParent:function(A){if(A.offsetParent){return $(A.offsetParent)}if(A==document.body){return $(A)}while((A=A.parentNode)&&A!=document.body){if(Element.getStyle(A,"position")!="static"){return $(A)}}return $(document.body)},viewportOffset:function(D){var A=0,C=0;var B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body&&Element.getStyle(B,"position")=="absolute"){break}}while(B=B.offsetParent);B=D;do{if(!Prototype.Browser.Opera||B.tagName=="BODY"){A-=B.scrollTop||0;C-=B.scrollLeft||0}}while(B=B.parentNode);return Element._returnOffset(C,A)},clonePosition:function(B,D){var A=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});D=$(D);var E=D.viewportOffset();B=$(B);var F=[0,0];var C=null;if(Element.getStyle(B,"position")=="absolute"){C=B.getOffsetParent();F=C.viewportOffset()}if(C==document.body){F[0]-=document.body.offsetLeft;F[1]-=document.body.offsetTop}if(A.setLeft){B.style.left=(E[0]-F[0]+A.offsetLeft)+"px"}if(A.setTop){B.style.top=(E[1]-F[1]+A.offsetTop)+"px"}if(A.setWidth){B.style.width=D.offsetWidth+"px"}if(A.setHeight){B.style.height=D.offsetHeight+"px"}return B}};Element.Methods.identify.counter=1;Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};if(!document.createRange||Prototype.Browser.Opera){Element.Methods.insert=function(E,G){E=$(E);if(Object.isString(G)||Object.isNumber(G)||Object.isElement(G)||(G&&(G.toElement||G.toHTML))){G={bottom:G}}var D=Element._insertionTranslations,F,B,H,C;for(B in G){F=G[B];B=B.toLowerCase();H=D[B];if(F&&F.toElement){F=F.toElement()}if(Object.isElement(F)){H.insert(E,F);continue}F=Object.toHTML(F);C=((B=="before"||B=="after")?E.parentNode:E).tagName.toUpperCase();if(D.tags[C]){var A=Element._getContentFromAnonymousElement(C,F.stripScripts());if(B=="top"||B=="after"){A.reverse()}A.each(H.insert.curry(E))}else{E.insertAdjacentHTML(H.adjacency,F.stripScripts())}F.evalScripts.bind(F).defer()}return E}}if(Prototype.Browser.Opera){Element.Methods._getStyle=Element.Methods.getStyle;Element.Methods.getStyle=function(A,B){switch(B){case"left":case"top":case"right":case"bottom":if(Element._getStyle(A,"position")=="static"){return null}default:return Element._getStyle(A,B)}};Element.Methods._readAttribute=Element.Methods.readAttribute;Element.Methods.readAttribute=function(A,B){if(B=="title"){return A.title}return Element._readAttribute(A,B)}}else{if(Prototype.Browser.IE){$w("positionedOffset getOffsetParent viewportOffset").each(function(A){Element.Methods[A]=Element.Methods[A].wrap(function(D,C){C=$(C);var B=C.getStyle("position");if(B!="static"){return D(C)}C.setStyle({position:"relative"});var E=D(C);C.setStyle({position:B});return E})});Element.Methods.getStyle=function(A,B){A=$(A);B=(B=="float"||B=="cssFloat")?"styleFloat":B.camelize();var C=A.style[B];if(!C&&A.currentStyle){C=A.currentStyle[B]}if(B=="opacity"){if(C=(A.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(C[1]){return parseFloat(C[1])/100}}return 1}if(C=="auto"){if((B=="width"||B=="height")&&(A.getStyle("display")!="none")){return A["offset"+B.capitalize()]+"px"}return null}return C};Element.Methods.setOpacity=function(B,E){function F(G){return G.replace(/alpha\([^\)]*\)/gi,"")}B=$(B);var A=B.currentStyle;if((A&&!A.hasLayout)||(!A&&B.style.zoom=="normal")){B.style.zoom=1}var D=B.getStyle("filter"),C=B.style;if(E==1||E===""){(D=F(D))?C.filter=D:C.removeAttribute("filter");return B}else{if(E<0.00001){E=0}}C.filter=F(D)+"alpha(opacity="+(E*100)+")";return B};Element._attributeTranslations={read:{names:{"class":"className","for":"htmlFor"},values:{_getAttr:function(A,B){return A.getAttribute(B,2)},_getAttrNode:function(A,C){var B=A.getAttributeNode(C);return B?B.value:""},_getEv:function(A,B){var B=A.getAttribute(B);return B?B.toString().slice(23,-2):null},_flag:function(A,B){return $(A).hasAttribute(B)?B:null},style:function(A){return A.style.cssText.toLowerCase()},title:function(A){return A.title}}}};Element._attributeTranslations.write={names:Object.clone(Element._attributeTranslations.read.names),values:{checked:function(A,B){A.checked=!!B},style:function(A,B){A.style.cssText=B?B:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc").each(function(A){Element._attributeTranslations.write.names[A.toLowerCase()]=A;Element._attributeTranslations.has[A.toLowerCase()]=A});(function(A){Object.extend(A,{href:A._getAttr,src:A._getAttr,type:A._getAttr,action:A._getAttrNode,disabled:A._flag,checked:A._flag,readonly:A._flag,multiple:A._flag,onload:A._getEv,onunload:A._getEv,onclick:A._getEv,ondblclick:A._getEv,onmousedown:A._getEv,onmouseup:A._getEv,onmouseover:A._getEv,onmousemove:A._getEv,onmouseout:A._getEv,onfocus:A._getEv,onblur:A._getEv,onkeypress:A._getEv,onkeydown:A._getEv,onkeyup:A._getEv,onsubmit:A._getEv,onreset:A._getEv,onselect:A._getEv,onchange:A._getEv})})(Element._attributeTranslations.read.values)}else{if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1)?0.999999:(B==="")?"":(B<0.00001)?0:B;return A}}else{if(Prototype.Browser.WebKit){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;if(B==1){if(A.tagName=="IMG"&&A.width){A.width++;A.width--}else{try{var D=document.createTextNode(" ");A.appendChild(D);A.removeChild(D)}catch(C){}}}return A};Element.Methods.cumulativeOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body){if(Element.getStyle(B,"position")=="absolute"){break}}B=B.offsetParent}while(B);return Element._returnOffset(C,A)}}}}}if(Prototype.Browser.IE||Prototype.Browser.Opera){Element.Methods.update=function(B,C){B=$(B);if(C&&C.toElement){C=C.toElement()}if(Object.isElement(C)){return B.update().insert(C)}C=Object.toHTML(C);var A=B.tagName.toUpperCase();if(A in Element._insertionTranslations.tags){$A(B.childNodes).each(function(D){B.removeChild(D)});Element._getContentFromAnonymousElement(A,C.stripScripts()).each(function(D){B.appendChild(D)})}else{B.innerHTML=C.stripScripts()}C.evalScripts.bind(C).defer();return B}}if(document.createElement("div").outerHTML){Element.Methods.replace=function(C,E){C=$(C);if(E&&E.toElement){E=E.toElement()}if(Object.isElement(E)){C.parentNode.replaceChild(E,C);return C}E=Object.toHTML(E);var D=C.parentNode,B=D.tagName.toUpperCase();if(Element._insertionTranslations.tags[B]){var F=C.next();var A=Element._getContentFromAnonymousElement(B,E.stripScripts());D.removeChild(C);if(F){A.each(function(G){D.insertBefore(G,F)})}else{A.each(function(G){D.appendChild(G)})}}else{C.outerHTML=E.stripScripts()}E.evalScripts.bind(E).defer();return C}}Element._returnOffset=function(B,C){var A=[B,C];A.left=B;A.top=C;return A};Element._getContentFromAnonymousElement=function(C,B){var D=new Element("div"),A=Element._insertionTranslations.tags[C];D.innerHTML=A[0]+B+A[1];A[2].times(function(){D=D.firstChild});return $A(D.childNodes)};Element._insertionTranslations={before:{adjacency:"beforeBegin",insert:function(A,B){A.parentNode.insertBefore(B,A)},initializeRange:function(B,A){A.setStartBefore(B)}},top:{adjacency:"afterBegin",insert:function(A,B){A.insertBefore(B,A.firstChild)},initializeRange:function(B,A){A.selectNodeContents(B);A.collapse(true)}},bottom:{adjacency:"beforeEnd",insert:function(A,B){A.appendChild(B)}},after:{adjacency:"afterEnd",insert:function(A,B){A.parentNode.insertBefore(B,A.nextSibling)},initializeRange:function(B,A){A.setStartAfter(B)}},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};(function(){this.bottom.initializeRange=this.top.initializeRange;Object.extend(this.tags,{THEAD:this.tags.TBODY,TFOOT:this.tags.TBODY,TH:this.tags.TD})}).call(Element._insertionTranslations);Element.Methods.Simulated={hasAttribute:function(A,C){C=Element._attributeTranslations.has[C]||C;var B=$(A).getAttributeNode(C);return B&&B.specified}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);if(!Prototype.BrowserFeatures.ElementExtensions&&document.createElement("div").__proto__){window.HTMLElement={};window.HTMLElement.prototype=document.createElement("div").__proto__;Prototype.BrowserFeatures.ElementExtensions=true}Element.extend=(function(){if(Prototype.BrowserFeatures.SpecificElementExtensions){return Prototype.K}var A={},B=Element.Methods.ByTag;var C=Object.extend(function(F){if(!F||F._extendedByPrototype||F.nodeType!=1||F==window){return F}var D=Object.clone(A),E=F.tagName,H,G;if(B[E]){Object.extend(D,B[E])}for(H in D){G=D[H];if(Object.isFunction(G)&&!(H in F)){F[H]=G.methodize()}}F._extendedByPrototype=Prototype.emptyFunction;return F},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(A,Element.Methods);Object.extend(A,Element.Methods.Simulated)}}});C.refresh();return C})();Element.hasAttribute=function(A,B){if(A.hasAttribute){return A.hasAttribute(B)}return Element.Methods.Simulated.hasAttribute(A,B)};Element.addMethods=function(C){var I=Prototype.BrowserFeatures,D=Element.Methods.ByTag;if(!C){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{"FORM":Object.clone(Form.Methods),"INPUT":Object.clone(Form.Element.Methods),"SELECT":Object.clone(Form.Element.Methods),"TEXTAREA":Object.clone(Form.Element.Methods)})}if(arguments.length==2){var B=C;C=arguments[1]}if(!B){Object.extend(Element.Methods,C||{})}else{if(Object.isArray(B)){B.each(H)}else{H(B)}}function H(F){F=F.toUpperCase();if(!Element.Methods.ByTag[F]){Element.Methods.ByTag[F]={}}Object.extend(Element.Methods.ByTag[F],C)}function A(L,K,F){F=F||false;for(var N in L){var M=L[N];if(!Object.isFunction(M)){continue}if(!F||!(N in K)){K[N]=M.methodize()}}}function E(L){var F;var K={"OPTGROUP":"OptGroup","TEXTAREA":"TextArea","P":"Paragraph","FIELDSET":"FieldSet","UL":"UList","OL":"OList","DL":"DList","DIR":"Directory","H1":"Heading","H2":"Heading","H3":"Heading","H4":"Heading","H5":"Heading","H6":"Heading","Q":"Quote","INS":"Mod","DEL":"Mod","A":"Anchor","IMG":"Image","CAPTION":"TableCaption","COL":"TableCol","COLGROUP":"TableCol","THEAD":"TableSection","TFOOT":"TableSection","TBODY":"TableSection","TR":"TableRow","TH":"TableCell","TD":"TableCell","FRAMESET":"FrameSet","IFRAME":"IFrame"};if(K[L]){F="HTML"+K[L]+"Element"}if(window[F]){return window[F]}F="HTML"+L+"Element";if(window[F]){return window[F]}F="HTML"+L.capitalize()+"Element";if(window[F]){return window[F]}window[F]={};window[F].prototype=document.createElement(L).__proto__;return window[F]}if(I.ElementExtensions){A(Element.Methods,HTMLElement.prototype);A(Element.Methods.Simulated,HTMLElement.prototype,true)}if(I.SpecificElementExtensions){for(var J in Element.Methods.ByTag){var G=E(J);if(Object.isUndefined(G)){continue}A(D[J],G.prototype)}}Object.extend(Element,Element.Methods);delete Element.ByTag;if(Element.extend.refresh){Element.extend.refresh()}Element.cache={}};document.viewport={getDimensions:function(){var A={};$w("width height").each(function(C){var B=C.capitalize();A[C]=self["inner"+B]||(document.documentElement["client"+B]||document.body["client"+B])});return A},getWidth:function(){return this.getDimensions().width},getHeight:function(){return this.getDimensions().height},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};var Selector=Class.create({initialize:function(A){this.expression=A.strip();this.compileMatcher()},compileMatcher:function(){if(Prototype.BrowserFeatures.XPath&&!(/(\[[\w-]*?:|:checked)/).test(this.expression)){return this.compileXPathMatcher()}var e=this.expression,ps=Selector.patterns,h=Selector.handlers,c=Selector.criteria,le,p,m;if(Selector._cache[e]){this.matcher=Selector._cache[e];return }this.matcher=["this.matcher = function(root) {","var r = root, h = Selector.handlers, c = false, n;"];while(e&&le!=e&&(/\S/).test(e)){le=e;for(var i in ps){p=ps[i];if(m=e.match(p)){this.matcher.push(Object.isFunction(c[i])?c[i](m):new Template(c[i]).evaluate(m));e=e.replace(m[0],"");break}}}this.matcher.push("return h.unique(n);\n}");eval(this.matcher.join("\n"));Selector._cache[this.expression]=this.matcher},compileXPathMatcher:function(){var E=this.expression,F=Selector.patterns,B=Selector.xpath,D,A;if(Selector._cache[E]){this.xpath=Selector._cache[E];return }this.matcher=[".//*"];while(E&&D!=E&&(/\S/).test(E)){D=E;for(var C in F){if(A=E.match(F[C])){this.matcher.push(Object.isFunction(B[C])?B[C](A):new Template(B[C]).evaluate(A));E=E.replace(A[0],"");break}}}this.xpath=this.matcher.join("");Selector._cache[this.expression]=this.xpath},findElements:function(A){A=A||document;if(this.xpath){return document._getElementsByXPath(this.xpath,A)}return this.matcher(A)},match:function(H){this.tokens=[];var L=this.expression,A=Selector.patterns,E=Selector.assertions;var B,D,F;while(L&&B!==L&&(/\S/).test(L)){B=L;for(var I in A){D=A[I];if(F=L.match(D)){if(E[I]){this.tokens.push([I,Object.clone(F)]);L=L.replace(F[0],"")}else{return this.findElements(document).include(H)}}}}var K=true,C,J;for(var I=0,G;G=this.tokens[I];I++){C=G[0],J=G[1];if(!Selector.assertions[C](H,J)){K=false;break}}return K},toString:function(){return this.expression},inspect:function(){return"#<Selector:"+this.expression.inspect()+">"}});Object.extend(Selector,{_cache:{},xpath:{descendant:"//*",child:"/*",adjacent:"/following-sibling::*[1]",laterSibling:"/following-sibling::*",tagName:function(A){if(A[1]=="*"){return""}return"[local-name()='"+A[1].toLowerCase()+"' or local-name()='"+A[1].toUpperCase()+"']"},className:"[contains(concat(' ', @class, ' '), ' #{1} ')]",id:"[@id='#{1}']",attrPresence:"[@#{1}]",attr:function(A){A[3]=A[5]||A[6];return new Template(Selector.xpath.operators[A[2]]).evaluate(A)},pseudo:function(A){var B=Selector.xpath.pseudos[A[1]];if(!B){return""}if(Object.isFunction(B)){return B(A)}return new Template(Selector.xpath.pseudos[A[1]]).evaluate(A)},operators:{"=":"[@#{1}='#{3}']","!=":"[@#{1}!='#{3}']","^=":"[starts-with(@#{1}, '#{3}')]","$=":"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']","*=":"[contains(@#{1}, '#{3}')]","~=":"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]","|=":"[contains(concat('-', @#{1}, '-'), '-#{3}-')]"},pseudos:{"first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","only-child":"[not(preceding-sibling::* or following-sibling::*)]","empty":"[count(*) = 0 and (count(text()) = 0 or translate(text(), ' \t\r\n', '') = '')]","checked":"[@checked]","disabled":"[@disabled]","enabled":"[not(@disabled)]","not":function(B){var H=B[6],G=Selector.patterns,A=Selector.xpath,E,B,C;var F=[];while(H&&E!=H&&(/\S/).test(H)){E=H;for(var D in G){if(B=H.match(G[D])){C=Object.isFunction(A[D])?A[D](B):new Template(A[D]).evaluate(B);F.push("("+C.substring(1,C.length-1)+")");H=H.replace(B[0],"");break}}}return"[not("+F.join(" and ")+")]"},"nth-child":function(A){return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*) + 1) ",A)},"nth-last-child":function(A){return Selector.xpath.pseudos.nth("(count(./following-sibling::*) + 1) ",A)},"nth-of-type":function(A){return Selector.xpath.pseudos.nth("position() ",A)},"nth-last-of-type":function(A){return Selector.xpath.pseudos.nth("(last() + 1 - position()) ",A)},"first-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-of-type"](A)},"last-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-last-of-type"](A)},"only-of-type":function(A){var B=Selector.xpath.pseudos;return B["first-of-type"](A)+B["last-of-type"](A)},nth:function(E,C){var F,G=C[6],B;if(G=="even"){G="2n+0"}if(G=="odd"){G="2n+1"}if(F=G.match(/^(\d+)$/)){return"["+E+"= "+F[1]+"]"}if(F=G.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(F[1]=="-"){F[1]=-1}var D=F[1]?Number(F[1]):1;var A=F[2]?Number(F[2]):0;B="[((#{fragment} - #{b}) mod #{a} = 0) and ((#{fragment} - #{b}) div #{a} >= 0)]";return new Template(B).evaluate({fragment:E,a:D,b:A})}}}},criteria:{tagName:'n = h.tagName(n, r, "#{1}", c);   c = false;',className:'n = h.className(n, r, "#{1}", c); c = false;',id:'n = h.id(n, r, "#{1}", c);        c = false;',attrPresence:'n = h.attrPresence(n, r, "#{1}"); c = false;',attr:function(A){A[3]=(A[5]||A[6]);return new Template('n = h.attr(n, r, "#{1}", "#{3}", "#{2}"); c = false;').evaluate(A)},pseudo:function(A){if(A[6]){A[6]=A[6].replace(/"/g,'\\"')}return new Template('n = h.pseudo(n, "#{1}", "#{6}", r, c); c = false;').evaluate(A)},descendant:'c = "descendant";',child:'c = "child";',adjacent:'c = "adjacent";',laterSibling:'c = "laterSibling";'},patterns:{laterSibling:/^\s*~\s*/,child:/^\s*>\s*/,adjacent:/^\s*\+\s*/,descendant:/^\s/,tagName:/^\s*(\*|[\w\-]+)(\b|$)?/,id:/^#([\w\-\*]+)(\b|$)/,className:/^\.([\w\-\*]+)(\b|$)/,pseudo:/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|(?=\s)|(?=:))/,attrPresence:/^\[([\w]+)\]/,attr:/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/},assertions:{tagName:function(A,B){return B[1].toUpperCase()==A.tagName.toUpperCase()},className:function(A,B){return Element.hasClassName(A,B[1])},id:function(A,B){return A.id===B[1]},attrPresence:function(A,B){return Element.hasAttribute(A,B[1])},attr:function(B,C){var A=Element.readAttribute(B,C[1]);return Selector.operators[C[2]](A,C[3])}},handlers:{concat:function(B,A){for(var C=0,D;D=A[C];C++){B.push(D)}return B},mark:function(A){for(var B=0,C;C=A[B];B++){C._counted=true}return A},unmark:function(A){for(var B=0,C;C=A[B];B++){C._counted=undefined}return A},index:function(A,D,G){A._counted=true;if(D){for(var B=A.childNodes,E=B.length-1,C=1;E>=0;E--){var F=B[E];if(F.nodeType==1&&(!G||F._counted)){F.nodeIndex=C++}}}else{for(var E=0,C=1,B=A.childNodes;F=B[E];E++){if(F.nodeType==1&&(!G||F._counted)){F.nodeIndex=C++}}}},unique:function(B){if(B.length==0){return B}var D=[],E;for(var C=0,A=B.length;C<A;C++){if(!(E=B[C])._counted){E._counted=true;D.push(Element.extend(E))}}return Selector.handlers.unmark(D)},descendant:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,E.getElementsByTagName("*"))}return B},child:function(A){var F=Selector.handlers;for(var E=0,D=[],G;G=A[E];E++){for(var B=0,C=[],H;H=G.childNodes[B];B++){if(H.nodeType==1&&H.tagName!="!"){D.push(H)}}}return D},adjacent:function(A){for(var C=0,B=[],E;E=A[C];C++){var D=this.nextElementSibling(E);if(D){B.push(D)}}return B},laterSibling:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,Element.nextSiblings(E))}return B},nextElementSibling:function(A){while(A=A.nextSibling){if(A.nodeType==1){return A}}return null},previousElementSibling:function(A){while(A=A.previousSibling){if(A.nodeType==1){return A}}return null},tagName:function(B,A,E,H){E=E.toUpperCase();var D=[],F=Selector.handlers;if(B){if(H){if(H=="descendant"){for(var C=0,G;G=B[C];C++){F.concat(D,G.getElementsByTagName(E))}return D}else{B=this[H](B)}if(E=="*"){return B}}for(var C=0,G;G=B[C];C++){if(G.tagName.toUpperCase()==E){D.push(G)}}return D}else{return A.getElementsByTagName(E)}},id:function(B,A,H,F){var G=$(H),D=Selector.handlers;if(!G){return[]}if(!B&&A==document){return[G]}if(B){if(F){if(F=="child"){for(var C=0,E;E=B[C];C++){if(G.parentNode==E){return[G]}}}else{if(F=="descendant"){for(var C=0,E;E=B[C];C++){if(Element.descendantOf(G,E)){return[G]}}}else{if(F=="adjacent"){for(var C=0,E;E=B[C];C++){if(Selector.handlers.previousElementSibling(G)==E){return[G]}}}else{B=D[F](B)}}}}for(var C=0,E;E=B[C];C++){if(E==G){return[G]}}return[]}return(G&&Element.descendantOf(G,A))?[G]:[]},className:function(B,A,C,D){if(B&&D){B=this[D](B)}return Selector.handlers.byClassName(B,A,C)},byClassName:function(C,B,F){if(!C){C=Selector.handlers.descendant([B])}var H=" "+F+" ";for(var E=0,D=[],G,A;G=C[E];E++){A=G.className;if(A.length==0){continue}if(A==F||(" "+A+" ").include(H)){D.push(G)}}return D},attrPresence:function(C,B,A){if(!C){C=B.getElementsByTagName("*")}var E=[];for(var D=0,F;F=C[D];D++){if(Element.hasAttribute(F,A)){E.push(F)}}return E},attr:function(A,H,G,I,B){if(!A){A=H.getElementsByTagName("*")}var J=Selector.operators[B],D=[];for(var E=0,C;C=A[E];E++){var F=Element.readAttribute(C,G);if(F===null){continue}if(J(F,I)){D.push(C)}}return D},pseudo:function(B,C,E,A,D){if(B&&D){B=this[D](B)}if(!B){B=A.getElementsByTagName("*")}return Selector.pseudos[C](B,E,A)}},pseudos:{"first-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.previousElementSibling(E)){continue}C.push(E)}return C},"last-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.nextElementSibling(E)){continue}C.push(E)}return C},"only-child":function(B,G,A){var E=Selector.handlers;for(var D=0,C=[],F;F=B[D];D++){if(!E.previousElementSibling(F)&&!E.nextElementSibling(F)){C.push(F)}}return C},"nth-child":function(B,C,A){return Selector.pseudos.nth(B,C,A)},"nth-last-child":function(B,C,A){return Selector.pseudos.nth(B,C,A,true)},"nth-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,false,true)},"nth-last-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,true,true)},"first-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,false,true)},"last-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,true,true)},"only-of-type":function(B,D,A){var C=Selector.pseudos;return C["last-of-type"](C["first-of-type"](B,D,A),D,A)},getIndices:function(B,A,C){if(B==0){return A>0?[A]:[]}return $R(1,C).inject([],function(D,E){if(0==(E-A)%B&&(E-A)/B>=0){D.push(E)}return D})},nth:function(A,L,N,K,C){if(A.length==0){return[]}if(L=="even"){L="2n+0"}if(L=="odd"){L="2n+1"}var J=Selector.handlers,I=[],B=[],E;J.mark(A);for(var H=0,D;D=A[H];H++){if(!D.parentNode._counted){J.index(D.parentNode,K,C);B.push(D.parentNode)}}if(L.match(/^\d+$/)){L=Number(L);for(var H=0,D;D=A[H];H++){if(D.nodeIndex==L){I.push(D)}}}else{if(E=L.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(E[1]=="-"){E[1]=-1}var O=E[1]?Number(E[1]):1;var M=E[2]?Number(E[2]):0;var P=Selector.pseudos.getIndices(O,M,A.length);for(var H=0,D,F=P.length;D=A[H];H++){for(var G=0;G<F;G++){if(D.nodeIndex==P[G]){I.push(D)}}}}}J.unmark(A);J.unmark(B);return I},"empty":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.tagName=="!"||(E.firstChild&&!E.innerHTML.match(/^\s*$/))){continue}C.push(E)}return C},"not":function(A,D,I){var G=Selector.handlers,J,C;var H=new Selector(D).findElements(I);G.mark(H);for(var F=0,E=[],B;B=A[F];F++){if(!B._counted){E.push(B)}}G.unmark(H);return E},"enabled":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(!E.disabled){C.push(E)}}return C},"disabled":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.disabled){C.push(E)}}return C},"checked":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.checked){C.push(E)}}return C}},operators:{"=":function(B,A){return B==A},"!=":function(B,A){return B!=A},"^=":function(B,A){return B.startsWith(A)},"$=":function(B,A){return B.endsWith(A)},"*=":function(B,A){return B.include(A)},"~=":function(B,A){return(" "+B+" ").include(" "+A+" ")},"|=":function(B,A){return("-"+B.toUpperCase()+"-").include("-"+A.toUpperCase()+"-")}},matchElements:function(F,G){var E=new Selector(G).findElements(),D=Selector.handlers;D.mark(E);for(var C=0,B=[],A;A=F[C];C++){if(A._counted){B.push(A)}}D.unmark(E);return B},findElement:function(B,C,A){if(Object.isNumber(C)){A=C;C=false}return Selector.matchElements(B,C||"*")[A||0]},findChildElements:function(E,G){var H=G.join(","),G=[];H.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/,function(I){G.push(I[1].strip())});var D=[],F=Selector.handlers;for(var C=0,B=G.length,A;C<B;C++){A=new Selector(G[C].strip());F.concat(D,A.findElements(E))}return(B>1)?F.unique(D):D}});function $$(){return Selector.findChildElements(document,$A(arguments))}var Form={reset:function(A){$(A).reset();return A},serializeElements:function(G,B){if(typeof B!="object"){B={hash:!!B}}else{if(B.hash===undefined){B.hash=true}}var C,F,A=false,E=B.submit;var D=G.inject({},function(H,I){if(!I.disabled&&I.name){C=I.name;F=$(I).getValue();if(F!=null&&(I.type!="submit"||(!A&&E!==false&&(!E||C==E)&&(A=true)))){if(C in H){if(!Object.isArray(H[C])){H[C]=[H[C]]}H[C].push(F)}else{H[C]=F}}}return H});return B.hash?D:Object.toQueryString(D)}};Form.Methods={serialize:function(B,A){return Form.serializeElements(Form.getElements(B),A)},getElements:function(A){return $A($(A).getElementsByTagName("*")).inject([],function(B,C){if(Form.Element.Serializers[C.tagName.toLowerCase()]){B.push(Element.extend(C))}return B})},getInputs:function(G,C,D){G=$(G);var A=G.getElementsByTagName("input");if(!C&&!D){return $A(A).map(Element.extend)}for(var E=0,H=[],F=A.length;E<F;E++){var B=A[E];if((C&&B.type!=C)||(D&&B.name!=D)){continue}H.push(Element.extend(B))}return H},disable:function(A){A=$(A);Form.getElements(A).invoke("disable");return A},enable:function(A){A=$(A);Form.getElements(A).invoke("enable");return A},findFirstElement:function(B){var C=$(B).getElements().findAll(function(D){return"hidden"!=D.type&&!D.disabled});var A=C.findAll(function(D){return D.hasAttribute("tabIndex")&&D.tabIndex>=0}).sortBy(function(D){return D.tabIndex}).first();return A?A:C.find(function(D){return["input","select","textarea"].include(D.tagName.toLowerCase())})},focusFirstElement:function(A){A=$(A);A.findFirstElement().activate();return A},request:function(B,A){B=$(B),A=Object.clone(A||{});var D=A.parameters,C=B.readAttribute("action")||"";if(C.blank()){C=window.location.href}A.parameters=B.serialize(true);if(D){if(Object.isString(D)){D=D.toQueryParams()}Object.extend(A.parameters,D)}if(B.hasAttribute("method")&&!A.method){A.method=B.method}return new Ajax.Request(C,A)}};Form.Element={focus:function(A){$(A).focus();return A},select:function(A){$(A).select();return A}};Form.Element.Methods={serialize:function(A){A=$(A);if(!A.disabled&&A.name){var B=A.getValue();if(B!=undefined){var C={};C[A.name]=B;return Object.toQueryString(C)}}return""},getValue:function(A){A=$(A);var B=A.tagName.toLowerCase();return Form.Element.Serializers[B](A)},setValue:function(A,B){A=$(A);var C=A.tagName.toLowerCase();Form.Element.Serializers[C](A,B);return A},clear:function(A){$(A).value="";return A},present:function(A){return $(A).value!=""},activate:function(A){A=$(A);try{A.focus();if(A.select&&(A.tagName.toLowerCase()!="input"||!["button","reset","submit"].include(A.type))){A.select()}}catch(B){}return A},disable:function(A){A=$(A);A.blur();A.disabled=true;return A},enable:function(A){A=$(A);A.disabled=false;return A}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers={input:function(A,B){switch(A.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(A,B);default:return Form.Element.Serializers.textarea(A,B)}},inputSelector:function(A,B){if(B===undefined){return A.checked?A.value:null}else{A.checked=!!B}},textarea:function(A,B){if(B===undefined){return A.value}else{A.value=B}},select:function(D,A){if(A===undefined){return this[D.type=="select-one"?"selectOne":"selectMany"](D)}else{var C,F,G=!Object.isArray(A);for(var B=0,E=D.length;B<E;B++){C=D.options[B];F=this.optionValue(C);if(G){if(F==A){C.selected=true;return }}else{C.selected=A.include(F)}}}},selectOne:function(B){var A=B.selectedIndex;return A>=0?this.optionValue(B.options[A]):null},selectMany:function(D){var A,E=D.length;if(!E){return null}for(var C=0,A=[];C<E;C++){var B=D.options[C];if(B.selected){A.push(this.optionValue(B))}}return A},optionValue:function(A){return Element.extend(A).hasAttribute("value")?A.value:A.text}};Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,A,B,C){$super(C,B);this.element=$(A);this.lastValue=this.getValue()},execute:function(){var A=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(A)?this.lastValue!=A:String(this.lastValue)!=String(A)){this.callback(this.element,A);this.lastValue=A}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(A,B){this.element=$(A);this.callback=B;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(A){if(A.type){switch(A.type.toLowerCase()){case"checkbox":case"radio":Event.observe(A,"click",this.onElementEvent.bind(this));break;default:Event.observe(A,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});if(!window.Event){var Event={}}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{},relatedTarget:function(B){var A;switch(B.type){case"mouseover":A=B.fromElement;break;case"mouseout":A=B.toElement;break;default:return null}return Element.extend(A)}});Event.Methods=(function(){var A;if(Prototype.Browser.IE){var B={0:1,1:4,2:2};A=function(D,C){return D.button==B[C]}}else{if(Prototype.Browser.WebKit){A=function(D,C){switch(C){case 0:return D.which==1&&!D.metaKey;case 1:return D.which==1&&D.metaKey;default:return false}}}else{A=function(D,C){return D.which?(D.which===C+1):(D.button===C)}}}return{isLeftClick:function(C){return A(C,0)},isMiddleClick:function(C){return A(C,1)},isRightClick:function(C){return A(C,2)},element:function(D){var C=Event.extend(D).target;return Element.extend(C.nodeType==Node.TEXT_NODE?C.parentNode:C)},findElement:function(D,E){var C=Event.element(D);return C.match(E)?C:C.up(E)},pointer:function(C){return{x:C.pageX||(C.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),y:C.pageY||(C.clientY+(document.documentElement.scrollTop||document.body.scrollTop))}},pointerX:function(C){return Event.pointer(C).x},pointerY:function(C){return Event.pointer(C).y},stop:function(C){Event.extend(C);C.preventDefault();C.stopPropagation();C.stopped=true}}})();Event.extend=(function(){var A=Object.keys(Event.Methods).inject({},function(B,C){B[C]=Event.Methods[C].methodize();return B});if(Prototype.Browser.IE){Object.extend(A,{stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}});return function(B){if(!B){return false}if(B._extendedByPrototype){return B}B._extendedByPrototype=Prototype.emptyFunction;var C=Event.pointer(B);Object.extend(B,{target:B.srcElement,relatedTarget:Event.relatedTarget(B),pageX:C.x,pageY:C.y});return Object.extend(B,A)}}else{Event.prototype=Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(Event.prototype,A);return Prototype.K}})();Object.extend(Event,(function(){var B=Event.cache;function C(J){if(J._eventID){return J._eventID}arguments.callee.id=arguments.callee.id||1;return J._eventID=++arguments.callee.id}function G(J){if(J&&J.include(":")){return"dataavailable"}return J}function A(J){return B[J]=B[J]||{}}function F(L,J){var K=A(L);return K[J]=K[J]||[]}function H(K,J,L){var O=C(K);var N=F(O,J);if(N.pluck("handler").include(L)){return false}var M=function(P){if(!Event||!Event.extend||(P.eventName&&P.eventName!=J)){return false}Event.extend(P);L.call(K,P)};M.handler=L;N.push(M);return M}function I(M,J,K){var L=F(M,J);return L.find(function(N){return N.handler==K})}function D(M,J,K){var L=A(M);if(!L[J]){return false}L[J]=L[J].without(I(M,J,K))}function E(){for(var K in B){for(var J in B[K]){B[K][J]=null}}}if(window.attachEvent){window.attachEvent("onunload",E)}return{observe:function(L,J,M){L=$(L);var K=G(J);var N=H(L,J,M);if(!N){return L}if(L.addEventListener){L.addEventListener(K,N,false)}else{L.attachEvent("on"+K,N)}return L},stopObserving:function(L,J,M){L=$(L);var O=C(L),K=G(J);if(!M&&J){F(O,J).each(function(P){L.stopObserving(J,P.handler)});return L}else{if(!J){Object.keys(A(O)).each(function(P){L.stopObserving(P)});return L}}var N=I(O,J,M);if(!N){return L}if(L.removeEventListener){L.removeEventListener(K,N,false)}else{L.detachEvent("on"+K,N)}D(O,J,M);return L},fire:function(L,K,J){L=$(L);if(L==document&&document.createEvent&&!L.dispatchEvent){L=document.documentElement}if(document.createEvent){var M=document.createEvent("HTMLEvents");M.initEvent("dataavailable",true,true)}else{var M=document.createEventObject();M.eventType="ondataavailable"}M.eventName=K;M.memo=J||{};if(document.createEvent){L.dispatchEvent(M)}else{L.fireEvent(M.eventType,M)}return M}}})());Object.extend(Event,Event.Methods);Element.addMethods({fire:Event.fire,observe:Event.observe,stopObserving:Event.stopObserving});Object.extend(document,{fire:Element.Methods.fire.methodize(),observe:Element.Methods.observe.methodize(),stopObserving:Element.Methods.stopObserving.methodize()});(function(){var C,B=false;function A(){if(B){return }if(C){window.clearInterval(C)}document.fire("dom:loaded");B=true}if(document.addEventListener){if(Prototype.Browser.WebKit){C=window.setInterval(function(){if(/loaded|complete/.test(document.readyState)){A()}},0);Event.observe(window,"load",A)}else{document.addEventListener("DOMContentLoaded",A,false)}}else{document.write("<script id=__onDOMContentLoaded defer src=//:><\/script>");$("__onDOMContentLoaded").onreadystatechange=function(){if(this.readyState=="complete"){this.onreadystatechange=null;A()}}}})();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(A,B){return Element.insert(A,{before:B})},Top:function(A,B){return Element.insert(A,{top:B})},Bottom:function(A,B){return Element.insert(A,{bottom:B})},After:function(A,B){return Element.insert(A,{after:B})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=Element.cumulativeOffset(B);return(C>=this.offset[1]&&C<this.offset[1]+B.offsetHeight&&A>=this.offset[0]&&A<this.offset[0]+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=Element.cumulativeScrollOffset(B);this.xcomp=A+C[0]-this.deltaX;this.ycomp=D+C[1]-this.deltaY;this.offset=Element.cumulativeOffset(B);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+B.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(A){Position.prepare();return Element.absolutize(A)},relativize:function(A){Position.prepare();return Element.relativize(A)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(B,C,A){A=A||{};return Element.clonePosition(C,B,A)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(B){function A(C){return C.blank()?null:"[contains(concat(' ', @class, ' '), ' "+C+" ')]"}B.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(C,E){E=E.toString().strip();var D=/\s/.test(E)?$w(E).map(A).join(""):A(E);return D?document._getElementsByXPath(".//*"+D,C):[]}:function(E,F){F=F.toString().strip();var G=[],H=(/\s/.test(F)?$w(F):null);if(!H&&!F){return G}var C=$(E).getElementsByTagName("*");F=" "+F+" ";for(var D=0,J,I;J=C[D];D++){if(J.className&&(I=" "+J.className+" ")&&(I.include(F)||(H&&H.all(function(K){return !K.toString().blank()&&I.include(" "+K+" ")})))){G.push(Element.extend(J))}}return G};return function(D,C){return $(C||document.body).getElementsByClassName(D)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(A){this.element=$(A)},_each:function(A){this.element.className.split(/\s+/).select(function(B){return B.length>0})._each(A)},set:function(A){this.element.className=A},add:function(A){if(this.include(A)){return }this.set($A(this).concat(A).join(" "))},remove:function(A){if(!this.include(A)){return }this.set($A(this).without(A).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);Element.addMethods();var Scriptaculous={Version:"1.8.1",require:function(A){document.write('<script type="text/javascript" src="'+A+'"><\/script>')},REQUIRED_PROTOTYPE:"1.6.0",load:function(){function A(B){var C=B.split(".");return parseInt(C[0])*100000+parseInt(C[1])*1000+parseInt(C[2])}if((typeof Prototype=="undefined")||(typeof Element=="undefined")||(typeof Element.Methods=="undefined")||(A(Prototype.Version)<A(Scriptaculous.REQUIRED_PROTOTYPE))){throw ("script.aculo.us requires the Prototype JavaScript framework >= "+Scriptaculous.REQUIRED_PROTOTYPE)}$A(document.getElementsByTagName("script")).findAll(function(B){return(B.src&&B.src.match(/scriptaculous\.js(\?.*)?$/))}).each(function(C){var D=C.src.replace(/scriptaculous\.js(\?.*)?$/,"");var B=C.src.match(/\?.*load=([a-z,]*)/);(B?B[1]:"builder,effects,dragdrop,controls,slider,sound").split(",").each(function(E){Scriptaculous.require(D+E+".js")})})}};String.prototype.parseColor=function(){var A="#";if(this.slice(0,4)=="rgb("){var C=this.slice(4,this.length-1).split(",");var B=0;do{A+=parseInt(C[B]).toColorPart()}while(++B<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var B=1;B<4;B++){A+=(this.charAt(B)+this.charAt(B)).toLowerCase()}}if(this.length==7){A=this.toLowerCase()}}}return(A.length==7?A:(arguments[0]||this))};Element.collectTextNodes=function(A){return $A($(A).childNodes).collect(function(B){return(B.nodeType==3?B.nodeValue:(B.hasChildNodes()?Element.collectTextNodes(B):""))}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(A,B){return $A($(A).childNodes).collect(function(C){return(C.nodeType==3?C.nodeValue:((C.hasChildNodes()&&!Element.hasClassName(C,B))?Element.collectTextNodesIgnoreClass(C,B):""))}).flatten().join("")};Element.setContentZoom=function(A,B){A=$(A);A.setStyle({fontSize:(B/100)+"em"});if(Prototype.Browser.WebKit){window.scrollBy(0,0)}return A};Element.getInlineOpacity=function(A){return $(A).style.opacity||""};Element.forceRerendering=function(A){try{A=$(A);var C=document.createTextNode(" ");A.appendChild(C);A.removeChild(C)}catch(B){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(A){return(-Math.cos(A*Math.PI)/2)+0.5},reverse:function(A){return 1-A},flicker:function(A){var A=((-Math.cos(A*Math.PI)/4)+0.75)+Math.random()/4;return A>1?1:A},wobble:function(A){return(-Math.cos(A*Math.PI*(9*A))/2)+0.5},pulse:function(B,A){A=A||5;return(((B%(1/A))*A).round()==0?((B*A*2)-(B*A*2).floor()):1-((B*A*2)-(B*A*2).floor()))},spring:function(A){return 1-(Math.cos(A*4.5*Math.PI)*Math.exp(-A*6))},none:function(A){return 0},full:function(A){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(A){var B="position:relative";if(Prototype.Browser.IE){B+=";zoom:1"}A=$(A);$A(A.childNodes).each(function(C){if(C.nodeType==3){C.nodeValue.toArray().each(function(D){A.insertBefore(new Element("span",{style:B}).update(D==" "?String.fromCharCode(160):D),C)});Element.remove(C)}})},multiple:function(B,C){var E;if(((typeof B=="object")||Object.isFunction(B))&&(B.length)){E=B}else{E=$(B).childNodes}var A=Object.extend({speed:0.1,delay:0},arguments[2]||{});var D=A.delay;$A(E).each(function(G,F){new C(G,Object.extend(A,{delay:F*A.speed+D}))})},PAIRS:{"slide":["SlideDown","SlideUp"],"blind":["BlindDown","BlindUp"],"appear":["Appear","Fade"]},toggle:function(B,C){B=$(B);C=(C||"appear").toLowerCase();var A=Object.extend({queue:{position:"end",scope:(B.id||"global"),limit:1}},arguments[2]||{});Effect[B.visible()?Effect.PAIRS[C][1]:Effect.PAIRS[C][0]](B,A)}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(A){this.effects._each(A)},add:function(B){var C=new Date().getTime();var A=Object.isString(B.options.queue)?B.options.queue:B.options.queue.position;switch(A){case"front":this.effects.findAll(function(D){return D.state=="idle"}).each(function(D){D.startOn+=B.finishOn;D.finishOn+=B.finishOn});break;case"with-last":C=this.effects.pluck("startOn").max()||C;break;case"end":C=this.effects.pluck("finishOn").max()||C;break}B.startOn+=C;B.finishOn+=C;if(!B.options.queue.limit||(this.effects.length<B.options.queue.limit)){this.effects.push(B)}if(!this.interval){this.interval=setInterval(this.loop.bind(this),15)}},remove:function(A){this.effects=this.effects.reject(function(B){return B==A});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var C=new Date().getTime();for(var B=0,A=this.effects.length;B<A;B++){this.effects[B]&&this.effects[B].loop(C)}}});Effect.Queues={instances:$H(),get:function(A){if(!Object.isString(A)){return A}return this.instances.get(A)||this.instances.set(A,new Effect.ScopedQueue())}};Effect.Queue=Effect.Queues.get("global");Effect.Base=Class.create({position:null,start:function(options){function codeForEvent(options,eventName){return((options[eventName+"Internal"]?"this.options."+eventName+"Internal(this);":"")+(options[eventName]?"this.options."+eventName+"(this);":""))}if(options&&options.transition===false){options.transition=Effect.Transitions.linear}this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;eval('this.render = function(pos){ if (this.state=="idle"){this.state="running";'+codeForEvent(this.options,"beforeSetup")+(this.setup?"this.setup();":"")+codeForEvent(this.options,"afterSetup")+'};if (this.state=="running"){pos=this.options.transition(pos)*'+this.fromToDelta+"+"+this.options.from+";this.position=pos;"+codeForEvent(this.options,"beforeUpdate")+(this.update?"this.update(pos);":"")+codeForEvent(this.options,"afterUpdate")+"}}");this.event("beforeStart");if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)}},loop:function(C){if(C>=this.startOn){if(C>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return }var B=(C-this.startOn)/this.totalTime,A=(B*this.totalFrames).round();if(A>this.currentFrame){this.render(B);this.currentFrame=A}}},cancel:function(){if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this)}this.state="finished"},event:function(A){if(this.options[A+"Internal"]){this.options[A+"Internal"](this)}if(this.options[A]){this.options[A](this)}},inspect:function(){var A=$H();for(property in this){if(!Object.isFunction(this[property])){A.set(property,this[property])}}return"#<Effect:"+A.inspect()+",options:"+$H(this.options).inspect()+">"}});Effect.Parallel=Class.create(Effect.Base,{initialize:function(A){this.effects=A||[];this.start(arguments[1])},update:function(A){this.effects.invoke("render",A)},finish:function(A){this.effects.each(function(B){B.render(1);B.cancel();B.event("beforeFinish");if(B.finish){B.finish(A)}B.event("afterFinish")})}});Effect.Tween=Class.create(Effect.Base,{initialize:function(C,F,E){C=Object.isString(C)?$(C):C;var B=$A(arguments),D=B.last(),A=B.length==5?B[3]:null;this.method=Object.isFunction(D)?D.bind(C):Object.isFunction(C[D])?C[D].bind(C):function(G){C[D]=G};this.start(Object.extend({from:F,to:E},A||{}))},update:function(A){this.method(A)}});Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction});Effect.Opacity=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}var A=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(A)},update:function(A){this.element.setOpacity(A)}});Effect.Move=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(A)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop}},update:function(A){this.element.setStyle({left:(this.options.x*A+this.originalLeft).round()+"px",top:(this.options.y*A+this.originalTop).round()+"px"})}});Effect.MoveBy=function(B,A,C){return new Effect.Move(B,Object.extend({x:C,y:A},arguments[3]||{}))};Effect.Scale=Class.create(Effect.Base,{initialize:function(B,C){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:C},arguments[2]||{});this.start(A)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(B){this.originalStyle[B]=this.element.style[B]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var A=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(B){if(A.indexOf(B)>0){this.fontSize=parseFloat(A);this.fontSizeType=B}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(A){var B=(this.options.scaleFrom/100)+(this.factor*A);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*B+this.fontSizeType})}this.setDimensions(this.dims[0]*B,this.dims[1]*B)},finish:function(A){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}},setDimensions:function(A,D){var E={};if(this.options.scaleX){E.width=D.round()+"px"}if(this.options.scaleY){E.height=A.round()+"px"}if(this.options.scaleFromCenter){var C=(A-this.dims[0])/2;var B=(D-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){E.top=this.originalTop-C+"px"}if(this.options.scaleX){E.left=this.originalLeft-B+"px"}}else{if(this.options.scaleY){E.top=-C+"px"}if(this.options.scaleX){E.left=-B+"px"}}}this.element.setStyle(E)}});Effect.Highlight=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(A)},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return }this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor){this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")}if(!this.options.restorecolor){this.options.restorecolor=this.element.getStyle("background-color")}this._base=$R(0,2).map(function(A){return parseInt(this.options.startcolor.slice(A*2+1,A*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(A){return parseInt(this.options.endcolor.slice(A*2+1,A*2+3),16)-this._base[A]}.bind(this))},update:function(A){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(B,C,D){return B+((this._base[D]+(this._delta[D]*A)).round().toColorPart())}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(D){var C=arguments[1]||{},B=document.viewport.getScrollOffsets(),E=$(D).cumulativeOffset(),A=(window.height||document.body.scrollHeight)-document.viewport.getHeight();if(C.offset){E[1]+=C.offset}return new Effect.Tween(null,B.top,E[1]>A?A:E[1],C,function(F){scrollTo(B.left,F.round())})};Effect.Fade=function(C){C=$(C);var A=C.getInlineOpacity();var B=Object.extend({from:C.getOpacity()||1,to:0,afterFinishInternal:function(D){if(D.options.to!=0){return }D.element.hide().setStyle({opacity:A})}},arguments[1]||{});return new Effect.Opacity(C,B)};Effect.Appear=function(B){B=$(B);var A=Object.extend({from:(B.getStyle("display")=="none"?0:B.getOpacity()||0),to:1,afterFinishInternal:function(C){C.element.forceRerendering()},beforeSetup:function(C){C.element.setOpacity(C.options.from).show()}},arguments[1]||{});return new Effect.Opacity(B,A)};Effect.Puff=function(B){B=$(B);var A={opacity:B.getInlineOpacity(),position:B.getStyle("position"),top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};return new Effect.Parallel([new Effect.Scale(B,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(C){Position.absolutize(C.effects[0].element)},afterFinishInternal:function(C){C.effects[0].element.hide().setStyle(A)}},arguments[1]||{}))};Effect.BlindUp=function(A){A=$(A);A.makeClipping();return new Effect.Scale(A,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(B){B.element.hide().undoClipping()}},arguments[1]||{}))};Effect.BlindDown=function(B){B=$(B);var A=B.getDimensions();return new Effect.Scale(B,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:A.height,originalWidth:A.width},restoreAfterFinish:true,afterSetup:function(C){C.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(C){C.element.undoClipping()}},arguments[1]||{}))};Effect.SwitchOff=function(B){B=$(B);var A=B.getInlineOpacity();return new Effect.Appear(B,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(C){new Effect.Scale(C.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(D){D.element.makePositioned().makeClipping()},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned().setStyle({opacity:A})}})}},arguments[1]||{}))};Effect.DropOut=function(B){B=$(B);var A={top:B.getStyle("top"),left:B.getStyle("left"),opacity:B.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(B,{x:0,y:100,sync:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(C){C.effects[0].element.makePositioned()},afterFinishInternal:function(C){C.effects[0].element.hide().undoPositioned().setStyle(A)}},arguments[1]||{}))};Effect.Shake=function(D){D=$(D);var B=Object.extend({distance:20,duration:0.5},arguments[1]||{});var E=parseFloat(B.distance);var C=parseFloat(B.duration)/10;var A={top:D.getStyle("top"),left:D.getStyle("left")};return new Effect.Move(D,{x:E,y:0,duration:C,afterFinishInternal:function(F){new Effect.Move(F.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(G){new Effect.Move(G.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(H){new Effect.Move(H.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(I){new Effect.Move(I.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(J){new Effect.Move(J.element,{x:-E,y:0,duration:C,afterFinishInternal:function(K){K.element.undoPositioned().setStyle(A)}})}})}})}})}})}})};Effect.SlideDown=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.SlideUp=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.Squish=function(A){return new Effect.Scale(A,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(B){B.element.makeClipping()},afterFinishInternal:function(B){B.element.hide().undoClipping()}})};Effect.Grow=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var G=C.getDimensions();var H,F;var E,D;switch(B.direction){case"top-left":H=F=E=D=0;break;case"top-right":H=G.width;F=D=0;E=-G.width;break;case"bottom-left":H=E=0;F=G.height;D=-G.height;break;case"bottom-right":H=G.width;F=G.height;E=-G.width;D=-G.height;break;case"center":H=G.width/2;F=G.height/2;E=-G.width/2;D=-G.height/2;break}return new Effect.Move(C,{x:H,y:F,duration:0.01,beforeSetup:function(I){I.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(I){new Effect.Parallel([new Effect.Opacity(I.element,{sync:true,to:1,from:0,transition:B.opacityTransition}),new Effect.Move(I.element,{x:E,y:D,sync:true,transition:B.moveTransition}),new Effect.Scale(I.element,100,{scaleMode:{originalHeight:G.height,originalWidth:G.width},sync:true,scaleFrom:window.opera?1:0,transition:B.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(J){J.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(J){J.effects[0].element.undoClipping().undoPositioned().setStyle(A)}},B))}})};Effect.Shrink=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var F=C.getDimensions();var E,D;switch(B.direction){case"top-left":E=D=0;break;case"top-right":E=F.width;D=0;break;case"bottom-left":E=0;D=F.height;break;case"bottom-right":E=F.width;D=F.height;break;case"center":E=F.width/2;D=F.height/2;break}return new Effect.Parallel([new Effect.Opacity(C,{sync:true,to:0,from:1,transition:B.opacityTransition}),new Effect.Scale(C,window.opera?1:0,{sync:true,transition:B.scaleTransition,restoreAfterFinish:true}),new Effect.Move(C,{x:E,y:D,sync:true,transition:B.moveTransition})],Object.extend({beforeStartInternal:function(G){G.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(G){G.effects[0].element.hide().undoClipping().undoPositioned().setStyle(A)}},B))};Effect.Pulsate=function(C){C=$(C);var B=arguments[1]||{};var A=C.getInlineOpacity();var E=B.transition||Effect.Transitions.sinoidal;var D=function(F){return E(1-Effect.Transitions.pulse(F,B.pulses))};D.bind(E);return new Effect.Opacity(C,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(F){F.element.setStyle({opacity:A})}},B),{transition:D}))};Effect.Fold=function(B){B=$(B);var A={top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};B.makeClipping();return new Effect.Scale(B,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(C){new Effect.Scale(B,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(D){D.element.hide().undoClipping().setStyle(A)}})}},arguments[1]||{}))};Effect.Morph=Class.create(Effect.Base,{initialize:function(C){this.element=$(C);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({style:{}},arguments[1]||{});if(!Object.isString(A.style)){this.style=$H(A.style)}else{if(A.style.include(":")){this.style=A.style.parseStyle()}else{this.element.addClassName(A.style);this.style=$H(this.element.getStyles());this.element.removeClassName(A.style);var B=this.element.getStyles();this.style=this.style.reject(function(D){return D.value==B[D.key]});A.afterFinishInternal=function(D){D.element.addClassName(D.options.style);D.transforms.each(function(E){D.element.style[E.style]=""})}}}this.start(A)},setup:function(){function A(B){if(!B||["rgba(0, 0, 0, 0)","transparent"].include(B)){B="#ffffff"}B=B.parseColor();return $R(0,2).map(function(C){return parseInt(B.slice(C*2+1,C*2+3),16)})}this.transforms=this.style.map(function(G){var F=G[0],E=G[1],D=null;if(E.parseColor("#zzzzzz")!="#zzzzzz"){E=E.parseColor();D="color"}else{if(F=="opacity"){E=parseFloat(E);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}}else{if(Element.CSS_LENGTH.test(E)){var C=E.match(/^([\+\-]?[0-9\.]+)(.*)$/);E=parseFloat(C[1]);D=(C.length==3)?C[2]:null}}}var B=this.element.getStyle(F);return{style:F.camelize(),originalValue:D=="color"?A(B):parseFloat(B||0),targetValue:D=="color"?A(E):E,unit:D}}.bind(this)).reject(function(B){return((B.originalValue==B.targetValue)||(B.unit!="color"&&(isNaN(B.originalValue)||isNaN(B.targetValue))))})},update:function(A){var D={},B,C=this.transforms.length;while(C--){D[(B=this.transforms[C]).style]=B.unit=="color"?"#"+(Math.round(B.originalValue[0]+(B.targetValue[0]-B.originalValue[0])*A)).toColorPart()+(Math.round(B.originalValue[1]+(B.targetValue[1]-B.originalValue[1])*A)).toColorPart()+(Math.round(B.originalValue[2]+(B.targetValue[2]-B.originalValue[2])*A)).toColorPart():(B.originalValue+(B.targetValue-B.originalValue)*A).toFixed(3)+(B.unit===null?"":B.unit)}this.element.setStyle(D,true)}});Effect.Transform=Class.create({initialize:function(A){this.tracks=[];this.options=arguments[1]||{};this.addTracks(A)},addTracks:function(A){A.each(function(B){B=$H(B);var C=B.values().first();this.tracks.push($H({ids:B.keys().first(),effect:Effect.Morph,options:{style:C}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(A){var D=A.get("ids"),C=A.get("effect"),B=A.get("options");var E=[$(D)||$$(D)].flatten();return E.map(function(F){return new C(F,Object.extend({sync:true},B))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");String.prototype.parseStyle=function(){var B,A=$H();if(Prototype.Browser.WebKit){B=new Element("div",{style:this}).style}else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';B=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(C){if(B[C]){A.set(C,B[C])}});if(Prototype.Browser.IE&&this.include("opacity")){A.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1])}return A};if(document.defaultView&&document.defaultView.getComputedStyle){Element.getStyles=function(B){var A=document.defaultView.getComputedStyle($(B),null);return Element.CSS_PROPERTIES.inject({},function(C,D){C[D]=A[D];return C})}}else{Element.getStyles=function(B){B=$(B);var A=B.currentStyle,C;C=Element.CSS_PROPERTIES.inject({},function(D,E){D[E]=A[E];return D});if(!C.opacity){C.opacity=B.getOpacity()}return C}}Effect.Methods={morph:function(A,B){A=$(A);new Effect.Morph(A,Object.extend({style:B},arguments[2]||{}));return A},visualEffect:function(C,E,B){C=$(C);var D=E.dasherize().camelize(),A=D.charAt(0).toUpperCase()+D.substring(1);new Effect[A](C,B);return C},highlight:function(B,A){B=$(B);new Effect.Highlight(B,A);return B}};$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(A){Effect.Methods[A]=function(C,B){C=$(C);Effect[A.charAt(0).toUpperCase()+A.substring(1)](C,B);return C}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(A){Effect.Methods[A]=Element[A]});Element.addMethods(Effect.Methods);if(Object.isUndefined(Effect)){throw ("dragdrop.js requires including script.aculo.us' effects.js library")}var Droppables={drops:[],remove:function(A){this.drops=this.drops.reject(function(B){return B.element==$(A)})},add:function(B){B=$(B);var A=Object.extend({greedy:true,hoverclass:null,tree:false},arguments[1]||{});if(A.containment){A._containers=[];var C=A.containment;if(Object.isArray(C)){C.each(function(D){A._containers.push($(D))})}else{A._containers.push($(C))}}if(A.accept){A.accept=[A.accept].flatten()}Element.makePositioned(B);A.element=B;this.drops.push(A)},findDeepestChild:function(A){deepest=A[0];for(i=1;i<A.length;++i){if(Element.isParent(A[i].element,deepest.element)){deepest=A[i]}}return deepest},isContained:function(B,A){var C;if(A.tree){C=B.treeNode}else{C=B.parentNode}return A._containers.detect(function(D){return C==D})},isAffected:function(A,C,B){return((B.element!=C)&&((!B._containers)||this.isContained(C,B))&&((!B.accept)||(Element.classNames(C).detect(function(D){return B.accept.include(D)})))&&Position.within(B.element,A[0],A[1]))},deactivate:function(A){if(A.hoverclass){Element.removeClassName(A.element,A.hoverclass)}this.last_active=null},activate:function(A){if(A.hoverclass){Element.addClassName(A.element,A.hoverclass)}this.last_active=A},show:function(A,C){if(!this.drops.length){return }var B,D=[];this.drops.each(function(E){if(Droppables.isAffected(A,C,E)){D.push(E)}});if(D.length>0){B=Droppables.findDeepestChild(D)}if(this.last_active&&this.last_active!=B){this.deactivate(this.last_active)}if(B){Position.within(B.element,A[0],A[1]);if(B.onHover){B.onHover(C,B.element,Position.overlap(B.overlap,B.element))}if(B!=this.last_active){Droppables.activate(B)}}},fire:function(B,A){if(!this.last_active){return }Position.prepare();if(this.isAffected([Event.pointerX(B),Event.pointerY(B)],A,this.last_active)){if(this.last_active.onDrop){this.last_active.onDrop(A,this.last_active.element,B);return true}}},reset:function(){if(this.last_active){this.deactivate(this.last_active)}}};var Draggables={drags:[],observers:[],register:function(A){if(this.drags.length==0){this.eventMouseUp=this.endDrag.bindAsEventListener(this);this.eventMouseMove=this.updateDrag.bindAsEventListener(this);this.eventKeypress=this.keyPress.bindAsEventListener(this);Event.observe(document,"mouseup",this.eventMouseUp);Event.observe(document,"mousemove",this.eventMouseMove);Event.observe(document,"keypress",this.eventKeypress)}this.drags.push(A)},unregister:function(A){this.drags=this.drags.reject(function(B){return B==A});if(this.drags.length==0){Event.stopObserving(document,"mouseup",this.eventMouseUp);Event.stopObserving(document,"mousemove",this.eventMouseMove);Event.stopObserving(document,"keypress",this.eventKeypress)}},activate:function(A){if(A.options.delay){this._timeout=setTimeout(function(){Draggables._timeout=null;window.focus();Draggables.activeDraggable=A}.bind(this),A.options.delay)}else{window.focus();this.activeDraggable=A}},deactivate:function(){this.activeDraggable=null},updateDrag:function(A){if(!this.activeDraggable){return }var B=[Event.pointerX(A),Event.pointerY(A)];if(this._lastPointer&&(this._lastPointer.inspect()==B.inspect())){return }this._lastPointer=B;this.activeDraggable.updateDrag(A,B)},endDrag:function(A){if(this._timeout){clearTimeout(this._timeout);this._timeout=null}if(!this.activeDraggable){return }this._lastPointer=null;this.activeDraggable.endDrag(A);this.activeDraggable=null},keyPress:function(A){if(this.activeDraggable){this.activeDraggable.keyPress(A)}},addObserver:function(A){this.observers.push(A);this._cacheObserverCallbacks()},removeObserver:function(A){this.observers=this.observers.reject(function(B){return B.element==A});this._cacheObserverCallbacks()},notify:function(B,A,C){if(this[B+"Count"]>0){this.observers.each(function(D){if(D[B]){D[B](B,A,C)}})}if(A.options[B]){A.options[B](A,C)}},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(A){Draggables[A+"Count"]=Draggables.observers.select(function(B){return B[A]}).length})}};var Draggable=Class.create({initialize:function(B){var C={handle:false,reverteffect:function(F,E,D){var G=Math.sqrt(Math.abs(E^2)+Math.abs(D^2))*0.02;new Effect.Move(F,{x:-D,y:-E,duration:G,queue:{scope:"_draggable",position:"end"}})},endeffect:function(E){var D=Object.isNumber(E._opacity)?E._opacity:1;new Effect.Opacity(E,{duration:0.2,from:0.7,to:D,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[E]=false}})},zindex:1000,revert:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,snap:false,delay:0};if(!arguments[1]||Object.isUndefined(arguments[1].endeffect)){Object.extend(C,{starteffect:function(D){D._opacity=Element.getOpacity(D);Draggable._dragging[D]=true;new Effect.Opacity(D,{duration:0.2,from:D._opacity,to:0.7})}})}var A=Object.extend(C,arguments[1]||{});this.element=$(B);if(A.handle&&Object.isString(A.handle)){this.handle=this.element.down("."+A.handle,0)}if(!this.handle){this.handle=$(A.handle)}if(!this.handle){this.handle=this.element}if(A.scroll&&!A.scroll.scrollTo&&!A.scroll.outerHTML){A.scroll=$(A.scroll);this._isScrollChild=Element.childOf(this.element,A.scroll)}Element.makePositioned(this.element);this.options=A;this.dragging=false;this.eventMouseDown=this.initDrag.bindAsEventListener(this);Event.observe(this.handle,"mousedown",this.eventMouseDown);Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown);Draggables.unregister(this)},currentDelta:function(){return([parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")])},initDrag:function(A){if(!Object.isUndefined(Draggable._dragging[this.element])&&Draggable._dragging[this.element]){return }if(Event.isLeftClick(A)){var C=Event.element(A);if((tag_name=C.tagName.toUpperCase())&&(tag_name=="INPUT"||tag_name=="SELECT"||tag_name=="OPTION"||tag_name=="BUTTON"||tag_name=="TEXTAREA")){return }var B=[Event.pointerX(A),Event.pointerY(A)];var D=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(E){return(B[E]-D[E])});Draggables.activate(this);Event.stop(A)}},startDrag:function(B){this.dragging=true;if(!this.delta){this.delta=this.currentDelta()}if(this.options.zindex){this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0);this.element.style.zIndex=this.options.zindex}if(this.options.ghosting){this._clone=this.element.cloneNode(true);this.element._originallyAbsolute=(this.element.getStyle("position")=="absolute");if(!this.element._originallyAbsolute){Position.absolutize(this.element)}this.element.parentNode.insertBefore(this._clone,this.element)}if(this.options.scroll){if(this.options.scroll==window){var A=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=A.left;this.originalScrollTop=A.top}else{this.originalScrollLeft=this.options.scroll.scrollLeft;this.originalScrollTop=this.options.scroll.scrollTop}}Draggables.notify("onStart",this,B);if(this.options.starteffect){this.options.starteffect(this.element)}},updateDrag:function(event,pointer){if(!this.dragging){this.startDrag(event)}if(!this.options.quiet){Position.prepare();Droppables.show(pointer,this.element)}Draggables.notify("onDrag",this,event);this.draw(pointer);if(this.options.change){this.options.change(this)}if(this.options.scroll){this.stopScrolling();var p;if(this.options.scroll==window){with(this._getWindowScroll(this.options.scroll)){p=[left,top,left+width,top+height]}}else{p=Position.page(this.options.scroll);p[0]+=this.options.scroll.scrollLeft+Position.deltaX;p[1]+=this.options.scroll.scrollTop+Position.deltaY;p.push(p[0]+this.options.scroll.offsetWidth);p.push(p[1]+this.options.scroll.offsetHeight)}var speed=[0,0];if(pointer[0]<(p[0]+this.options.scrollSensitivity)){speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)}if(pointer[1]<(p[1]+this.options.scrollSensitivity)){speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)}if(pointer[0]>(p[2]-this.options.scrollSensitivity)){speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)}if(pointer[1]>(p[3]-this.options.scrollSensitivity)){speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)}this.startScrolling(speed)}if(Prototype.Browser.WebKit){window.scrollBy(0,0)}Event.stop(event)},finishDrag:function(B,E){this.dragging=false;if(this.options.quiet){Position.prepare();var D=[Event.pointerX(B),Event.pointerY(B)];Droppables.show(D,this.element)}if(this.options.ghosting){if(!this.element._originallyAbsolute){Position.relativize(this.element)}delete this.element._originallyAbsolute;Element.remove(this._clone);this._clone=null}var F=false;if(E){F=Droppables.fire(B,this.element);if(!F){F=false}}if(F&&this.options.onDropped){this.options.onDropped(this.element)}Draggables.notify("onEnd",this,B);var A=this.options.revert;if(A&&Object.isFunction(A)){A=A(this.element)}var C=this.currentDelta();if(A&&this.options.reverteffect){if(F==0||A!="failure"){this.options.reverteffect(this.element,C[1]-this.delta[1],C[0]-this.delta[0])}}else{this.delta=C}if(this.options.zindex){this.element.style.zIndex=this.originalZ}if(this.options.endeffect){this.options.endeffect(this.element)}Draggables.deactivate(this);Droppables.reset()},keyPress:function(A){if(A.keyCode!=Event.KEY_ESC){return }this.finishDrag(A,false);Event.stop(A)},endDrag:function(A){if(!this.dragging){return }this.stopScrolling();this.finishDrag(A,true);Event.stop(A)},draw:function(A){var F=Position.cumulativeOffset(this.element);if(this.options.ghosting){var C=Position.realOffset(this.element);F[0]+=C[0]-Position.deltaX;F[1]+=C[1]-Position.deltaY}var E=this.currentDelta();F[0]-=E[0];F[1]-=E[1];if(this.options.scroll&&(this.options.scroll!=window&&this._isScrollChild)){F[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft;F[1]-=this.options.scroll.scrollTop-this.originalScrollTop}var D=[0,1].map(function(G){return(A[G]-F[G]-this.offset[G])}.bind(this));if(this.options.snap){if(Object.isFunction(this.options.snap)){D=this.options.snap(D[0],D[1],this)}else{if(Object.isArray(this.options.snap)){D=D.map(function(G,H){return(G/this.options.snap[H]).round()*this.options.snap[H]}.bind(this))}else{D=D.map(function(G){return(G/this.options.snap).round()*this.options.snap}.bind(this))}}}var B=this.element.style;if((!this.options.constraint)||(this.options.constraint=="horizontal")){B.left=D[0]+"px"}if((!this.options.constraint)||(this.options.constraint=="vertical")){B.top=D[1]+"px"}if(B.visibility=="hidden"){B.visibility=""}},stopScrolling:function(){if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=null;Draggables._lastScrollPointer=null}},startScrolling:function(A){if(!(A[0]||A[1])){return }this.scrollSpeed=[A[0]*this.options.scrollSpeed,A[1]*this.options.scrollSpeed];this.lastScrolled=new Date();this.scrollInterval=setInterval(this.scroll.bind(this),10)},scroll:function(){var current=new Date();var delta=current-this.lastScrolled;this.lastScrolled=current;if(this.options.scroll==window){with(this._getWindowScroll(this.options.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1000;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}}else{this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1000;this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1000}Position.prepare();Droppables.show(Draggables._lastPointer,this.element);Draggables.notify("onDrag",this);if(this._isScrollChild){Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer);Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1000;Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1000;if(Draggables._lastScrollPointer[0]<0){Draggables._lastScrollPointer[0]=0}if(Draggables._lastScrollPointer[1]<0){Draggables._lastScrollPointer[1]=0}this.draw(Draggables._lastScrollPointer)}if(this.options.change){this.options.change(this)}},_getWindowScroll:function(w){var T,L,W,H;with(w.document){if(w.document.documentElement&&documentElement.scrollTop){T=documentElement.scrollTop;L=documentElement.scrollLeft}else{if(w.document.body){T=body.scrollTop;L=body.scrollLeft}}if(w.innerWidth){W=w.innerWidth;H=w.innerHeight}else{if(w.document.documentElement&&documentElement.clientWidth){W=documentElement.clientWidth;H=documentElement.clientHeight}else{W=body.offsetWidth;H=body.offsetHeight}}}return{top:T,left:L,width:W,height:H}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(B,A){this.element=$(B);this.observer=A;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();if(this.lastValue!=Sortable.serialize(this.element)){this.observer(this.element)}}});var Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(A){while(A.tagName.toUpperCase()!="BODY"){if(A.id&&Sortable.sortables[A.id]){return A}A=A.parentNode}},options:function(A){A=Sortable._findRootElement($(A));if(!A){return }return Sortable.sortables[A.id]},destroy:function(A){var B=Sortable.options(A);if(B){Draggables.removeObserver(B.element);B.droppables.each(function(C){Droppables.remove(C)});B.draggables.invoke("destroy");delete Sortable.sortables[B.element.id]}},create:function(C){C=$(C);var B=Object.extend({element:C,tag:"li",dropOnEmpty:false,tree:false,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:C,handle:false,only:false,delay:0,hoverclass:null,ghosting:false,quiet:false,scroll:false,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:false,handles:false,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},arguments[1]||{});this.destroy(C);var A={revert:true,quiet:B.quiet,scroll:B.scroll,scrollSpeed:B.scrollSpeed,scrollSensitivity:B.scrollSensitivity,delay:B.delay,ghosting:B.ghosting,constraint:B.constraint,handle:B.handle};if(B.starteffect){A.starteffect=B.starteffect}if(B.reverteffect){A.reverteffect=B.reverteffect}else{if(B.ghosting){A.reverteffect=function(F){F.style.top=0;F.style.left=0}}}if(B.endeffect){A.endeffect=B.endeffect}if(B.zindex){A.zindex=B.zindex}var D={overlap:B.overlap,containment:B.containment,tree:B.tree,hoverclass:B.hoverclass,onHover:Sortable.onHover};var E={onHover:Sortable.onEmptyHover,overlap:B.overlap,containment:B.containment,hoverclass:B.hoverclass};Element.cleanWhitespace(C);B.draggables=[];B.droppables=[];if(B.dropOnEmpty||B.tree){Droppables.add(C,E);B.droppables.push(C)}(B.elements||this.findElements(C,B)||[]).each(function(H,F){var G=B.handles?$(B.handles[F]):(B.handle?$(H).select("."+B.handle)[0]:H);B.draggables.push(new Draggable(H,Object.extend(A,{handle:G})));Droppables.add(H,D);if(B.tree){H.treeNode=C}B.droppables.push(H)});if(B.tree){(Sortable.findTreeElements(C,B)||[]).each(function(F){Droppables.add(F,E);F.treeNode=C;B.droppables.push(F)})}this.sortables[C.id]=B;Draggables.addObserver(new SortableObserver(C,B.onUpdate))},findElements:function(B,A){return Element.findChildren(B,A.only,A.tree?true:false,A.tag)},findTreeElements:function(B,A){return Element.findChildren(B,A.only,A.tree?true:false,A.treeTag)},onHover:function(E,D,A){if(Element.isParent(D,E)){return }if(A>0.33&&A<0.66&&Sortable.options(D).tree){return }else{if(A>0.5){Sortable.mark(D,"before");if(D.previousSibling!=E){var B=E.parentNode;E.style.visibility="hidden";D.parentNode.insertBefore(E,D);if(D.parentNode!=B){Sortable.options(B).onChange(E)}Sortable.options(D.parentNode).onChange(E)}}else{Sortable.mark(D,"after");var C=D.nextSibling||null;if(C!=E){var B=E.parentNode;E.style.visibility="hidden";D.parentNode.insertBefore(E,C);if(D.parentNode!=B){Sortable.options(B).onChange(E)}Sortable.options(D.parentNode).onChange(E)}}}},onEmptyHover:function(E,G,H){var I=E.parentNode;var A=Sortable.options(G);if(!Element.isParent(G,E)){var F;var C=Sortable.findElements(G,{tag:A.tag,only:A.only});var B=null;if(C){var D=Element.offsetSize(G,A.overlap)*(1-H);for(F=0;F<C.length;F+=1){if(D-Element.offsetSize(C[F],A.overlap)>=0){D-=Element.offsetSize(C[F],A.overlap)}else{if(D-(Element.offsetSize(C[F],A.overlap)/2)>=0){B=F+1<C.length?C[F+1]:null;break}else{B=C[F];break}}}}G.insertBefore(E,B);Sortable.options(I).onChange(E);A.onChange(E)}},unmark:function(){if(Sortable._marker){Sortable._marker.hide()}},mark:function(B,A){var D=Sortable.options(B.parentNode);if(D&&!D.ghosting){return }if(!Sortable._marker){Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"});document.getElementsByTagName("body").item(0).appendChild(Sortable._marker)}var C=Position.cumulativeOffset(B);Sortable._marker.setStyle({left:C[0]+"px",top:C[1]+"px"});if(A=="after"){if(D.overlap=="horizontal"){Sortable._marker.setStyle({left:(C[0]+B.clientWidth)+"px"})}else{Sortable._marker.setStyle({top:(C[1]+B.clientHeight)+"px"})}}Sortable._marker.show()},_tree:function(E,B,F){var D=Sortable.findElements(E,B)||[];for(var C=0;C<D.length;++C){var A=D[C].id.match(B.format);if(!A){continue}var G={id:encodeURIComponent(A?A[1]:null),element:E,parent:F,children:[],position:F.children.length,container:$(D[C]).down(B.treeTag)};if(G.container){this._tree(G.container,B,G)}F.children.push(G)}return F},tree:function(D){D=$(D);var C=this.options(D);var B=Object.extend({tag:C.tag,treeTag:C.treeTag,only:C.only,name:D.id,format:C.format},arguments[1]||{});var A={id:null,parent:null,children:[],container:D,position:0};return Sortable._tree(D,B,A)},_constructIndex:function(B){var A="";do{if(B.id){A="["+B.position+"]"+A}}while((B=B.parent)!=null);return A},sequence:function(B){B=$(B);var A=Object.extend(this.options(B),arguments[1]||{});return $(this.findElements(B,A)||[]).map(function(C){return C.id.match(A.format)?C.id.match(A.format)[1]:""})},setSequence:function(B,C){B=$(B);var A=Object.extend(this.options(B),arguments[2]||{});var D={};this.findElements(B,A).each(function(E){if(E.id.match(A.format)){D[E.id.match(A.format)[1]]=[E,E.parentNode]}E.parentNode.removeChild(E)});C.each(function(E){var F=D[E];if(F){F[1].appendChild(F[0]);delete D[E]}})},serialize:function(C){C=$(C);var B=Object.extend(Sortable.options(C),arguments[1]||{});var A=encodeURIComponent((arguments[1]&&arguments[1].name)?arguments[1].name:C.id);if(B.tree){return Sortable.tree(C,arguments[1]).children.map(function(D){return[A+Sortable._constructIndex(D)+"[id]="+encodeURIComponent(D.id)].concat(D.children.map(arguments.callee))}).flatten().join("&")}else{return Sortable.sequence(C,arguments[1]).map(function(D){return A+"[]="+encodeURIComponent(D)}).join("&")}}};Element.isParent=function(B,A){if(!B.parentNode||B==A){return false}if(B.parentNode==A){return true}return Element.isParent(B.parentNode,A)};Element.findChildren=function(D,B,A,C){if(!D.hasChildNodes()){return null}C=C.toUpperCase();if(B){B=[B].flatten()}var E=[];$A(D.childNodes).each(function(G){if(G.tagName&&G.tagName.toUpperCase()==C&&(!B||(Element.classNames(G).detect(function(H){return B.include(H)})))){E.push(G)}if(A){var F=Element.findChildren(G,B,A,C);if(F){E.push(F)}}});return(E.length>0?E.flatten():[])};Element.offsetSize=function(A,B){return A["offset"+((B=="vertical"||B=="height")?"Height":"Width")]};var Resizeable=Class.create();Resizeable.prototype={initialize:function(B){var A=Object.extend({top:6,bottom:6,left:6,right:6,minHeight:0,minWidth:0,zindex:1000,resize:null},arguments[1]||{});this.element=$(B);this.handle=this.element;Element.makePositioned(this.element);this.options=A;this.active=false;this.resizing=false;this.currentDirection="";this.eventMouseDown=this.startResize.bindAsEventListener(this);this.eventMouseUp=this.endResize.bindAsEventListener(this);this.eventMouseMove=this.update.bindAsEventListener(this);this.eventCursorCheck=this.cursor.bindAsEventListener(this);this.eventKeypress=this.keyPress.bindAsEventListener(this);this.registerEvents()},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown);this.unregisterEvents()},registerEvents:function(){Event.observe(document,"mouseup",this.eventMouseUp);Event.observe(document,"mousemove",this.eventMouseMove);Event.observe(document,"keypress",this.eventKeypress);Event.observe(this.handle,"mousedown",this.eventMouseDown);Event.observe(this.element,"mousemove",this.eventCursorCheck)},unregisterEvents:function(){},startResize:function(C){if(Event.isLeftClick(C)){var D=Event.element(C);if(D.tagName&&(D.tagName=="INPUT"||D.tagName=="SELECT"||D.tagName=="BUTTON"||D.tagName=="TEXTAREA")){return }var A=this.directions(C);if(A.length>0){this.active=true;var B=Position.cumulativeOffset(this.element);this.startTop=B[1];this.startLeft=B[0];this.startWidth=parseInt(Element.getStyle(this.element,"width"));this.startHeight=parseInt(Element.getStyle(this.element,"height"));this.startX=C.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;this.startY=C.clientY+document.body.scrollTop+document.documentElement.scrollTop;this.currentDirection=A;Event.stop(C)}}},finishResize:function(A,B){this.active=false;this.resizing=false;if(this.options.zindex){this.element.style.zIndex=this.originalZ}if(this.options.resize){this.options.resize(this.element)}},keyPress:function(A){if(this.active){if(A.keyCode==Event.KEY_ESC){this.finishResize(A,false);Event.stop(A)}}},endResize:function(A){if(this.active&&this.resizing){this.finishResize(A,true);Event.stop(A)}this.active=false;this.resizing=false},draw:function(E){var G=[Event.pointerX(E),Event.pointerY(E)];var C=this.element.style;if(this.currentDirection.indexOf("n")!=-1){var B=this.startY-G[1];var F=Element.getStyle(this.element,"margin-top")||"0";var A=this.startHeight+B;if(A>this.options.minHeight){C.height=A+"px";C.top=(this.startTop-B-parseInt(F))+"px"}}if(this.currentDirection.indexOf("w")!=-1){var B=this.startX-G[0];var F=Element.getStyle(this.element,"margin-left")||"0";var D=this.startWidth+B;if(D>this.options.minWidth){C.left=(this.startLeft-B-parseInt(F))+"px";C.width=D+"px"}}if(this.currentDirection.indexOf("s")!=-1){var A=this.startHeight+G[1]-this.startY;if(A>this.options.minHeight){C.height=A+"px"}}if(this.currentDirection.indexOf("e")!=-1){var D=this.startWidth+G[0]-this.startX;if(D>this.options.minWidth){C.width=D+"px"}}if(C.visibility=="hidden"){C.visibility=""}},between:function(C,A,B){return(C>=A&&C<B)},directions:function(B){var D=[Event.pointerX(B),Event.pointerY(B)];var A=Position.cumulativeOffset(this.element);var C="";if(this.between(D[1]-A[1],0,this.options.top)){C+="n"}if(this.between((A[1]+this.element.offsetHeight)-D[1],0,this.options.bottom)){C+="s"}if(this.between(D[0]-A[0],0,this.options.left)){C+="w"}if(this.between((A[0]+this.element.offsetWidth)-D[0],0,this.options.right)){C+="e"}return C},cursor:function(A){var B=this.directions(A);if(B.length>0){B+="-resize"}else{B=""}this.element.style.cursor=B},update:function(B){if(this.active){if(!this.resizing){var A=this.element.style;this.resizing=true;if(Element.getStyle(this.element,"position")==""){A.position="relative"}if(this.options.zindex){this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0);A.zIndex=this.options.zindex}}this.draw(B);if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0)}Event.stop(B);return false}}};var Jel={version:1};Jel.Lang={KEY:"en.us",DATE_FORMAT:"m/d/Y",DATE_12_FORMAT:"m/d/Y g:i A"};Jel.Lang.String={};Jel.Lang.Date={DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MONTHS_LCASE:["january","february","march","april","may","june","july","august","september","october","november","december"],MONTHS_SHORT_LCASE:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};Jel.String={repeat:function(D,C){var A="";for(var B=0;B<C;B++){A+=D}return A},wrapToLines:function(H,A){var C=[];var B="";var G=H.split(" ");var E;var F;for(var D=0;D<G.length;D++){F=G[D];E=B+(B.length==""?"":" ")+F;if(E.length>A){C[C.length]=E;B=""}else{B=E}}if(B!=""){C[C.length]=E}return C},right:function(B,A){return B.substring(B.length-A,B.length)},left:function(B,A){return B.substring(0,A)},ltrim:function(A){return A.replace(/^\s+/,"")},rtrim:function(A){return A.replace(/\s+$/,"")},trim:function(A){return Jel.String.ltrim(Jel.String.rtrim(A))},toFloat:function(A){if(isNaN(A)){return 0}else{if(Jel.String.trim(A)==""){return 0}else{return parseFloat(A)}}},toInt:function(A){if(isNaN(A)){return 0}else{if(Jel.String.trim(A)==""){return 0}else{return parseInt(A)}}},extractInt:function(F){var C="";var E=F.match(/[0-9]+/ig);if(E){for(var D=0;D<E.length;D++){var B="";for(var A=0;A<E[D].length;A++){if(!(B.length==0&&E[D][A]=="0")){B+=E[D][A]}}C+=B}}return C==""?0:parseInt(C)},equals:function(C,B,A){if(!A){return C==B}else{return C.toLowerCase()==B.toLowerCase()}},startsWith:function(C,B,A){return Jel.String.equals(Jel.String.left(C,B.length),B,A)},endsWith:function(C,B,A){return Jel.String.equals(Jel.String.right(C,B.length),B,A)},decamelize:function(D,A){var B=D.replace(/([A-Z0-9])/g,(A?A:"-")+"$1").toLowerCase();var C=new RegExp("([0-9])"+(A?A:"-")+"([0-9])","g");while(B.match(C)){B=B.replace(C,"$1$2")}return B},camelize:function(F,B){if(!B){B="-"}var E=F.split(B),A=E.length;if(A==1){return E[0]}var D=F.charAt(0)==B?E[0].charAt(0).toUpperCase()+E[0].substring(1):E[0];for(var C=1;C<A;C++){D+=E[C].charAt(0).toUpperCase()+E[C].substring(1)}return D},titleCase:function(D){var C=D.split(" ");var A=[];for(var B=0;B<C.length;B++){A[A.length]=C[B].substr(0,1).toUpperCase()+C[B].substr(1,C[B].length-1)}return A.join(" ")},normalize:function(B){var A=B;A=A.replace(/\_/g,"-");A=Jel.String.camelize(A);A=Jel.String.decamelize(A);return A},constant:function(A){return Jel.String.normalize(A).toUpperCase().replace(/\-/g,"_")}};Jel.Date={};Jel.Date.DATE_NOW="now";Jel.Date.PARSE_REG_EXP_COMMON={LEADING_1_12:"10|11|12|(?:0[1-9])",NO_LEADING_1_12:"10|11|12|(?:[1-9])",BOTH_0_59:"[0-5][0-9]"};Jel.Date.FORMAT={T_12:"g:i A",T_24:"G:i",T_MILITARY:"Gi",UK:"d/m/Y",US:"m/d/Y",UK_12:"d/m/Y g:i A",US_12:"m/d/Y g:i A",UK_24:"d/m/Y G:i",US_24:"m/d/Y G:i",UK_12_SHORT:"d/m/Y g A",US_12_SHORT:"m/d/Y g A",UK_24_SHORT:"d/m/Y G",US_24_SHORT:"m/d/Y G",UK_12_LONG:"d/m/Y g:i:s A",US_12_LONG:"m/d/Y g:i:s A",UK_24_LONG:"d/m/Y G:i:s",US_24_LONG:"m/d/Y G:i:s",UTC:"Y-m-d G:i:s",UTC_T:"Y-m-dTG:i:s",UTC_Y:"Y",UTC_YM:"Y-m",UTC_YMD:"Y-m-d",UTC_YMDHM:"Y-m-d g:i",UTC_YMDHMS:"Y-m-d g:i:s",SHORT_MONTH:"d M Y",SHORT_MONTH_12:"d M Y g:i A",SHORT_MONTH_24:"d M Y G:i",SHORT_MONTH_PHRASE:"jS M Y",SHORT_MONTH_PHRASE_12:"jS M Y g:i A",SHORT_MONTH_PHRASE_24:"jS M Y G:i"};Jel.Date.HUMAN_FORMAT={T_12:"h:mm AM/PM",T_24:"h:mm (24 hour)",T_MILITARY:"hmm (military time)",UK:"dd/mm/yyyy",US:"mm/dd/yyyy",UK_12:"dd/mm/yyyy h:mm AM/PM",US_12:"mm/dd/yyyy h:mm AM/PM",UK_24:"dd/mm/yyyy hh:mm (24 hour)",US_24:"mm/dd/yyyy hh:mm (24 hour)",UK_12_SHORT:"dd/mm/yyyy h AM/PM",US_12_SHORT:"mm/dd/yyyy h AM/PM",UK_24_SHORT:"dd/mm/yyyy h (24 hour)",US_24_SHORT:"mm/dd/yyyy h (24 hour)",UK_12_LONG:"dd/mm/yyyy h:mm:ss AM/PM",US_12_LONG:"mm/dd/yyyy h:mm:ss AM/PM",UK_24_LONG:"dd/mm/yyyy h:mm:ss (24 hour)",US_24_LONG:"mm/dd/yyyy h:mm:ss (24 hour)",UTC:"yyyy-mm-dd hh:mm:ss (24 hour)",UTC:"yyyy-mm-dd hh:mm:ss (24 hour)",UTC_T:"yyyy-mm-ssThh:mm:ss (24 hour)",UTC_Y:"yyyy",UTC_YM:"yyyy-mm",UTC_YMD:"yyyy-mm-dd",UTC_YMDHM:"yyyy-mm-dd hh:mm (24 hour)",UTC_YMDHMS:"yyyy-mm-dd hh:mm:ss (24 hour)",SHORT_MONTH:"dd mmm yyyy",SHORT_MONTH_12:"dd mmm yyyy hh:mm AM/PM",SHORT_MONTH_24:"dd mmm yyyy hh:mm (24 hour)",SHORT_MONTH_PHRASE:"d(th) mmm yyyy",SHORT_MONTH_PHRASE_12:"d(th) mmm yyyy hh:mm AM/PM",SHORT_MONTH_PHRASE_24:"d(th) mmm yyyy hh:mm (24 hour)"};Jel.Date.PARSE_REG_EXP={d:"30|31|(?:[0-2][0-9])",D:Jel.Lang.Date.DAYS_SHORT.join("|"),j:"30|31|(?:[12]?[0-9])",l:Jel.Lang.Date.DAYS.join("|"),N:"[1-7]",S:"st|nd|rd|th",W:"50|51|52|(?:[1234]?[0-9])",F:Jel.Lang.Date.MONTHS.join("|"),m:Jel.Date.PARSE_REG_EXP_COMMON.LEADING_1_12,M:Jel.Lang.Date.MONTHS_SHORT.join("|"),n:Jel.Date.PARSE_REG_EXP_COMMON.NO_LEADING_1_12,t:"28|29|30|31",Y:"[0-9]{4}",y:"[0-9]{2}",a:"am|pm",A:"AM|PM",B:"[0-9]{1,3}",g:Jel.Date.PARSE_REG_EXP_COMMON.NO_LEADING_1_12,G:"20|21|22|23|(?:[1]?[1-9])",h:Jel.Date.PARSE_REG_EXP_COMMON.LEADING_1_12,H:"20|21|22|23|(?:[01]?[1-9])",i:Jel.Date.PARSE_REG_EXP_COMMON.BOTH_0_59,s:Jel.Date.PARSE_REG_EXP_COMMON.BOTH_0_59};Jel.Date.PARSE_REG_EXP.c=Jel.Date.PARSE_REG_EXP.Y+"-"+Jel.Date.PARSE_REG_EXP.m+"-"+Jel.Date.PARSE_REG_EXP.d+"T"+Jel.Date.PARSE_REG_EXP.H+":"+Jel.Date.PARSE_REG_EXP.i+":"+Jel.Date.PARSE_REG_EXP.s;Jel.Date.parse=function(J,O){var M=new Object();var B=new Date();var L=B.getDate();var Q=B.getMonth();var G=Jel.Date.fullYear(B);var E=0;var H=0;var R=0;var C="AM";var P="";for(var N=0;N<O.length;N++){var K=O.charAt(N);var D="";switch(K){case"d":case"j":D="day";break;case"m":case"F":case"M":case"n":D="month";break;case"y":case"Y":D="year";break;case"g":case"G":case"h":case"H":D="hour";break;case"i":D="minute";break;case"s":D="second";break;case"a":case"A":D="meridiem";break}if(D){M[D]={index:N+1,format:K}}var I=Jel.Date.PARSE_REG_EXP[K];if(I){P=P+"("+I+")"}else{P=P+"("+K+")"}}var A=J.match(new RegExp(P,"i"));if(A){if(M["day"]&&M["month"]&&M["year"]){L=Jel.String.extractInt(A[M["day"].index]);if(M["month"].format=="F"){Q=Jel.Lang.Date.MONTHS_LCASE.indexOf(A[M["month"].index].toLowerCase())}else{if(M["month"].format=="M"){Q=Jel.Lang.Date.MONTHS_SHORT_LCASE.indexOf(A[M["month"].index].toLowerCase())}else{Q=Jel.String.extractInt(A[M["month"].index])-1}}if(M["year"].format=="Y"){G=Jel.String.extractInt(A[M["year"].index])}else{var F=Jel.String.extractInt(A[M["year"].index]);if(F>=69){G=Jel.String.extractInt("19"+Jel.Number.leadingZero(F))}else{G=Jel.String.extractInt("20"+Jel.Number.leadingZero(F))}}if(!Jel.Date.validDayMonthYear(L,Q,G)){return false}}if(M["meridiem"]){C=A[M["meridiem"].index].toUpperCase()}if(M["hour"]){E=Jel.String.extractInt(A[M["hour"].index]);if(M["hour"].format=="g"||M["hour"].format=="h"){if(C=="AM"){if(E==12){E=0}}else{if(E!=12){E=E+12}}}}if(M["minute"]){H=Jel.String.extractInt(A[M["minute"].index])}if(M["second"]){R=Jel.String.extractInt(A[M["second"].index])}return new Date(G,Q,L,E,H,R)}return false};Jel.Date.format=function(B,E){var A="";for(var C=0;C<E.length;C++){var D=E.charAt(C);switch(D){case"d":A+=Jel.Number.leadingZero(B.getDate());break;case"D":A+=Jel.Lang.Date.DAYS_SHORT[B.getDay()];break;case"j":A+=B.getDate();break;case"l":A+=Jel.Lang.Date.DAYS[B.getDay()];break;case"N":var B=B.getDate();A+=(B==0?7:B);break;case"S":A+=Jel.Date.ordinalSuffix(B.getDate());break;case"w":A+=B.getDate();break;case"z":A+=Jel.Date.dayOfYear(B);break;case"F":A+=Jel.Lang.Date.MONTHS[B.getMonth()];break;case"m":A+=Jel.Number.leadingZero(B.getMonth()+1);break;case"M":A+=Jel.Lang.Date.MONTHS_SHORT[B.getMonth()];break;case"n":A+=B.getMonth()+1;break;case"t":A+=Jel.Date.daysInMonth(B.getMonth(),Jel.Date.fullYear(B));break;case"L":A+=Jel.Date.isLeapYear(Jel.Date.fullYear(B))?1:0;break;case"Y":A+=Jel.Date.fullYear(B);break;case"y":A+=Jel.Date.fullYear(B).toString().substr(2,2);break;case"a":A+=Jel.Date.meridiem(B.getHours());break;case"A":A+=Jel.Date.meridiem(B.getHours()).toUpperCase();break;case"B":A+=Jel.Date.internetBeat(B);break;case"g":A+=Jel.Date.twelveHour(B.getHours());break;case"G":A+=B.getHours();break;case"h":A+=Jel.Number.leadingZero(Jel.Date.twelveHour(B.getHours()));break;case"H":A+=Jel.Number.leadingZero(B.getHours());break;case"i":A+=Jel.Number.leadingZero(B.getMinutes());break;case"s":A+=Jel.Number.leadingZero(B.getSeconds());break;case"c":A+=Jel.Date.format(B,"Y-m-dTH:i:s");break;case"r":A+=B.toString();break;default:A+=D}}return A};Jel.Date.convert=function(D,B,A){var C=Jel.Date.parse(D,B);if(C){return Jel.Date.format(C,A)}return false};Jel.Date.now=function(A){if(A){return Jel.Date.format(new Date(),A)}else{return new Date()}};Jel.Date.daysInMonth=function(B,A){switch(B){case 8:case 3:case 5:case 10:return 30;break;case 1:return(Jel.Date.isLeapYear(A)?29:28);break;default:return 31}};Jel.Date.isLeapYear=function(A){return A%4==0};Jel.Date.validDayMonthYear=function(A,C,B){if(isNaN(A)||isNaN(C)||isNaN(B)){throw ("day, month, and year must all be integer values")}return A>0&&A<=Jel.Date.daysInMonth(C,B)};Jel.Date.meridiem=function(A){return A<12?"am":"pm"};Jel.Date.twelveHour=function(A){if(A==0){return 12}else{if(A>12){return A-12}else{return A}}};Jel.Date.ordinalSuffix=function(A){return Jel.Number.ordinalSuffix(A)};Jel.Date.fullYear=function(B){var A=B.getYear();var C=A%100;C+=(C<38)?2000:1900;return C};Jel.Date.dayOfYear=function(B){var E=B.getMonth();var A=B.getDate();var D=0;for(var C=0;C<E;C++){D+=Jel.Date.daysInMonth(C)}return D+A};Jel.Date.internetBeat=function(A){var D=(A.getTimezoneOffset()+60)*60;var B=(A.getHours()*3600)+(A.getMinutes()*60)+A.getSeconds()+D;var C=Math.floor(B/86.4);if(C>1000){C-=1000}if(C<0){C+=1000}return C};Jel.Number={leadingZero:function(B,A){return Jel.String.repeat("0",(A||2)-B.toString().length)+B.toString()},ordinalSuffix:function(A){var B=Math.round(A).toString();var C=Math.round(A)%10;if(Jel.String.right(B,2)){if(Jel.String.right(B,2).length==2&&Jel.String.left(Jel.String.right(B,2),1)=="1"){return"th"}}switch(C){case 1:return"st";break;case 2:return"nd";break;case 3:return"rd";break;default:return"th"}},format:function(D,Q){var A;var F="";var J="";var E;var L=Math.abs(D);var R=Math.floor(L);var O=Q;var M=false;var C=O.match(/\((.*?)\)/,"ig");if(C&&C.length>0){M=true;O=C[1]}var I=O;var K=O.split(".");if(K.length>1){L=L.toFixed(K[1].length);I=K[0]}else{R=Math.round(L)}A=L.toString();if(K.length>1){F="."+A.split(".")[1]}E=Math.abs(R).toString();var H=0;I.toArray().each(function(T){if(T=="#"||T=="0"){H++}});C=I.match(/[^#0,]*?([#0,]+)[^#0,]*?/);if(C.length>1){I=I.replace(C[1],String.stringOfChar("#",E.length-H)+C[1])}var B=I.toArray();var S=E.length-1;for(var P=B.length-1;P>=0;P--){var N=B[P];var G=Math.pow(10,E.length-1-S);if(N=="#"){if(R>=G){J=E.substr(S,1)+J}S=S-1}else{if(N=="0"){if(R>=G){J=E.substr(S,1)+J}else{J="0"+J}S=S-1}else{if(N==","){if(R>=G){J=N+J}}else{J=N+J}}}}if(D<0){if(M){return"("+J+F+")"}else{return"-"+J+F}}return(J+F)}};if(typeof Prototype=="undefined"){var msg='Required javascript library "Prototype" not found';alert(msg);throw msg}if(typeof Effect=="undefined"){var msg='Required javascript library "Scriptaculous" not found';alert(msg);throw msg}if(Object.isUndefined(window["$sl"])){window.$sl=function(){return Selector.findChildElements(document,$A(arguments))}}if(Object.isUndefined(window["$el"])){window.$el=eval('window["$"]')}var Appcelerator={};Appcelerator.Util={};Appcelerator.Browser={};Appcelerator.Compiler={};Appcelerator.Config={};Appcelerator.Core={};Appcelerator.Localization={};Appcelerator.Validator={};Appcelerator.Decorator={};Appcelerator.Module={};Appcelerator.Widget={};Appcelerator.Shortcuts={};Appcelerator.started=new Date;Appcelerator.loadTime=-1;Appcelerator.compileTime=-1;Appcelerator.Version={major:parseInt("2"),minor:parseInt("2"),revision:parseInt("1"),toString:function(){return this.major+"."+this.minor+"."+this.revision}};Appcelerator.LicenseType="Apache License Version 2.0 - see http://license.appcelerator.org";Appcelerator.Copyright="Copyright (c) 2006-2008 by Appcelerator, Inc. All Rights Reserved.";Appcelerator.LicenseMessage="Appcelerator is licensed under "+Appcelerator.LicenseType;Appcelerator.Parameters=$H({});(function(){var B=null;$A(document.getElementsByTagName("script")).findAll(function(R){if(R.src&&R.src.match(/appcelerator(-debug){0,1}\.js(\?.*)?$/)){Appcelerator.jsFileLocation=R.src;return true}return false}).each(function(R){Appcelerator.Parameters=$H(R.src.toQueryParams())});$A(document.getElementsByTagName("base")).each(function(R){if(R.href){B=R.href;throw $break}});if(B){Appcelerator.DocumentPath=B}else{var Q=top.window.document.location.href.lastIndexOf("/");if(Q==top.window.document.location.href.length-1){Appcelerator.DocumentPath=top.window.document.location.href}else{Appcelerator.DocumentPath=top.window.document.location.href.substr(0,Q);if(Appcelerator.DocumentPath.substring(Appcelerator.DocumentPath.length-1)!="/"){Appcelerator.DocumentPath=Appcelerator.DocumentPath+"/"}}}if(Appcelerator.jsFileLocation){if(!B){var C=Appcelerator.jsFileLocation.indexOf(":/");if(C>0){var G=Appcelerator.jsFileLocation.substring(C+3,Appcelerator.jsFileLocation.indexOf("/",C+4));var E=Appcelerator.DocumentPath.indexOf(":/");if(E>0){var A=Appcelerator.DocumentPath.substring(E+3,Appcelerator.DocumentPath.indexOf("/",E+4));if(A==G){Appcelerator.DocumentPath=Appcelerator.jsFileLocation.substring(0,Appcelerator.jsFileLocation.lastIndexOf("/"))+"/../"}}}else{if(Appcelerator.jsFileLocation.startsWith("/")||Appcelerator.jsFileLocation.startsWith(".")){var Q=Appcelerator.jsFileLocation.lastIndexOf("/");if(Q!=-1){Appcelerator.DocumentPath=Appcelerator.jsFileLocation.substring(0,Q+1)+"../"}}}}}else{Appcelerator.ScriptNotFound=true}Appcelerator.ScriptPath=Appcelerator.DocumentPath+"javascripts/";Appcelerator.ImagePath=Appcelerator.DocumentPath+"images/";Appcelerator.StylePath=Appcelerator.DocumentPath+"stylesheets/";Appcelerator.ContentPath=Appcelerator.DocumentPath+"content/";Appcelerator.ModulePath=Appcelerator.DocumentPath+"widgets/";Appcelerator.WidgetPath=Appcelerator.DocumentPath+"widgets/";if(Appcelerator.jsFileLocation.indexOf("code.appcelerator.org")!=-1){var I=(("https:"==document.location.protocol)?"https://s3.amazonaws.com/code.appcelerator.org":"http://code.appcelerator.org");Appcelerator.ModulePath=I+Appcelerator.Version+"/widgets/";Appcelerator.WidgetPath=Appcelerator.ModulePath}Appcelerator.Parameters=Appcelerator.Parameters.merge(window.location.href.toQueryParams());if(Appcelerator.Parameters.get("instanceid")){Appcelerator.instanceid=Appcelerator.Parameters.get("instanceid")}else{Appcelerator.instanceid=Math.round(9999*Math.random())+"-"+Math.round(999*Math.random())}var D=navigator.userAgent.toLowerCase();Appcelerator.Browser.isPreCompiler=(D.indexOf("Appcelerator Compiler")>-1);Appcelerator.Browser.isOpera=(D.indexOf("opera")>-1);Appcelerator.Browser.isSafari=(D.indexOf("safari")>-1);Appcelerator.Browser.isSafari2=false;Appcelerator.Browser.isSafari3=false;Appcelerator.Browser.isIE=!!(window.ActiveXObject);Appcelerator.Browser.isIE6=false;Appcelerator.Browser.isIE7=false;Appcelerator.Browser.isIE8=false;if(Appcelerator.Browser.isIE){var M=navigator.appVersion.split("MSIE");var O=parseFloat(M[1]);Appcelerator.Browser.isIE6=O>=6&&O<7;Appcelerator.Browser.isIE7=O>=7&&O<8;Appcelerator.Browser.isIE8=O>=8&&O<9}if(Appcelerator.Browser.isSafari){var H=RegExp("( applewebkit/)([^ ]+)").exec(D);if(H[2]>400&&H[2]<500){Appcelerator.Browser.isSafari2=true}else{if(H[2]>500&&H[2]<600){Appcelerator.Browser.isSafari3=true}}}Appcelerator.Browser.isGecko=!Appcelerator.Browser.isSafari&&(D.indexOf("gecko")>-1);Appcelerator.Browser.isCamino=Appcelerator.Browser.isGecko&&D.indexOf("camino")>-1;Appcelerator.Browser.isFirefox=Appcelerator.Browser.isGecko&&(D.indexOf("firefox")>-1||Appcelerator.Browser.isCamino||D.indexOf("minefield")>-1||D.indexOf("granparadiso")>-1||D.indexOf("bonecho")>-1);Appcelerator.Browser.isIPhone=Appcelerator.Browser.isSafari&&D.indexOf("iphone")>-1;Appcelerator.Browser.isMozilla=Appcelerator.Browser.isGecko&&D.indexOf("mozilla/")>-1;Appcelerator.Browser.isWebkit=Appcelerator.Browser.isMozilla&&Appcelerator.Browser.isGecko&&D.indexOf("applewebkit")>0;Appcelerator.Browser.isSeamonkey=Appcelerator.Browser.isMozilla&&D.indexOf("seamonkey")>-1;Appcelerator.Browser.isPrism=Appcelerator.Browser.isMozilla&&D.indexOf("prism/")>0;Appcelerator.Browser.isIceweasel=Appcelerator.Browser.isMozilla&&D.indexOf("iceweasel")>0;Appcelerator.Browser.isEpiphany=Appcelerator.Browser.isMozilla&&D.indexOf("epiphany")>0;Appcelerator.Browser.isFluid=(window.fluid!=null);Appcelerator.Browser.isGears=(window.google&&google.gears)!=null;Appcelerator.Browser.isChromium=Appcelerator.Browser.isWebkit&&D.indexOf("chrome/")>0;Appcelerator.Browser.isWindows=false;Appcelerator.Browser.isMac=false;Appcelerator.Browser.isLinux=false;Appcelerator.Browser.isSunOS=false;var F=null;if(D.indexOf("windows")!=-1||D.indexOf("win32")!=-1){Appcelerator.Browser.isWindows=true;F="win32"}else{if(D.indexOf("macintosh")!=-1||D.indexOf("mac os x")!=-1){Appcelerator.Browser.isMac=true;F="mac"}else{if(D.indexOf("linux")!=-1){Appcelerator.Browser.isLinux=true;F="linux"}else{if(D.indexOf("sunos")!=-1){Appcelerator.Browser.isSunOS=true;F="sun"}}}}Appcelerator.Browser.isSilverlight=false;Appcelerator.Browser.silverlightVersion=0;Event.observe(window,"load",function(){var R=null;try{var T=null;if(window.ActiveXObject){T=new ActiveXObject("AgControl.AgControl")}else{if(navigator.plugins["Silverlight Plug-In"]){R=document.createElement("div");document.body.appendChild(R);R.innerHTML='<embed type="application/x-silverlight" src="data:," />';T=R.childNodes[0]}}if(T){if(T.isVersionSupported("2.0")){Appcelerator.Browser.silverlightVersion=2}else{if(T.isVersionSupported("1.0")){Appcelerator.Browser.silverlightVersion=1}}Appcelerator.Browser.isSilverlight=Appcelerator.Browser.silverlightVersion>0}}catch(S){}if(R){document.body.removeChild(R)}});Appcelerator.Browser.isFlash=false;Appcelerator.Browser.flashVersion=0;if(Appcelerator.Browser.isIE){try{var K=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");var L=K.GetVariable("$version");var Q=L.indexOf(" ");var P=L.substring(Q+1).split(",");var O=P[0];Appcelerator.Browser.flashVersion=parseInt(O);Appcelerator.Browser.isFlash=true}catch(N){}}else{var J=navigator.plugins&&navigator.plugins.length;if(J){J=navigator.plugins["Shockwave Flash"]||navigator.plugins["Shockwave Flash 2.0"];if(J){if(J.description){var L=J.description;Appcelerator.Browser.flashVersion=parseInt(L.charAt(L.indexOf(".")-1));Appcelerator.Browser.isFlash=true}else{Appcelerator.Browser.flashVersion=7;Appcelerator.Browser.isFlash=true}}}else{J=(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(J&&J.description){Appcelerator.Browser.isFlash=true;Appcelerator.Browser.flashVersion=parseInt(J.description.substring(J.description.indexOf(".")-1))}}}Appcelerator.Browser.isBrowserSupported=false;$w("Firefox IE6 IE7 IE8 Safari Camino Opera Webkit Seamonkey Prism Iceweasel Epiphany").each(function(R){if(Appcelerator.Browser["is"+R]===true){Appcelerator.Browser.isBrowserSupported=true;Event.observe(window,"load",function(){if(F){Element.addClassName(document.body,F)}Element.addClassName(document.body,R.toLowerCase());if(Appcelerator.Browser.isMozilla){Element.addClassName(document.body,"mozilla")}if(Appcelerator.Browser.isIPhone){Element.addClassName(document.body,"iphone");Element.addClassName(document.body,"webkit");Element.addClassName(document.body,"safari")}if(Appcelerator.Browser.isChromium){Element.addClassName(document.body,"chromium")}if(Appcelerator.Browser.isSafari){Element.addClassName(document.body,"webkit");if(Appcelerator.Browser.isSafari2){Element.addClassName(document.body,"safari2")}else{if(Appcelerator.Browser.isSafari3){Element.addClassName(document.body,"safari3")}}}else{if(Appcelerator.Browser.isGecko){Element.addClassName(document.body,"gecko")}}if(Appcelerator.Browser.isFirefox){if(D.indexOf("firefox/3")>0){Element.addClassName(document.body,"firefox3")}else{if(D.indexOf("firefox/2")>0){Element.addClassName(document.body,"firefox2")}}}else{if(Appcelerator.Browser.isIE){Element.addClassName(document.body,"msie")}}if(Appcelerator.Browser.isIPhone){Element.addClassName(document.body,"width_narrow");Element.addClassName(document.body,"height_short")}else{function S(){var V=Element.classNames(document.body);if(V){V._each(function(W){if(W.startsWith("height_")||W.startsWith("width_")){V.remove(W)}})}var U=document.documentElement.clientWidth||window.screen.width;var T=document.documentElement.clientHeight||window.screen.height;if(T<480){Element.addClassName(document.body,"height_tiny")}else{if(T>=480&&T<=768){Element.addClassName(document.body,"height_small")}else{if(T>768&&T<1100){Element.addClassName(document.body,"height_medium")}else{if(T>=1100){Element.addClassName(document.body,"height_large")}}}}if(U<=640){Element.addClassName(document.body,"width_tiny")}else{if(U>640&&U<=1024){Element.addClassName(document.body,"width_small")}else{if(U>1024&&U<=1280){Element.addClassName(document.body,"width_medium")}else{if(U>1280){Element.addClassName(document.body,"width_large")}}}}}Event.observe(window,"resize",S);S()}});throw $break}});Appcelerator.Browser.unsupportedBrowserMessage="<h1>Browser Upgrade Required</h1><p>We're sorry, but your browser version is not supported by this application.</p><p>This application requires a modern browser, such as <a href='http://www.getfirefox.com'>Firefox 2.0+</a>, <a href='http://www.apple.com/safari/'>Safari 2.0+</a>, <a href='http://www.microsoft.com/windows/products/winfamily/ie/default.mspx'>Internet Explorer 6.0+</a> or <a href='http://www.opera.com'>Opera 9.0+</a>.</p><p>Your browser reported: <font face='courier'>"+D+"</font></p>";Appcelerator.Browser.upgradePath=Appcelerator.DocumentPath+"upgrade.html"})();Appcelerator.Core.usedModules={};Appcelerator.Core.modules=[];Appcelerator.Core.loadedFiles={};Appcelerator.Core.fetching={};Appcelerator.Core.widgets={};Appcelerator.Core.widgets_css={};Appcelerator.Core.widgets_js={};Appcelerator.Core.moduleLoaderCallbacks={};Appcelerator.Core.script_count=0;Appcelerator.Core.scriptWithDependenciesQueue=[];Appcelerator.Core.scriptWithDependenciesCallback;Appcelerator.Core.HeadElement=document.getElementsByTagName("head")[0];Appcelerator.Core.requireCommonCSS=function(C,D,A){var B=Appcelerator.Core.getModuleCommonDirectory()+"/css/";Appcelerator.Core.requireMultiple(function(F,E){Appcelerator.Core.remoteLoadCSS(F,D,A)},B,C)};Appcelerator.Core.requireCommonJS=function(C,D,A){var B=Appcelerator.Core.getModuleCommonDirectory()+"/js/";Appcelerator.Core.requireMultiple(function(F,E){Appcelerator.Core.remoteLoadScript(F,D,A)},B,C)};Appcelerator.Core.requireMultiple=function(D,H,A,B,E){if(Object.isUndefined(A)){if(Object.isFunction(B)){B()}return }if(Object.isArray(A)){A=A.compact();var F=0;var G=function(){F++;if(F==A.length){if(Object.isFunction(B)){B()}}else{Appcelerator.Core.requireMultiple(D,H,A[F],G,E)}};Appcelerator.Core.requireMultiple(D,H,A[F],G,E)}else{var I=H+A;var C=Appcelerator.Core.loadedFiles[I];if(C){if(Object.isFunction(B)){B()}}else{D(I,function(){Appcelerator.Core.loadedFiles[I]=true;if(Object.isFunction(B)){B()}})}}};Appcelerator.Core.remoteLoadScript=function(C,B,A){Appcelerator.Core.remoteLoad("script","text/javascript",C,B,A)};Appcelerator.Core.queueRemoteLoadScriptWithDependencies=function(B,A){Appcelerator.Core.scriptWithDependenciesQueue.push({"path":B,"onload":A});Appcelerator.Core.remoteLoadScriptWithDependencies()};Appcelerator.Core.remoteLoadScriptWithDependencies=function(){if(0<Appcelerator.Core.scriptWithDependenciesQueue.length){var A=Appcelerator.Core.scriptWithDependenciesQueue[0];Appcelerator.Core.remoteLoad("script","text/javascript",A.path,null);Appcelerator.Core.scriptWithDependenciesCallback=function(){A.onload();Appcelerator.Core.scriptWithDependenciesQueue.shift();Appcelerator.Core.remoteLoadScriptWithDependencies()}}};Appcelerator.Core.remoteLoadCSS=function(C,B,A){Appcelerator.Core.remoteLoad("link","text/css",C,B,A)};Appcelerator.Core.remoteLoad=function(I,E,H,B,F){$D("remoteLoad "+I+",type="+E+",path="+H+",onload="+B+",onerror="+F);H=Appcelerator.URI.absolutizeURI(H,Appcelerator.DocumentPath);var D=Appcelerator.Core.fetching[H];if(D){if(B){D.push(B)}return }if(B){Appcelerator.Core.fetching[H]=[B]}var C=document.createElement(I);C.setAttribute("type",E);switch(I){case"script":C.setAttribute("src",H);break;case"link":C.setAttribute("href",H);C.setAttribute("rel","stylesheet");break}var A=null;var G=function(){$D("loaded "+H);if(A){clearTimeout(A)}var J=Appcelerator.Core.fetching[H];if(J){for(var L=0;L<J.length;L++){try{J[L]()}catch(K){}}delete Appcelerator.Core.fetching[H]}};if(I=="script"){if(Appcelerator.Browser.isSafari2){G.delay(1.5)}else{(function(){var J=false;C.onload=G;if(F){if(!J){A=setTimeout(F,3500)}C.onerror=function(){if(A){clearTimeout(A)}F()}}C.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(J){return }J=true;this.onreadystatechange=null;G()}})()}}else{G.defer()}Appcelerator.Core.HeadElement.appendChild(C)};Appcelerator.Core.loadJS=function(D,C,B,A){Appcelerator.Core.remoteLoadScript(D,C,A)};Appcelerator.Core.getModuleCommonDirectory=function(){return Appcelerator.ModulePath+"common"};Appcelerator.Core.loadModuleCommonCSS=function(A,B){Appcelerator.Core.loadModuleCSS(A,B,Appcelerator.Core.getModuleCommonDirectory()+"/css")};Appcelerator.Core.loadModuleCSS=function(B,F,K){B=Appcelerator.Core.getModuleNameFromTag(B);var E=Appcelerator.Core.modules[B];if(E){throw"module already loaded when loadModuleCSS is called. Call loadModuleCSS *before* you call registerModule for "+B+" and css: "+F}var J=K?K+"/"+F:Appcelerator.ModulePath+B+"/css/"+F;var E=Appcelerator.Core.widgets_css[J];if(!E){var I=document.createElement("link");I.setAttribute("type","text/css");I.setAttribute("rel","stylesheet");I.setAttribute("href",J);Appcelerator.Compiler.setElementId(I,"css_"+B);var C=null;for(var H=0;H<Appcelerator.Core.HeadElement.childNodes.length;H++){var D=Appcelerator.Core.HeadElement.childNodes[H];if(D.nodeType==1&&D.nodeName=="LINK"){var A=D.getAttribute("href");var G=D.getAttribute("type");if(A&&G&&G.indexOf("css")>0){C=D;break}}}if(C){Appcelerator.Core.HeadElement.insertBefore(I,C)}else{Appcelerator.Core.HeadElement.appendChild(I)}Appcelerator.Core.widgets_css[J]=B}};Appcelerator.Core.getModuleNameFromTag=function(A){return A.replace(":","_")};Appcelerator.Core.requireModule=function(B,F,A){var B=Appcelerator.Core.getModuleNameFromTag(B);var C=Appcelerator.Core.modules[B];if(C){F();return }var D=Appcelerator.Core.moduleLoaderCallbacks[B];if(!D){D=[];Appcelerator.Core.moduleLoaderCallbacks[B]=D;D.push(F)}else{D.push(F);return }var E=Appcelerator.ModulePath+B+"/"+B+".js";Appcelerator.Core.loadJS(E)};Appcelerator.Core.requireWidget=Appcelerator.Core.requireModule;Appcelerator.Core.registerModule=function(A,B,F){A=Appcelerator.Core.getModuleNameFromTag(A);Appcelerator.Core.modules[A]=B;if(B.isWidget){var D=B.getWidgetName().toLowerCase();if(Appcelerator.Core.widgets[D]){throw"duplicate widget name detected: "+D}Appcelerator.Core.widgets[D]=B}if(B.onUnload){window.observe(window,"unload",B.onUnload)}if(typeof (B.setPath)=="function"){var E=Appcelerator.ModulePath+A+"/";B.setPath(E)}var E=Appcelerator.ModulePath+A+"/"+A+".js";var C=(Appcelerator.Core.fetching[E]||[]).concat(Appcelerator.Core.moduleLoaderCallbacks[A]||[]);if(C){for(var G=0;G<C.length;G++){C[G]()}}delete Appcelerator.Core.moduleLoaderCallbacks[A];delete Appcelerator.Core.fetching[E]};if(Appcelerator.Browser.isIE){Appcelerator.Core.registerModuleWithJSInIE=function(A,C,B,H,F){var D=B[H];A=Appcelerator.Core.getModuleNameFromTag(A);var I=F?F+"/"+D:Appcelerator.ModulePath+A+"/js/"+D;var G=document.createElement("script");G.setAttribute("type","text/javascript");G.setAttribute("src",I);G.onerror=function(J){$E("Error loading "+I+"\n Exception: "+Object.getExceptionDetail(J))};var E=false;G.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(E){return }E=true;this.onreadystatechange=null;H=H+1;if(H==B.length){Appcelerator.Core.registerModule(A,C)}else{Appcelerator.Core.registerModuleWithJSInIE(A,C,B,H,F)}};Appcelerator.Core.HeadElement.appendChild(G)}}Appcelerator.Core.registerWidget=Appcelerator.Core.registerModule;Appcelerator.Core.registerModuleWithCommonJS=function(A,B,C){Appcelerator.Core.registerModuleWithJS(A,B,C,Appcelerator.Core.getModuleCommonDirectory()+"/js")};Appcelerator.Core.registerWidgetWithCommonJS=Appcelerator.Core.registerModuleWithCommonJS;Appcelerator.Core.registerModuleWithJS=function(B,C,G,A){B=Appcelerator.Core.getModuleNameFromTag(B);if(Appcelerator.Browser.isIE){Appcelerator.Core.registerModuleWithJSInIE(B,C,G,0,A);return }var F={count:G.length};var E=function(){F.count--;if(F.count==0){Appcelerator.Core.registerModule(B,C)}};var D=function(K){var J=G[K];var L=!Object.isUndefined(A)?(A+"/"+J):Appcelerator.ModulePath+B+"/js/"+J;var H=document.createElement("script");H.setAttribute("type","text/javascript");H.setAttribute("src",L);H.onerror=function(M){$E("Error loading "+L+"\n Exception: "+Object.getExceptionDetail(M))};if(Appcelerator.Browser.isSafari2){E.delay(2)}else{var I=false;if(!Appcelerator.Browser.isOpera){H.onload=E}H.onreadystatechange=function(){switch(this.readyState){case"loaded":case"complete":break;default:return }if(I){return }I=true;this.onreadystatechange=null;E.defer()}}Appcelerator.Core.HeadElement.appendChild(H);if(K+1<G.length){D.delay(0,K+1)}};D(0)};Appcelerator.Core.registerWidgetWithJS=Appcelerator.Core.registerModuleWithJS;Appcelerator.Core.getLoadedModulesAndAttributes=function(){return $H(Appcelerator.Module).map(function(A){return[A[1].getWidgetName(),A[1].getAttributes().pluck("name")]})};Appcelerator.Core.onloaders=[];Appcelerator.Core.onunloaders=[];Appcelerator.Core.onload=function(A,B){if(B){Appcelerator.Core.onloaders.unshift(A)}else{Appcelerator.Core.onloaders.push(A)}};Appcelerator.Core.onunload=function(A){Appcelerator.Core.onunloaders.push(A)};Appcelerator.Core.onloadInvoker=function(){for(var A=0;A<Appcelerator.Core.onloaders.length;A++){Appcelerator.Core.onloaders[A]()}Appcelerator.Core.onloaders=null;Logger.info("Appcelerator v"+Appcelerator.Version+" ... loaded in "+(new Date().getTime()-Appcelerator.started.getTime())+" ms");Logger.info(Appcelerator.Copyright);Logger.info(Appcelerator.LicenseMessage);Logger.info("More App. Less Code.")};Appcelerator.Core.onunloadInvoker=function(){for(var A=0;A<Appcelerator.Core.onunloaders.length;A++){Appcelerator.Core.onunloaders[A]()}Appcelerator.Core.onunloaders=null};Event.observe(window,"load",Appcelerator.Core.onloadInvoker);Event.observe(window,"unload",Appcelerator.Core.onunloadInvoker);Appcelerator.Core.onload(function(){Appcelerator.TEMPLATE_VARS={rootPath:Appcelerator.DocumentPath,scriptPath:Appcelerator.ScriptPath,imagePath:Appcelerator.ImagePath,cssPath:Appcelerator.StylePath,contentPath:Appcelerator.ContentPath,modulePath:Appcelerator.ModulePath,instanceid:Appcelerator.instanceid,version:Appcelerator.Version,codeServer:"http://code.appcelerator.org/"};if(Appcelerator.Browser.autocheckBrowserSupport&&!Appcelerator.Browser.isBrowserSupported){document.body.style.display="none";try{new Ajax.Request(Appcelerator.Browser.upgradePath,{asynchronous:true,method:"get",onFailure:function(B){document.open();document.write("<html><head><meta http-equiv='pragma' content='no-cache'></head><body>"+Appcelerator.Browser.unsupportedBrowserMessage+"</body></html>");document.close();document.body.style.display=""},onSuccess:function(B){document.open();document.write(B.responseText);document.close();document.body.style.display=""}})}catch(A){document.open();document.write("<html><head><meta http-equiv='pragma' content='no-cache'></head><body>"+Appcelerator.Browser.unsupportedBrowserMessage+"</body></html>");document.close();document.body.style.display=""}}Appcelerator.Core.old_document_write=document.write;document.write=function(D){var C=/src=('([^']*)'|"([^"]*)")/gm;C.lastIndex=0;var B=C.exec(D);if(B){B=B[2]||B[3];if(B=="//:"){Appcelerator.Core.old_document_write(D)}else{Appcelerator.Core.script_count++;Appcelerator.Core.remoteLoadScript(B,function(){Appcelerator.Core.script_count--;if(0==Appcelerator.Core.script_count){Appcelerator.Core.scriptWithDependenciesCallback()}})}}}});var APPCELERATOR_DEBUG_LEVEL=Appcelerator.Parameters.get("debug");var APPCELERATOR_DEBUG=window.location.href.indexOf("debug=1")>0||APPCELERATOR_DEBUG_LEVEL=="1";var log4javascript_threshold=Appcelerator.Parameters.get("log4javascript");var Logger=Class.create();$$l=Logger;var _logAppender=null;var _logEnabled=true;Logger.toLevel=function(B,A){if(!B){return log4javascript.Level.INFO}B=B.toUpperCase();if(B==log4javascript.Level.INFO.toString()){return log4javascript.Level.INFO}else{if(B==log4javascript.Level.WARN.toString()){return log4javascript.Level.WARN}else{if(B==log4javascript.Level.ERROR.toString()){return log4javascript.Level.ERROR}else{if(B==log4javascript.Level.FATAL.toString()){return log4javascript.Level.FATAL}else{if(B==log4javascript.Level.TRACE.toString()){return log4javascript.Level.TRACE}else{if(B==log4javascript.Level.DEBUG.toString()){return log4javascript.Level.DEBUG}}}}}}return A.getLevel()};if(log4javascript_threshold&&log4javascript_threshold!=""){_log=log4javascript.getDefaultLogger();var Level=Logger.toLevel(log4javascript_threshold,_log);Logger.infoEnabled=log4javascript.Level.INFO.isGreaterOrEqual(Level);Logger.warnEnabled=log4javascript.Level.WARN.isGreaterOrEqual(Level);Logger.errorEnabled=log4javascript.Level.ERROR.isGreaterOrEqual(Level);Logger.fatalEnabled=log4javascript.Level.FATAL.isGreaterOrEqual(Level);Logger.traceEnabled=log4javascript.Level.TRACE.isGreaterOrEqual(Level);Logger.debugEnabled=log4javascript.Level.DEBUG.isGreaterOrEqual(Level)}else{_logAppender=true;_logEnabled=_logEnabled&&typeof (console)!="undefined";_log={console:function(A,C){try{if(console&&console[A]){console[A](C)}}catch(B){}},debug:function(A){if(APPCELERATOR_DEBUG){this.console("debug",A)}},info:function(A){this.console("info",A)},error:function(A){this.console("error",A)},warn:function(A){this.console("warn",A)},trace:function(A){if(APPCELERATOR_DEBUG){this.console("debug",A)}},fatal:function(A){this.console("error",A)}};Logger.infoEnabled=_logEnabled&&console.info;Logger.warnEnabled=_logEnabled&&console.warn;Logger.errorEnabled=_logEnabled&&console.error;Logger.fatalEnabled=_logEnabled&&console.error;Logger.traceEnabled=_logEnabled&&APPCELERATOR_DEBUG&&console.debug;Logger.debugEnabled=_logEnabled&&APPCELERATOR_DEBUG&&console.debug}Logger.info=function(A){if(Logger.infoEnabled){_log.info(A)}};Logger.warn=function(A){if(Logger.warnEnabled){_log.warn(A)}};Logger.debug=function(A){if(Logger.debugEnabled){_log.debug(A)}};Logger.error=function(A){if(Logger.errorEnabled){_log.error(A)}};Logger.trace=function(A){if(Logger.traceEnabled){_log.trace(A)}};Logger.fatal=function(A){if(Logger.fatalEnabled){_log.fatal(A)}};function $D(){if(Logger.debugEnabled){Logger.debug(Logger.buildMessage(arguments))}}function $E(){if(Logger.errorEnabled){Logger.error(Logger.buildMessage(arguments))}}Logger.buildMessage=function(B){B=$A(B);for(var C=0;C<B.length;C++){var A=B[C];if(A){if(B[C].constructor==Object){B[C]=Object.toJSON(B[C])}else{B[C]=B[C].toString()}}}return B.join("")};if(typeof err=="undefined"){var err={println:function(A){$E(A)}}}if(typeof out=="undefined"){var out={println:function(A){$D(A)}}}Object.extend(String.prototype,{trim:function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},startsWith:function(A){if(A.length<=this.length){return this.substring(0,A.length)==A}return false},toFunction:function(dontPreProcess){var str=this.trim();if(str.length==0){return Prototype.emptyFunction}if(!dontPreProcess){if(str.match(/^function\(/)){str="return "+String.unescapeXML(this)+"()"}else{if(!str.match(/return/)){str="return "+String.unescapeXML(this)}else{if(str.match(/^return function/)){str=String.unescapeXML(this)+" ();"}}}}var code="var f = function(){ var args = $A(arguments); "+str+"}; f;";var func=eval(code);if(typeof (func)=="function"){return func}throw Error("code was not a function: "+this)},toFunctionString:function(B){var C=this.trim();var A="var functionString_"+B+" = function(){ var args = $A(arguments); "+C+"}; functionString_"+B+"();";return A}});String.escapeXML=function(A){if(!A){return null}return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};String.unescapeXML=function(A){if(!A){return null}return A.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";String.prototype.encode64=function(){var D=this;var B="";var K,I,G;var J,H,F,E;var C=0;do{K=D.charCodeAt(C++);I=D.charCodeAt(C++);G=D.charCodeAt(C++);J=K>>2;H=((K&3)<<4)|(I>>4);F=((I&15)<<2)|(G>>6);E=G&63;if(isNaN(I)){F=E=64}else{if(isNaN(G)){E=64}}B=B+A.charAt(J)+A.charAt(H)+A.charAt(F)+A.charAt(E)}while(C<D.length);return B};String.prototype.decode64=function(){var B="";var K,I,G;var J,H,F,E;var C=0;var D=this;D=D.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{J=A.indexOf(D.charAt(C++));H=A.indexOf(D.charAt(C++));F=A.indexOf(D.charAt(C++));E=A.indexOf(D.charAt(C++));K=(J<<2)|(H>>4);I=((H&15)<<4)|(F>>2);G=((F&3)<<6)|E;B=B+String.fromCharCode(K);if(F!=64){B=B+String.fromCharCode(I)}if(E!=64){B=B+String.fromCharCode(G)}}while(C<D.length);return B}})();String.stringValue=function(A){if(A){return'"'+A.replace(/"/g,'\\"')+'"'}else{return null}};Object.setNestedProperty=function(E,G,D){var A=G.split(".");var F=E;var C=null;var B=null;A.each(function(H){B=H;if(F[H]){C=F;F=F[H]}else{C=F;F=F[H]={}}});C[B]=D;return E};Object.getNestedProperty=function(C,E,B){if(C!=null&&E!=null){var A=E.split(".");if(A.length!=-1){var D=C;A.each(function(F){if(null!=D[F]){D=D[F]}else{D=null;throw $break}});return D==null?B:D}else{return C[E]==null?B:C[E]}}return B};Object.copy=function(E,B){if(B){for(var D in B){var C=B[D];var A=typeof (C);switch(A){case"string":case"number":case"boolean":case"object":case"array":E[D]=C;break}}}return E};Object.evalWithinScope=function(code,scope){if(code=="{}"){return{}}var expr=code.gsub('"','\\"');var func=eval('var f = function(){return eval("('+expr+')")}; f;');return func.call(scope)};Object.getExceptionDetail=function(D,C){if(!D){return"No Exception Object"}if(typeof (D)=="string"){return"message: "+D}if(Appcelerator.Browser.isIE){return"message: "+D.message+", location: "+D.location||D.number||0}else{var B=0;try{B=D.lineNumber||0}catch(A){}return"message: "+(D.message||D)+", location: "+B+", stack: "+(C?"<pre>":"")+(D.stack||"not specified")+(C?"</pre>":"")}};Object.isBoolean=function(A){return typeof (A)=="boolean"};Object.mirror=function(B){var A=(function(){});A.prototype=B;return new A()};Object.cloneWithout=function(C,B){var D=Object.clone(C);for(var A in B){D[A]=undefined}return D};Appcelerator.Util.makeSet=function(D){var C={};var B=D.length;for(var A=0;A<B;A++){C[D[A]]=true}return C};Appcelerator.Util.DateTime={ONE_SECOND:1000,ONE_MINUTE:60000,ONE_HOUR:3600000,ONE_DAY:86400000,ONE_WEEK:604800000,ONE_MONTH:18748800000,ONE_YEAR:31536000000,timeFormat:function(C){var F="";var D=0;for(var G=0,A=C.length;G<A;G++){var B=C.charAt(G);switch(B){case",":case" ":F="";break;case"m":if(G+1<A){var E=C.charAt(G+1);if(E=="s"){D+=parseInt(F);G++}}else{D+=parseInt(F)*this.ONE_MINUTE}F="";break;case"s":D+=parseInt(F)*this.ONE_SECOND;F="";break;case"h":D+=parseInt(F)*this.ONE_HOUR;F="";break;case"d":D+=parseInt(F)*this.ONE_DAY;F="";break;case"w":D+=parseInt(F)*this.ONE_WEEK;F="";break;case"y":D+=parseInt(F)*this.ONE_YEAR;F="";break;default:F+=B;break}}if(F.length>0){D+=parseInt(F)}return D},getDurationNoFormat:function(E,B){B=B||new Date();var D=B.getTime()-E.getTime();var A=0;var C=0;var F=0;if(D>this.ONE_HOUR){A=Math.round(D/this.ONE_HOUR);D=D-(this.ONE_HOUR*A)}if(D==this.ONE_HOUR){A=1;D=D-this.ONE_HOUR}if(D>this.ONE_MINUTE){C=Math.round(D/this.ONE_MINUTE);D=D-(this.ONE_MINUTE*C)}if(D==this.ONE_MINUTE){C=1;D=D-this.ONE_MINUTE}if(D>this.ONE_SECOND){F=Math.round(D/this.ONE_SECOND);D=D-(this.ONE_SECOND*F)}if(D==this.ONE_SECOND){F=1}if(F<10){F="0"+F}if(A>0){return A+":"+C+":"+F}if(C>0){return C+":"+F}if(F>0){return"0:"+F}else{return":00"}},getDuration:function(C,A){A=A||new Date();var B=A.getTime()-C.getTime();return this.toDuration(B)},toDuration:function(B){B=B||0;if(B<0){return"0"}else{if(B<this.ONE_SECOND){var A=Math.round(B/this.ONE_SECOND);return A+" ms"}else{if(B==this.ONE_SECOND){return"1 second"}else{if(B<this.ONE_MINUTE){var A=Math.round(B/this.ONE_SECOND);return A+" second"+(A>1?"s":"")}}}}if(B==this.ONE_MINUTE){return"1 minute"}else{if(B==this.ONE_HOUR){return"1 hour"}else{if(B<this.ONE_HOUR){var A=Math.round(B/this.ONE_MINUTE);return A+" minute"+(A>1?"s":"")}else{if(B>this.ONE_HOUR&&B<this.ONE_DAY){var A=Math.round(B/this.ONE_HOUR);return A+" hour"+(A>1?"s":"")}else{if(B==this.ONE_DAY){return"1 day"}else{if(B>this.ONE_DAY&&B<this.ONE_YEAR){if(B>this.ONE_MONTH){var A=Math.round(B/this.ONE_MONTH);return A+" month"+(A>1?"s":"")}else{if(B>this.ONE_WEEK){var A=Math.round(B/this.ONE_WEEK);return A+" week"+(A>1?"s":"")}else{var A=Math.round(B/this.ONE_DAY);return A+" day"+(A>1?"s":"")}}}else{if(B==this.ONE_YEAR){return"1 year"}else{var A=Math.round(B/this.ONE_DAY);return A+" years"}}}}}}}},friendlyDiff:function(D,A,B){if(!D){return null}A=A||new Date();var E=A.getTime()-D.getTime();if(E<=this.ONE_MINUTE){if(B){return"a few secs ago"}return"a few seconds ago"}else{if(E<this.ONE_HOUR){var C=Math.round(E/this.ONE_MINUTE);if(C<10){if(B){return"a few mins ago"}return"a few minutes ago"}if(B){return C+" min"+(C>1?"s":"")+" ago"}return C+" minute"+(C>1?"s":"")+" ago"}else{if(E==this.ONE_HOUR){return"an hour ago"}else{if(E<this.ONE_DAY){var C=Math.round(E/this.ONE_HOUR);return C+" hour"+(C>1?"s":"")+" ago"}else{if(E==this.ONE_DAY){return"yesterday"}else{if(E>this.ONE_DAY&&E<this.ONE_YEAR){if(E>this.ONE_MONTH){var C=Math.round(E/this.ONE_MONTH);return C+" month"+(C>1?"s":"")+" ago"}else{if(E>this.ONE_WEEK){var C=Math.round(E/this.ONE_WEEK);return C+" week"+(C>1?"s":"")+" ago"}else{var C=Math.round(E/this.ONE_DAY);if(C==1){return"yesterday"}return C+" day"+(C>1?"s":"")+" ago"}}}else{if(E>this.ONE_YEAR){if(B){return">1 year ago"}return"more than a year ago"}}}}}}}return E},getMonthIntValue:function(A){switch(A){case"Jan":return 0;case"Feb":return 1;case"Mar":return 2;case"Apr":return 3;case"May":return 4;case"Jun":return 5;case"Jul":return 6;case"Aug":return 7;case"Sep":return 8;case"Oct":return 9;case"Nov":return 10;case"Dec":return 11}},intval:function(A){if(A){if(A.charAt(0)=="0"){A=A.substring(1)}return parseInt(A)}return 0},getFriendlyDate:function(B,C){var D=Object.extend({today:"",yesterday:"",past:"",lowercase:false},C||"");B=B||new Date();var A=typeof (B)=="string"?Appcelerator.Util.DateTime.parseRFC2822Date(B):B;if(Appcelerator.Util.DateTime.isToday(A)){return D["today"]+Appcelerator.Util.DateTime.get12HourTime(A)}else{if(Appcelerator.Util.DateTime.isYesterday(A)){return D["yesterday"]+(D["lowercase"]?"yesterday":"Yesterday")}}return D["past"]+A.getDay()+" "+Appcelerator.Util.DateTime.getShortMonthName(A)},isToday:function(B){var A=new Date();return(A.getFullYear()==B.getFullYear()&&A.getMonth()==B.getMonth()&&A.getDay()==B.getDay())},isYesterday:function(B){var A=new Date();return(A.getFullYear()==B.getFullYear()&&A.getMonth()==B.getMonth()&&A.getDay()-1==B.getDay())},getShortMonthName:function(A){var B=A.getMonth();switch(B){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec"}},get12HourTime:function(F,I,E){var B=F;if(B==null){B=new Date()}var D=B.getHours();var G=(D==0)?12:D;var H="AM";if(D>=12){G=(D==12)?12:(D-12);H="PM"}var C=B.getMinutes();var J=B.getSeconds();G+=":"+(C<10?"0":"")+C;if(I){G+=":"+(J<10?"0":"")+J}if(E){var A=B.getMilliseconds();G+="."+(A<10?"0":"")+A}G+=" "+H;return G},getShortDateTime:function(B){if(B&&typeof (B)=="string"){B=this.parseJavaDate(B)}var A=B||new Date();return this.getShortMonthName(A)+" "+A.getDate()+" "+this.get12HourTime(A)},parseInt:function(A){if(A){if(A.charAt(0)=="0"){return this.parseInt(A.substring(1))}return parseInt(A)}return 0},parseJavaDate:function(G){if(!G||G==""){return null}var H=parseInt(G.substring(0,4));var F=this.parseInt(G.substring(5,7))-1;var I=this.parseInt(G.substring(8,10));var D=this.parseInt(G.substring(11,13));var C=this.parseInt(G.substring(14,16));var A=this.parseInt(G.substring(17,19));var E=this.parseInt(G.substring(20));var B=new Date();B.setFullYear(H);B.setMonth(F);B.setDate(I);B.setHours(D);B.setMinutes(C);B.setSeconds(A);B.setMilliseconds(E);return B},parseRFC2822Date:function(G){var H=G.split(" ");var J=this.intval(H[1]);var F=H[2];var I=H[3];var L=H[4].split(":");var C=this.intval(L[0]);var D=this.intval(L[1]);var E=this.intval(L[2]);var B=this.intval(H[5].substring(0,3));var A=0;if(B<0){A=C-(B)}else{A=C+(B)}if(A>23){A=A-24;J+=1}else{if(A<0){A=24-A;J-=1}}var K=new Date();K.setUTCDate(J);K.setUTCMonth(this.getMonthIntValue(F));K.setUTCFullYear(I);K.setUTCHours(A,D,E);return K},getTimezoneOffset:function(){var D=new Date();var F=D.getTimezoneOffset();var A=Math.floor(F/60);var E=Math.abs(F%60);var C=new String();C+=(A>0)?"-":"+";var B=Math.abs(A);C+=(B<10)?"0"+B:B;C+=((E==0)?"00":E);return C},parse:function(A,B){return Jel.Date.parse(A,B)},format:function(A,B){return Jel.Date.format(A,B)}};Appcelerator.ServerConfig={};Appcelerator.Util.ServerConfig=Class.create();Appcelerator.Util.ServerConfig.listeners=[];Appcelerator.Util.ServerConfig.addConfigListener=function(A){if(Appcelerator.Util.ServerConfig.listeners){Appcelerator.Util.ServerConfig.listeners.push(A)}else{A()}};Appcelerator.Util.ServerConfig.disableRemoteConfig=false;Appcelerator.Util.ServerConfig.set=function(A){Appcelerator.ServerConfig=A;Appcelerator.Util.ServerConfig.loadComplete()};Appcelerator.Util.ServerConfig.load=function(){if(window.location.href.indexOf("file:/")==-1){if(Appcelerator.Util.ServerConfig.disableRemoteConfig){return }var A=Appcelerator.DocumentPath+"appcelerator.xml";new Ajax.Request(A,{asynchronous:true,method:"get",onSuccess:function(E){var F=E.responseXML.documentElement;var C=F.childNodes;for(var H=0;H<C.length;H++){var B=C[H];if(B.nodeType==Appcelerator.Util.Dom.ELEMENT_NODE){var G=B.nodeName.toLowerCase();var D={};var J=Appcelerator.Util.Dom.getText(B);var I=new Template(J,/(^|.|\r|\n)(@\{(.*?)\})/);D.path=I.evaluate(Appcelerator.TEMPLATE_VARS);D.value=D.path;Appcelerator.Util.Dom.eachAttribute(B,function(L,K){D[L]=K},["id"],true);Appcelerator.ServerConfig[G]=D}}Appcelerator.Util.ServerConfig.loadComplete()},onFailure:function(B){$E("Failed to load configuration from "+A);Appcelerator.Util.ServerConfig.loadComplete()}})}else{Appcelerator.Util.ServerConfig.loadComplete()}};Appcelerator.Util.ServerConfig.loadComplete=function(){Appcelerator.Util.ServerConfig.listeners.each(function(A){try{A()}catch(B){$E("error calling server config listener = "+A+", Exception = "+Object.getExceptionDetail(B))}});Appcelerator.Util.ServerConfig.listeners=null};Appcelerator.Util.ServerConfig.addConfigListener(function(){if(window.AppceleratorConfig){Appcelerator.Config=window.AppceleratorConfig}else{Appcelerator.Util.ServerConfig.setValues("cookie_check",true);Appcelerator.Util.ServerConfig.setValues("browser_check",true);Appcelerator.Util.ServerConfig.setValues("hide_body",false);Appcelerator.Util.ServerConfig.setValues("perfmon",false);Appcelerator.Util.ServerConfig.setValues("usegears",true);Appcelerator.Util.ServerConfig.setValues("report_stats",true)}Appcelerator.Browser.autocheckBrowserSupport=Appcelerator.Config["browser_check"];Appcelerator.Browser.autoReportStats=Appcelerator.Config["report_stats"]});Appcelerator.Util.ServerConfig.setValues=function(A,B){if(Appcelerator.ServerConfig[A]){Appcelerator.Config[A]=Appcelerator.ServerConfig[A].value}else{if(Appcelerator.Parameters.get(A)){var C=Appcelerator.Parameters.get(A);switch(C){case"true":Appcelerator.Config[A]=true;break;case"false":Appcelerator.Config[A]=false;break;default:Appcelerator.Config[A]=Appcelerator.Parameters.get(A)}}else{Appcelerator.Config[A]=B}}};Appcelerator.Core.onload(Appcelerator.Util.ServerConfig.load);Appcelerator.Compiler.compileOnLoad=true;Appcelerator.Compiler.isInterpretiveMode=true;Appcelerator.Compiler.isCompiledMode=false;Appcelerator.Compiler.POSITION_REMOVE=-1;Appcelerator.Compiler.POSITION_REPLACE=0;Appcelerator.Compiler.POSITION_TOP=1;Appcelerator.Compiler.POSITION_BOTTOM=2;Appcelerator.Compiler.POSITION_BEFORE=3;Appcelerator.Compiler.POSITION_AFTER=4;Appcelerator.Compiler.POSITION_BODY_TOP=5;Appcelerator.Compiler.POSITION_BODY_BOTTOM=6;Appcelerator.Compiler.POSITION_HEAD_TOP=7;Appcelerator.Compiler.POSITION_HEAD_BOTTOM=8;Appcelerator.Compiler.nextId=0;Appcelerator.Compiler.functionId=1;Appcelerator.Compiler.getAndEnsureId=function(A){if(!A.id){A.id=Appcelerator.Compiler.generateId()}if(!A._added_to_cache){Appcelerator.Compiler.setElementId(A,A.id)}return A.id};Appcelerator.Compiler.setElementId=function(A,B){Appcelerator.Compiler.removeElementId(A.id);A.id=B;A._added_to_cache=true;window["$"+B]=A;return A};Appcelerator.Compiler.removeElementId=function(C){if(C){var A=window["$"+C];if(A){try{delete window["$"+C]}catch(B){window["$"+C]=0}if(A._added_to_cache){try{delete A._added_to_cache}catch(B){A._added_to_cache=0}}return true}}return false};(function(){if(Object.isFunction(window["$"])){try{delete window["$"]}catch(A){}}})();function $(B){if(arguments.length>1){var A=$A(arguments);return A.collect(function(D){return $(D)})}if(Object.isString(B)){if(B==""){return null}var C=B;B=window["$"+C];if(!B){B=document.getElementById(C)}}return B?Element.extend(B):null}Appcelerator.Compiler.generateId=function(){return"app_"+(Appcelerator.Compiler.nextId++)};Appcelerator.Compiler.attributeProcessors={"*":[]};Appcelerator.Compiler.registerAttributeProcessor=function(C,D,E){if(typeof C=="string"){C=C||"*";var B=Appcelerator.Compiler.attributeProcessors[C];if(!B){B=[];Appcelerator.Compiler.attributeProcessors[C]=B}B.unshift([D,E])}else{for(var G=0,A=C.length;G<A;G++){var F=C[G]||"*";var B=Appcelerator.Compiler.attributeProcessors[F];if(!B){B=[];Appcelerator.Compiler.attributeProcessors[F]=B}B.unshift([D,E])}}};Appcelerator.Compiler.forwardToAttributeListener=function(C,G){for(var B=0;B<G.length;B++){var D=G[B];var A=D[0];var F=D[1];var E=C.getAttribute(A);if(E){F.handle(C,A,E)}}};Appcelerator.Compiler.delegateToAttributeListeners=function(A){var B=Appcelerator.Compiler.getTagname(A);var C=Appcelerator.Compiler.attributeProcessors[B];if(C&&C.length>0){Appcelerator.Compiler.forwardToAttributeListener(A,C,B)}C=Appcelerator.Compiler.attributeProcessors["*"];if(C&&C.length>0){Appcelerator.Compiler.forwardToAttributeListener(A,C,"*")}};Appcelerator.Compiler.containerProcessors=[];Appcelerator.Compiler.addContainerProcessor=function(A){Appcelerator.Compiler.containerProcessors.push(A)};Appcelerator.Compiler.removeContainerProcessor=function(A){Appcelerator.Compiler.containerProcessors.remove(A)};Appcelerator.Compiler.delegateToContainerProcessors=function(C,B){if(Appcelerator.Compiler.containerProcessors.length>0){for(var F=0,A=Appcelerator.Compiler.containerProcessors.length;F<A;F++){var D=Appcelerator.Compiler.containerProcessors[F];var E=D.process(C,B);if(E){B=E}}}return B};Appcelerator.Compiler.retainedWidgetAttributes=["name"];Appcelerator.Compiler.addContainerProcessor({process:function(F,B){var D=Appcelerator.Compiler.retainedWidgetAttributes;for(var E=0;E<D.length;E++){var A=D[E];var C=F.getAttribute(A);if(C){B.setAttribute(A,C)}}}});Appcelerator.Compiler.checkLoadState=function(A){var B=A.state;if(B&&B.pending==0&&B.scanned){if(typeof (B.onfinish)=="function"){B.onfinish(code)}if(typeof (B.onafterfinish)=="function"){B.onafterfinish()}Appcelerator.Compiler.removeState(A);return true}return false};Appcelerator.Compiler.dynamicCompile=function(B,C,A){if(!B){return }$D("dynamic compile called for ",B," - id=",B.id);Appcelerator.Compiler.doCompile(B,A)};Appcelerator.Compiler.doCompile=function(B,A){var C=Appcelerator.Compiler.createCompilerState();Appcelerator.Compiler.compileElement(B,C,A);C.scanned=true;Appcelerator.Compiler.checkLoadState(B)};Appcelerator.Compiler.removeState=function(A){if(A.state){try{delete A.state}catch(B){A.state=null}}};Appcelerator.Compiler.createCompilerState=function(){return{pending:0,scanned:false}};Appcelerator.Compiler.onbeforecompileListeners=[];Appcelerator.Compiler.oncompileListeners=[];Appcelerator.Compiler.beforeDocumentCompile=function(A){Appcelerator.Compiler.onbeforecompileListeners.push(A)};Appcelerator.Compiler.afterDocumentCompile=function(A){Appcelerator.Compiler.oncompileListeners.push(A)};Appcelerator.Compiler.compileDocument=function(B){$D("compiled document called");if(Appcelerator.Compiler.onbeforecompileListeners){for(var E=0;E<Appcelerator.Compiler.onbeforecompileListeners.length;E++){Appcelerator.Compiler.onbeforecompileListeners[E]()}delete Appcelerator.Compiler.onbeforecompileListeners}var A=document.body;var D=A.style.visibility||"visible";if(Appcelerator.Config["hide_body"]){A.style.visibility="hidden"}if(!document.body.id){Appcelerator.Compiler.setElementId(document.body,"app_body")}var C=Appcelerator.Compiler.createCompilerState();A.state=C;Appcelerator.Compiler.compileElement(A,C);C.scanned=true;C.onafterfinish=function(F){(function(){if(typeof (B)=="function"){B()}if(D!=A.style.visibility){A.style.visibility=D}Appcelerator.Compiler.compileDocumentOnFinish()}).defer()};Appcelerator.Compiler.checkLoadState(A)};Appcelerator.Compiler.compileDocumentOnFinish=function(){if(Appcelerator.Compiler.oncompileListeners){for(var A=0;A<Appcelerator.Compiler.oncompileListeners.length;A++){Appcelerator.Compiler.oncompileListeners[A]()}delete Appcelerator.Compiler.oncompileListeners}$MQ("l:app.compiled")};Appcelerator.Compiler.compileInterceptors=[];Appcelerator.Compiler.addCompilationInterceptor=function(A){Appcelerator.Compiler.compileInterceptors.push(A)};Appcelerator.Compiler.onPrecompile=function(B){if(Appcelerator.Compiler.compileInterceptors.length>0){for(var D=0,A=Appcelerator.Compiler.compileInterceptors.length;D<A;D++){var C=Appcelerator.Compiler.compileInterceptors[D];if(C.onPrecompile(B)==false){return false}}}return true};Appcelerator.Compiler.compileElement=function(C,F,B){B=B==null?true:B;Appcelerator.Compiler.getAndEnsureId(C);Appcelerator.Compiler.determineScope(C);$D("compiling element => "+C.id);if(typeof (F)=="undefined"){throw"compileElement called without state for "+C.id}Appcelerator.Compiler.onPrecompile(C);var E=C.getAttribute("compile")||"true";if(E=="false"){return }if(Appcelerator.Compiler.isInterpretiveMode){if(C.compiled){Appcelerator.Compiler.destroy(C)}C.compiled=1}C.state=F;try{var A=Appcelerator.Compiler.getTagname(C);var D=C.getAttribute("kind");if(A.indexOf(":")>0){C.style.originalDisplay=C.style.display||"block";F.pending+=1;Appcelerator.Core.requireModule(A,function(){Appcelerator.Compiler.compileWidget(C,F);F.pending-=1;Appcelerator.Compiler.checkLoadState(C);Element.fire(C,"element:compiled:"+C.id,{id:C.id})})}else{if(D&&D.length>0){var A="app:"+D;F.pending+=1;Appcelerator.Core.requireModule(A,function(){var H=Appcelerator.Compiler.compileWidget(C,F,A);F.pending-=1;Appcelerator.Compiler.checkLoadState(F);Element.fire(C,"element:compiled:"+C.id,{id:C.id})})}else{Appcelerator.Compiler.delegateToAttributeListeners(C);if(B&&!C.stopCompile){Appcelerator.Compiler.compileElementChildren(C);Element.fire(C,"element:compiled:"+C.id,{id:C.id})}}}}catch(G){Appcelerator.Compiler.handleElementException(C,G,"compiling "+C.id)}};Appcelerator.Compiler.compileElementChildren=function(C){if(C&&C.nodeType==1){if(C.nodeName.toLowerCase()!="textarea"){var D=Appcelerator.Compiler.getElementChildren(C);for(var B=0,A=D.length;B<A;B++){Appcelerator.Compiler.compileElement(D[B],C.state)}}Appcelerator.Compiler.checkLoadState(C);Element.fire(C,"element:compiled:"+C.id,{id:C.id})}};Appcelerator.Compiler.getElementChildren=function(B){var D=[];if(B&&B.nodeType==1){for(var A=0,C=B.childNodes.length;A<C;A++){if(B.childNodes[A].nodeType==1){D.push(B.childNodes[A])}}}return D};Appcelerator.Compiler.destroy=function(C,B){if(!C){return }B=B==null?true:B;C.compiled=0;Appcelerator.Compiler.removeElementId(C.id);if(Object.isArray(C.trashcan)){for(var F=0,A=C.trashcan.length;F<A;F++){try{C.trashcan[F]()}catch(E){$D(E)}}try{delete C.trashcan}catch(E){$D(E)}}if(B){if(C.nodeType==1&&C.childNodes&&C.childNodes.length>0){for(var F=0,A=C.childNodes.length;F<A;F++){var D=C.childNodes[F];if(D&&D.nodeType&&D.nodeType==1){try{Appcelerator.Compiler.destroy(D,true)}catch(E){$E(E)}}}}}};Appcelerator.Compiler.destroyContent=function(C){var D=Appcelerator.Compiler.getElementChildren(C);for(var B=0,A=D.length;B<A;B++){Appcelerator.Compiler.destroy(D[B],true)}};Appcelerator.Compiler.addTrash=function(B,A){if(!B.trashcan){B.trashcan=[]}B.trashcan.push(A)};Appcelerator.Compiler.getJsonTemplateVar=function(namespace,var_expr,template_var){var def={};var o=Object.getNestedProperty(namespace,var_expr,def);if(o==def){try{with(namespace){o=eval(var_expr)}}catch(e){return template_var}}if(typeof (o)=="object"){o=Object.toJSON(o).replace(/"/g,"&quot;")}return o};Appcelerator.Compiler.templateRE=/#\{(.*?)\}/g;Appcelerator.Compiler.compileTemplate=function(html,htmlonly,varname){varname=varname==null?"f":varname;var fn=function(m,name,format,args){return"', jtv(values,'"+name+"','#{"+name+"}'),'"};var body="var "+varname+" = function(values){ var jtv = Appcelerator.Compiler.getJsonTemplateVar; return ['"+html.replace(/(\r\n|\n)/g,"").replace(/\t/g," ").replace(/'/g,"\\'").replace(Appcelerator.Compiler.templateRE,fn)+"'].join('');};"+(htmlonly?"":varname);var result=htmlonly?body:eval(body);return result};Appcelerator.Compiler.tagNamespaces=[];for(var x=0;x<document.documentElement.attributes.length;x++){var attr=document.documentElement.attributes[x];var name=attr.name;var value=attr.value;var idx=name.indexOf(":");if(idx>0){Appcelerator.Compiler.tagNamespaces.push(name.substring(idx+1))}}if(Appcelerator.Compiler.tagNamespaces.length==0){Appcelerator.Compiler.tagNamespaces.push("app")}Appcelerator.Compiler.removeHtmlPrefix=function(A){if(Appcelerator.Browser.isIE){A=A.gsub(/<\?xml:namespace(.*?)\/>/i,"")}return A.gsub(/html:/i,"").gsub(/><\/img>/i,"/>")};Appcelerator.Compiler.specialMagicParseHtml=function(A,C){var B=A;for(var D=0;D<Appcelerator.Compiler.tagNamespaces.length;D++){B=Appcelerator.Compiler.specialMagicParseTagSet(B,Appcelerator.Compiler.tagNamespaces[D])}return B};Appcelerator.Compiler.specialMagicParseTagSet=function(G,H){var Q="<"+H+":";var E="</"+H+":";var N=G.indexOf(Q);if(N<0){return Appcelerator.Compiler.removeHtmlPrefix(G)}var D=Appcelerator.Compiler.removeHtmlPrefix(G.substring(0,N));var K=N+Q.length;var J=G.indexOf(">",K);var B=G.indexOf(" ",K);if(B<0||J<B){B=J}var C=G.substring(K,B);var P=E+C+">";while(true){var M=G.indexOf(P,K);var F=G.indexOf(">",K);var L=G.indexOf(">",M);var I=G.substring(F+1,M);var A=I.indexOf(Q+C);if(A!=-1){K=M+P.length;continue}var O=G.substring(N,M+P.length);if(Appcelerator.Browser.isIE){O=Appcelerator.Compiler.removeHtmlPrefix(O)}D+=O;break}D+=Appcelerator.Compiler.specialMagicParseHtml(G.substring(L+1),H);return D};Appcelerator.Compiler.copyAttributes=function(B,A){Appcelerator.Util.Dom.eachAttribute(B,function(E,G,F,D,C){if(F){A.setAttribute(E,G)}},["style","class","id"])};Appcelerator.Compiler.getHtml=function(B,C){C=(C==null)?true:C;var A=B.innerHTML||Appcelerator.Util.Dom.getText(B);return Appcelerator.Compiler.convertHtml(A,C)};Appcelerator.Compiler.addIENameSpace=function(A){if(Appcelerator.Browser.isIE){A='<?xml:namespace prefix = app ns = "http://www.appcelerator.org" /> '+A}return A};Appcelerator.Compiler.convertHtml=function(A,B){if(A.indexOf("#%7B")!=-1){A=A.gsub("#%7B","#{").gsub("%7D","}")}A=A.gsub(/\\\"/,"&quot;");if(B){return(A!=null)?Appcelerator.Compiler.specialMagicParseHtml(A):""}else{return A}};Appcelerator.Compiler.getWidgetHTML=function(A,B){return Appcelerator.Compiler.getHtml(A,B)};Appcelerator.Compiler.isHTMLTag=function(B){if(Appcelerator.Browser.isIE){return B.scopeName=="HTML"||!B.tagUrn}var A=Appcelerator.Compiler.getTagName(B,true);return !A.startsWith("app:")};Appcelerator.Compiler.getTagname=function(A){if(!A){throw"element cannot be null"}if(A.nodeType!=1){throw"node: "+A.nodeName+" is not an element, was nodeType: "+A.nodeType+", type="+(typeof A)}if(A._tagName){return A._tagName}if(Appcelerator.Browser.isIE){if(A.scopeName&&A.tagUrn){return A.scopeName+":"+A.nodeName.toLowerCase()}}if(Appcelerator.Compiler.isInterpretiveMode){return A.nodeName.toLowerCase()}return String(A.nodeName.toLowerCase())};Appcelerator.Compiler.addEventListener=function(C,D,E,B){var A=function(){var G=$A(arguments);$D("on "+C.id+"."+D+" => invoking action "+E);return E.apply({data:{}},G)};var F=B>0?(function(){var H=$A(arguments);var I=H[0];if(I.keyCode){H[0]={keyCode:I.keyCode}}var G=function(){return A.apply(A,H)};G.delay(B/1000)}):A;Event.observe(C,D,F,false);Appcelerator.Compiler.addTrash(C,function(){Event.stopObserving(C,D,F)});return C};Appcelerator.Compiler.installChangeListener=function(A,B){(function(){if(A.type=="checkbox"){A._validatorObserver=new Form.Element.Observer(A,0.1,B)}else{A._focusChangeListener=function(){A._validatorObserver=new Form.Element.Observer(A,0.5,function(C,D){B(C,D)})};Event.observe(A,"focus",A._focusChangeListener);A._blurChangeListener=function(){if(A._validatorObserver){A._validatorObserver.stop();try{delete A._validatorObserver}catch(C){A._validatorObserver=null}B(A,Field.getValue(A))}};Event.observe(A,"blur",A._blurChangeListener)}}).defer();return A};Appcelerator.Compiler.removeChangeListener=function(A){(function(){if(A._focusChangeListener){Event.stopObserving(A,"focus",A._focusChangeListener);try{delete A._focusChangeListener}catch(B){A._focusChangeListener=null}}if(A._blurChangeListener){Event.stopObserving(A,"blur",A._blurChangeListener);try{delete A._blurChangeListener}catch(B){A._blurChangeListener=null}}if(A._validatorObserver){A._validatorObserver.stop();try{delete A._validatorObserver}catch(B){A._validatorObserver=null}}}).defer()};Appcelerator.Compiler.ElementFunctions={};Appcelerator.Compiler.getFunction=function(C,A){var E=(typeof C=="string")?C:C.id;var B=E+"_"+A;var D=Appcelerator.Compiler.ElementFunctions[B];if(D){return D}C=$(E);if(C){return C[A]}return null};Appcelerator.Compiler.attachFunction=function(C,A,D){var E=(typeof C=="string")?C:C.id;var B=E+"_"+A;Appcelerator.Compiler.ElementFunctions[B]=D;return C};Appcelerator.Compiler.executeFunction=function(D,B,A,G){G=(G==null)?false:G;A=(A==null)?[]:A;var H=(typeof D=="string")?D:D.id;D=$(H);var C=H+"_"+B;var E=Appcelerator.Compiler.ElementFunctions[C];if(E){switch(A.length){case 0:return E();case 1:return E(A[0]);case 2:return E(A[0],A[1]);case 3:return E(A[0],A[1],A[2]);case 4:return E(A[0],A[1],A[2],A[3]);case 5:return E(A[0],A[1],A[2],A[3],A[4]);case 6:return E(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6]);case 8:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7]);case 9:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8]);case 10:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9]);case 11:return E(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10]);default:throw"too many arguments - only 11 supported currently for method: "+B+", you invoked with "+A.length+", args was: "+Object.toJSON(A)}}if(D){var E=D[B];var F=typeof (E);if(E&&(F=="function"||(Appcelerator.Browser.isIE&&F=="object"))){return D[B]()}}else{if(G){throw"element with ID: "+H+" doesn't have a function named: "+B}}};Appcelerator.Compiler.customConditionObservers={};Appcelerator.Compiler.compileWidget=function(D,I,d){d=d||Appcelerator.Compiler.getTagname(D);var C=Appcelerator.Core.widgets[d];var N="";$D("compiled widget "+D+", id="+D.id+", tag="+d+", module="+C);if(C){if(Appcelerator.Compiler.isInterpretiveMode&&C.flashRequired){var H=C.flashVersion||9;var V=null;if(!Appcelerator.Browser.isFlash){V="Flash version "+H+" or greater is required"}else{if(Appcelerator.Browser.flashVersion<H){V="Flash version "+H+" or greater is required. Your version is: "+Appcelerator.Browser.flashVersion}}if(V){V=V+'. <a href="http://www.adobe.com/products/flashplayer/" target="_NEW">Download Flash Now</a>';var M='<div class="flash_error" style="border:1px solid #c00;padding:5px;background-color:#fcc;text-align:center;margin:5px;">'+V+"</div>";new Insertion.Before(D,M);Element.remove(D);return }}var T=Appcelerator.Compiler.getAndEnsureId(D);var P=C.getAttributes();var Z={};for(var W=0;W<P.length;W++){var V=false;(function(){var g=P[W];var h=D.getAttribute(g.name)||g.defaultValue;if(Object.isFunction(h)){h=g.defaultValue}if(!h&&!g.optional){Appcelerator.Compiler.handleElementException(D,null,'required attribute "'+g.name+'" not defined for '+T);V=true}Z[g.name]=h})();if(V){return }}Z["id"]=T;var S=null;if(C.getActions){S=C.getActions();for(var a=0;a<S.length;a++){Appcelerator.Compiler.buildCustomAction(S[a])}}if(C.getConditions){Appcelerator.Compiler.customConditionObservers[T]={};var Q=C.getConditions();for(var W=0;W<Q.length;W++){var J=Q[W];var Y=Appcelerator.Compiler.customConditionFunctionCallback(J);Appcelerator.Compiler.registerCustomCondition({conditionNames:[J]},Y,D.id)}}if(Object.isFunction(C.dontParseOnAttributes)){if(!C.dontParseOnAttributes()){Appcelerator.Compiler.parseOnAttribute(D)}}else{Appcelerator.Compiler.parseOnAttribute(D)}var B=null;try{B=C.buildWidget(D,Z,I)}catch(U){Appcelerator.Compiler.handleElementException(D,U,"building widget "+D.id);return }if(D.id!=T){Appcelerator.Compiler.removeElementId(T);T=D.id;Appcelerator.Compiler.getAndEnsureId(D)}var K=false;if(B){var b=B.position||Appcelerator.Compiler.POSITION_REPLACE;var X=b==Appcelerator.Compiler.POSITION_REMOVE;if(!X){var M=B.presentation;if(M!=null){Appcelerator.Compiler.setElementId(D,T+"_widget");if(B.parent_tag!="none"&&B.parent_tag!=""){var R=B.parent_tag||"div";M="<"+R+' id="'+T+'_temp" style="margin:0;padding:0;display:none">'+M+"</"+R+">"}if(Appcelerator.Browser.isIE&&M.indexOf("<app:")!=-1){M=Appcelerator.Compiler.addIENameSpace(M)}K=true;switch(b){case Appcelerator.Compiler.POSITION_REPLACE:new Insertion.Before(D,M);X=true;break;case Appcelerator.Compiler.POSITION_TOP:new Insertion.Top(D,M);break;case Appcelerator.Compiler.POSITION_BOTTOM:new Insertion.Bottom(D,M);break;case Appcelerator.Compiler.POSITION_BEFORE:new Insertion.Before(D,M);break;case Appcelerator.Compiler.POSITION_AFTER:new Insertion.After(D,M);break;case Appcelerator.Compiler.POSITION_BODY_TOP:new Insertion.Top(document.body,M);break;case Appcelerator.Compiler.POSITION_BODY_BOTTOM:new Insertion.Bottom(document.body,M);break;case Appcelerator.Compiler.POSITION_HEAD_TOP:new Insertion.Top(Appcelerator.Core.HeadElement,M);break;case Appcelerator.Compiler.POSITION_HEAD_BOTTOM:new Insertion.Bottom(Appcelerator.Core.HeadElement,M);break}}}var A=null;if(K){A=$(T+"_temp");if(!A){A=D.ownerDocument.getElementById(T+"_temp")}Appcelerator.Compiler.delegateToContainerProcessors(D,A)}var G=T;var O=D.getAttribute("fieldset");var L=D.id;if(X){Appcelerator.Compiler.removeElementId(L);Element.remove(D)}if(A){if(K&&!$(T)){Appcelerator.Compiler.setElementId(A,T);G=T;Z["id"]=T}A.widget=C;A.widgetParameters=Z}if(S){for(var a=0;a<S.length;a++){var F=S[a];var E=C[F];if(!E){throw"couldn't find method named: "+F+" for module = "+C}(function(){var k=S[a];var g=C[F];var h=function(l,n,o,w,s,r,u,t){try{g(l,Z,o,w,s,r,u,t)}catch(q){$E("Error executing "+k+" in module "+C.getWidgetName()+". Error "+Object.getExceptionDetail(q)+", stack="+q.stack)}};Appcelerator.Compiler.attachFunction(T,k,h)})()}}if(O&&!C.ignoreFieldset){Appcelerator.Compiler.addFieldSet(A,false,O)}if(B.compile){try{C.compileWidget(Z,A)}catch(U){Appcelerator.Compiler.handleElementException($(T),U,"compiling widget "+T+", type "+D.nodeName);return }}if(K&&B.wire&&A){Appcelerator.Compiler.compileElement(A,I)}if(A){A.style.display=""}}}else{if(D.style&&D.style.display!=D.style.originalDisplay){D.style.display=D.style.originalDisplay}}return N};Appcelerator.Compiler.fireCustomCondition=function(B,A,E){Appcelerator.Compiler.fireConditionEvent(B,A);var D=Appcelerator.Compiler.customConditionObservers[B];if(D==null){$D('no custom condition found for id="'+B+'"')}else{if(D[A]==null){$D('no custom condition found for id="'+B+'" condition="'+A+'"')}else{var G=D[A];for(var F=0;F<G.length;F++){var K=G[F];params=K.params;var C=params?Appcelerator.Compiler.getParameters(params,false):null;var I=(C)?Object.toJSON(C):null;var H=Appcelerator.Compiler.parseConditionCondition(I,E);var J;if(H){J=Appcelerator.Compiler.makeConditionalAction(B,K.action,K.ifCond,E)}else{if(elseaction){J=Appcelerator.Compiler.makeConditionalAction(B,K.elseAction,K.ifCond,E)}}Appcelerator.Compiler.executeAfter(J,K.delay)}}}};Appcelerator.Compiler.customConditionFunctionCallback=function(A){return function(H,C,F,K,I,G){var B=H.id;var D=Appcelerator.Compiler.parameterRE.exec(C);var J=(D?D[1]:C);var E=D?D[2]:null;if(J==A){var L={"action":F,"delay":I,"elseAction":K,"ifCond":G,"params":E};if(Appcelerator.Compiler.customConditionObservers[B]==null){Appcelerator.Compiler.customConditionObservers[B]={}}if(Appcelerator.Compiler.customConditionObservers[B][A]){Appcelerator.Compiler.customConditionObservers[B][A].push(L)}else{Appcelerator.Compiler.customConditionObservers[B][A]=[L]}return true}return false}};Appcelerator.Compiler.determineScope=function(A){var B=A.getAttribute("scope");if(!B){var C=A.parentNode;if(C){B=C.scope}if(!B){B="appcelerator"}}A.scope=B};Appcelerator.Compiler.parseOnAttribute=function(B){try{var A=B.getAttribute("on");if(A&&Object.isString(A)){$D("parseOnAttribute ",B.id," on=",A);Appcelerator.Compiler.compileExpression(B,A,false);return true}}catch(C){Appcelerator.Compiler.handleElementException(B,C,'compiling "on" attribute for element '+B.id)}return false};Appcelerator.Compiler.smartTokenSearch=function(D,F){var G=-1;if(D.indexOf("[")>-1&&D.indexOf("]")>-1){var C=D.indexOf(F);if(C>-1){var A=false;for(var E=C;E>-1;E--){if(D.charAt(E)=="]"){break}if(D.charAt(E)=="["){A=true;break}}var B=false;for(var E=C;E<D.length;E++){if(D.charAt(E)=="["){break}if(D.charAt(E)=="]"){B=true;break}}if(A&&B){G=-1}else{G=D.indexOf(F)}}else{G=C}}else{G=D.indexOf(F)}return G};Appcelerator.Compiler.compoundCondRE=/^\((.*)?\) then$/;Appcelerator.Compiler.parseExpression=function(L,B){if(!L){return[]}if(!Object.isString(L)){alert("framework error: value was "+L+" -- unexpected type: "+typeof (L));throw"value: "+L+" is not a string!"}L=L.gsub("\n"," ");L=L.gsub("\r"," ");L=L.gsub("\t"," ");L=L.trim();var X=[];var O=Appcelerator.Compiler.smartSplit(L," or ");for(var T=0,Q=O.length;T<Q;T++){var K=O[T].trim();var J=K.indexOf(" then ");if(J<=0){if(Appcelerator.Compiler.getTagname(B).indexOf(":")){K=K+" then execute";J=K.indexOf(" then ")}else{throw"syntax error: expected 'then' for expression: "+K}}var P=K.substring(0,J);var H=K.substring(0,J+5);var R=Appcelerator.Compiler.compoundCondRE.exec(H);if(R){var W=R[1];P=Appcelerator.Compiler.smartSplit(W," or ")}var F=null;var N=K.substring(J+6);var E=Appcelerator.Compiler.smartTokenSearch(N,"else");var V=5;if(E==-1){E=N.indexOf("otherwise");V=10}var M=null;if(E>0){M=N.substring(0,E-1);F=N.substring(E+V)}else{M=N}var A=F||M;var I=null;var S=A.indexOf(" if expr[");if(S!=-1){var Y=A.substring(S+9);var C=Y.indexOf("]");if(C==-1){throw"error in if expression, missing end parenthesis at: "+M}I=Y.substring(0,C);if(F){F=A.substring(0,S)}else{M=A.substring(0,S)}A=Y.substring(C+2)}var U=0;var D=Appcelerator.Compiler.smartTokenSearch(N,"after ");if(D!=-1){var G=A.substring(D+6);U=Appcelerator.Util.DateTime.timeFormat(G);if(!I){if(F){F=A.substring(0,D-1)}else{M=A.substring(0,D-1)}}}X.push([null,P,M,F,U,I])}return X};Appcelerator.Compiler.compileExpression=function(C,I,B){I=Appcelerator.Compiler.processMacros(I,C.id);if(!I){alert("value returned null for "+C.id)}var H=Appcelerator.Compiler.parseExpression(I,C);$D("on expression for ",C.id," has ",H.length," condition/action pairs");for(var D=0;D<H.length;D++){var G=H[D];$D("compiling expression for ",C.id," => condition=[",G[1],"], action=[",G[2],"], elseAction=[",G[3],"], delay=[",G[4],"], ifCond=[",G[5],"]");G[0]=C;var E=false;if(Object.isArray(G[1])){for(var F=0;F<G[1].length;F++){var J=G[1][F];var A=[C,J,G[2],G[3],G[4],G[5]];E=Appcelerator.Compiler.handleCondition.call(this,A);if(!E){throw"syntax error: unknown condition type: "+G[1]+" for "+I}}continue}E=Appcelerator.Compiler.handleCondition.call(this,G);if(!E){throw"syntax error: unknown condition type: "+G[1]+" for "+I}}};Appcelerator.Compiler.parseConditionCondition=function(J,H){var L=true;var D=J?J.evalJSON():null;if(D){for(var K=0,I=D.length;K<I;K++){var C=D[K];if(!C.key&&C.empty&&C.value){C.key=C.value;C.value=null}var E=null;var G=C.key&&C.key.charAt(C.key.length-1)=="!";var O=C.key&&C.key.charAt(0)=="!";var F=(G||O);var P=false;if(C.key){E=G?C.key.substring(0,C.key.length-1):C.key;E=O?E.substring(1):E;P=E.charAt(0)=="$";E=(C.keyExpression||P)?Appcelerator.Compiler.getEvaluatedValue(E,H,H,C.keyExpression):E}if((C.operator=="<"||C.operator==">")&&(C.value&&Object.isString(C.value)&&C.value.charAt(0)=="=")){C.operator+="=";C.value=C.value.substring(1)}var N=C.operator?Appcelerator.Compiler.getEvaluatedValue(E,H,H,C.valueExpression):C.value?Appcelerator.Compiler.getEvaluatedValue(C.value,H,H,C.valueExpression):null;if(C.value&&Object.isString(C.value)&&C.value.charAt(0)=="~"){C.regex=true;C.value=C.value.substring(1)}var M=!Object.isUndefined(C.value)?Appcelerator.Compiler.getEvaluatedValue(C.value,H):null;var B=C.keyExpression?E:C.valueExpression?(N||E):P?(E&&String(E).charAt(0)!="$"):Object.getNestedProperty(H,E);B=Object.isBoolean(B)?B:!Object.isUndefined(B);if(B){switch(C.operator){case"<":L=N<M;break;case">":L=N>M;break;case"<=":L=N<=M;break;case">=":L=N>=M;break;default:if(C.regex){var A=new RegExp(M);L=A.test(N)}else{L=C.empty?B:C.valueExpression?N:N==M}break}}else{L=false}L=F?!L:L;if(!L){break}}}return L};Appcelerator.Compiler.customConditions=[];Appcelerator.Compiler.customElementConditions=[];Appcelerator.Compiler.registerCustomCondition=function(B,C,A){C.metadata=B;if(!A){Appcelerator.Compiler.customConditions.push(C)}else{Appcelerator.Compiler.customElementConditions.push({elementid:A,condition:C})}};Appcelerator.Compiler.conditionListeners={};Appcelerator.Compiler.registerConditionListener=function(B,E,D){var A=$(B).id+"__"+E;var C=Appcelerator.Compiler.conditionListeners[A];if(!C){C=[];Appcelerator.Compiler.conditionListeners[A]=C}C.push(D)};Appcelerator.Compiler.fireConditionEvent=function(B,E){var A=$(B).id+"__"+E;var C=Appcelerator.Compiler.conditionListeners[A];if(C){for(var D=0;D<C.length;D++){C[D]($(B),E)}}};Appcelerator.Compiler.handleCondition=function(E){var A=E[0];$D("handleCondition called for ",A);if(E[1]&&Object.isBoolean(E[1])){var C=Appcelerator.Compiler.makeAction(A.id,E[2]);return C.call(this,E[3])}for(var C=0;C<Appcelerator.Compiler.customElementConditions.length;C++){var B=Appcelerator.Compiler.customElementConditions[C];if(B.elementid==A.id){var D=B.condition;var F=D.apply(D,E);if(F){return true}}}for(var C=0;C<Appcelerator.Compiler.customConditions.length;C++){var D=Appcelerator.Compiler.customConditions[C];var F=D.apply(D,E);if(F){return true}}return false};Appcelerator.Compiler.getConditionsMetadata=function(){return Appcelerator.Compile.customConditions.pluck("metadata")};Appcelerator.Compiler.parameterRE=/(.*?)\[(.*)?\]/i;Appcelerator.Compiler.expressionRE=/^expr\((.*?)\)$/;Appcelerator.Compiler.customActions={};Appcelerator.Compiler.customElementActions={};Appcelerator.Compiler.registerCustomAction=function(A,D,B){var C=Object.clone(D);C.build=function(G,E,F){return["try {",D.build(G,E,F),"; }catch(exxx){Appcelerator.Compiler.handleElementException",'($("',G,'"),exxx,"Executing:',E,'");}'].join("")};if(D.parseParameters){C.parseParameters=D.parseParameters}if(!B){Appcelerator.Compiler.customActions[A]=C}else{Appcelerator.Compiler.customElementActions[A]=C}};Appcelerator.Compiler.properCase=function(A){return A.charAt(0).toUpperCase()+A.substring(1)};Appcelerator.Compiler.smartSplit=function(C,B){C=C.trim();var E=C.split(B);if(E.length==1){return E}var G=[];var D=null;for(var F=0;F<E.length;F++){var A=E[F];if(!D&&A.charAt(0)=="("){D=A+" or ";continue}else{if(D&&D.charAt(0)=="("){if(A.indexOf(") ")!=-1){G.push(D+A);D=null}else{D+=A+" or "}continue}}if(!D&&A.indexOf("[")>=0&&A.indexOf("]")==-1){if(D){D+=B+A}else{D=A}}else{if(D&&A.indexOf("]")==-1){D+=B+A}else{if(D){G.push(D+B+A);D=null}else{G.push(A)}}}}return G};Appcelerator.Compiler.makeConditionalAction=function(E,D,C,A){var B=function(F){var G=Appcelerator.Compiler.makeAction(E,D,A);if(C){if(Object.isUndefined(F.id)){F.id=E}if(Object.evalWithinScope(C,F)){G(F)}}else{G(F)}};return B};Appcelerator.Compiler.makeAction=function(H,E,B){var D=[];var F=Appcelerator.Compiler.smartSplit(E.trim()," and ");for(var G=0,A=F.length;G<A;G++){(function(){var R=F[G].trim();var K=R.startsWith("both:")||R.startsWith("*:");var O=!K&&R.startsWith("remote:")||R.startsWith("r:");var L=!O&&(R.startsWith("local:")||R.startsWith("l:"));var J=Appcelerator.Compiler.parameterRE.exec(R);var M=J!=null?Appcelerator.Compiler.getParameters(J[2].trim(),false):null;var N=J!=null?J[1]:R;M=M||[];if(B){for(var I in B){M.push({key:I,value:B[I]})}}if(L||O||K){var Q=function(V){var T={};for(var S=0;S<M.length;S++){var W=M[S];var U=W.key,X=W.value;if(W.keyExpression){U=Appcelerator.Compiler.getEvaluatedValue(W.key,null,V,W.keyExpression)}else{if(W.valueExpression){X=Appcelerator.Compiler.getEvaluatedValue(W.value,null,V,W.valueExpression)}else{if(W.empty){X=Appcelerator.Compiler.getEvaluatedValue(W.key,null,V)}else{U=Appcelerator.Compiler.getEvaluatedValue(W.key);X=Appcelerator.Compiler.getEvaluatedValue(W.value,null,V)}}}T[U]=X}Appcelerator.Compiler.fireServiceBrokerMessage(H,N,T,V)};D.push({func:Q,action:N})}else{var P=Appcelerator.Compiler.customElementActions[N];if(!P){P=Appcelerator.Compiler.customActions[N]}if(!P){throw"syntax error: unknown action: "+N+" for "+H}var Q=P.parseParameters;if(Q&&Object.isFunction(Q)){M=Q(H,N,J?J[2]||R:R)}var Q=function(T){T=T||window;if(Object.isArray(M)){for(var S=0;S<M.length;S++){var U=M[S];if(U.keyExpression){U.key=Appcelerator.Compiler.getEvaluatedValue(U.key,T.data,T,U.keyExpression);U.keyExpression=false}else{if(U.valueExpression){U.value=Appcelerator.Compiler.getEvaluatedValue(U.value,T.data,T,U.valueExpression);U.valueExpression=false;if(U.empty){U.key=U.value}}else{if(U.empty){U.value=Appcelerator.Compiler.getEvaluatedValue(U.key,T.data,T)}else{U.key=Appcelerator.Compiler.getEvaluatedValue(U.key);U.value=Appcelerator.Compiler.getEvaluatedValue(U.value,T.data,T)}}}}}P.execute(H,N,M,T)};D.push({func:Q,action:N})}})()}var C=function(K){var I=Appcelerator.Config["perfmon"];for(var J=0;J<D.length;J++){actionFunc=D[J];var M=null;if(I){M=new Date}actionFunc.func(K);if(I){var L=(new Date).getTime()-M.getTime();$MQ("l:perfmon.action",{id:H,action:actionFunc.action,time:L})}}};return C};Appcelerator.Compiler.convertMessageType=function(A){return Appcelerator.Util.ServiceBroker.convertType(A)};Appcelerator.Compiler.getMessageType=function(B){var A=Appcelerator.Compiler.parameterRE.exec(B);return Appcelerator.Compiler.convertMessageType(A&&A.length>0?A[1]:B)};Appcelerator.Compiler.fireServiceBrokerMessage=function(D,B,A,C){(function(){var I=A||{};var F=$(D);var E=null;var G=null;if(F){E=F.getAttribute("fieldset");G=F.scope}for(var K in I){var H=I[K];I[K]=Appcelerator.Compiler.getEvaluatedValue(H,I,C)}var J=B.startsWith("local:")||B.startsWith("l:");if(E){Appcelerator.Compiler.fetchFieldset(E,J,I)}if(J){if(I["id"]==null){I["id"]=D}if(I["element"]==null){I["element"]=$(I["id"])}}if(!G||G=="*"){G="appcelerator"}$MQ(B,I,G)}).defer()};Appcelerator.Compiler.fetchFieldset=function(J,H,C){if(!C){C={}}var E=Appcelerator.Compiler.fieldSets[J];if(E&&E.length>0){for(var G=0,F=E.length;G<F;G++){var D=E[G];var I=$(D);var A=I.getAttribute("name")||D;if(C[A]==null){if(I.type=="radio"&&!I.checked){continue}var B=Appcelerator.Compiler.getElementValue(I,true,H);var K=typeof (B);if(B!=null&&(K=="object"||B.length>0||K=="boolean")){C[A]=B}else{C[A]=""}}else{if(I.type!="radio"){Logger.warn('fieldset value for "'+A+'" ignored because it conflicts with existing data payload value')}}}}return C};Appcelerator.Compiler.getElementValue=function(E,H,C){E=$(E);H=(H==null)?true:H;var G=E.widget;if(G){if(E.widget.getValue){return E.widget.getValue(E.id,E.widgetParameters)}}else{switch(Appcelerator.Compiler.getTagname(E)){case"input":return Appcelerator.Compiler.getInputFieldValue(E,true,C);case"select":if(E.hasAttribute("multiple")){var D=[];var A=E.options;var F=E.options.length;for(var B=0;B<F;B++){if(A[B].selected){D.push(A[B].value)}}return D}break;case"img":case"iframe":return E.src;case"form":return""}if(E.value!=undefined){return E.value}return E.innerHTML}};Appcelerator.Compiler.getInputFieldValue=function(B,A,F){var G=Appcelerator.Compiler.getTagname(B);if(G!="input"&&G!="textarea"&&G!="select"){return null}F=F==null?true:F;A=(A==null)?false:A;var E=B.getAttribute("type")||"text";var H=Form.Element.Methods.getValue(B);switch(E){case"checkbox":return(H=="on"||H=="checked");case"password":if(!F){var I=B.getAttribute("hash");if(I){var D="";I.split(",").each(function(K){var J=$(I);if(J){D+=Appcelerator.Compiler.getInputFieldValue(J,false,true)}});var C=Appcelerator.Util.MD5.hex_md5(H+D);return{"hash":C,"auth":Appcelerator.Util.MD5.hex_md5(C+Appcelerator.Util.Cookie.GetCookie("appcelerator-auth"))}}}}return Appcelerator.Compiler.formatValue(H,!A)};Appcelerator.Compiler.getEvaluatedValue=function(I,F,J,D){if(I&&typeof (I)=="string"){if(!D&&I.charAt(0)=="$"){var E=I.substring(1);var B=$(E);if(B){return Appcelerator.Compiler.getElementValue(B,true)}}else{if(!D&&!isNaN(parseFloat(I))){return I}else{var G=D||Appcelerator.Compiler.expressionRE.exec(I);if(G){var H=D?I:G[1];var A=H.toFunction();var L=J?Object.clone(J):{};if(F){for(var C in F){if(Object.isString(C)){L[C]=F[C]}}}return A.call(L)}if(J){var K=Object.getNestedProperty(J,I,null);if(K){return K}}if(F){return Object.getNestedProperty(F,I,I)}}}}return I};Appcelerator.Compiler.formatValue=function(C,A){A=(A==null)?true:A;if(C!=null){var B=typeof (C);if(B=="boolean"||B=="array"||B=="object"){return C}if(C=="true"||C=="false"){return C=="true"}if(C.charAt(0)=="'"&&A){return C}if(C.charAt(0)=='"'){C=C.substring(1,C.length-1)}if(A){return"'"+C+"'"}return C}return""};Appcelerator.Compiler.dequote=function(A){if(A&&typeof A=="string"){if(A.charAt(0)=="'"||A.charAt(0)=='"'){A=A.substring(1)}if(A.charAt(A.length-1)=="'"||A.charAt(A.length-1)=='"'){A=A.substring(0,A.length-1)}}return A};Appcelerator.Compiler.convertInt=function(A){if(A.charAt(0)=="0"){if(A.length==1){return 0}return Appcelerator.Compiler.convertInt(A.substring(1))}return parseInt(A)};Appcelerator.Compiler.convertFloat=function(A){return parseFloat(A)};Appcelerator.Compiler.numberRe=/^[-+]{0,1}[0-9]+$/;Appcelerator.Compiler.floatRe=/^[0-9]*[\.][0-9]*[f]{0,1}$/;Appcelerator.Compiler.booleanRe=/^(true|false)$/;Appcelerator.Compiler.quotedRe=/^['"]{1}|['"]{1}$/;Appcelerator.Compiler.jsonRe=/^\{(.*)?\}$/;var STATE_LOOKING_FOR_VARIABLE_BEGIN=0;var STATE_LOOKING_FOR_VARIABLE_END=1;var STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER=2;var STATE_LOOKING_FOR_VALUE_BEGIN=3;var STATE_LOOKING_FOR_VALUE_END=4;var STATE_LOOKING_FOR_VALUE_AS_JSON_END=5;Appcelerator.Compiler.decodeParameterValue=function(C,B){var E=null;if(C!=null&&C.length>0&&!B){var A=Appcelerator.Compiler.jsonRe.exec(C);if(A){E=String(A[0]).evalJSON()}if(!E){var D=Appcelerator.Compiler.quotedRe.test(C);if(D){E=Appcelerator.Compiler.dequote(C)}else{if(Appcelerator.Compiler.floatRe.test(C)){E=Appcelerator.Compiler.convertFloat(C)}else{if(Appcelerator.Compiler.numberRe.test(C)){E=Appcelerator.Compiler.convertInt(C)}else{if(Appcelerator.Compiler.booleanRe.test(C)){E=(C=="true")}else{E=C}}}}}}if(C=="null"||E=="null"){return null}return E==null?C:E};Appcelerator.Compiler.parameterSeparatorRE=/[\$=:><!]+/;Appcelerator.Compiler.getParameters=function(M,L){if(M==null||M.length==0){return L?{}:[]}var K=/expr\((.*?)\)/;var B=K.test(M);if(!Appcelerator.Compiler.parameterSeparatorRE.test(M)&&!B){if(L){var W={};W[M]="";return W}else{return[{key:M,value:"",empty:true}]}}var E=0;var A="";var X=null;var V=L?{}:[];var J=false,U=false;var G=null;var T=B?{}:null;if(B){var H=function(d){var Y=d.indexOf("expr(");if(Y<0){return null}var Z=Y+5;var a=d.length-1;var l="";while(true){var m=d.indexOf(")",Z);if(m<0){break}l+=d.substring(Z,m);if(m==d.length-1){a=m+1;break}var h=false;var k=m+1;for(;k<d.length;k++){switch(d.charAt(k)){case",":a=k;h=true;break;case" ":break;default:Z=m+1;break}}if(k==d.length-1){a=k;break}if(h){break}l+=")"}var g=d.substring(Y,a);return[g,l]};var F=0;while(true){var N=H(M);if(!N){break}var P="__E__"+(F++);T[P]=N[1];M=M.replace(N[0],P)}}function O(Z,Y,a){if(Z&&Z.startsWith("__E__")){if(!L){return{key:T[Z],value:Y,keyExpression:true,valueExpression:false}}else{return T[Z]}}if(Y&&Y.startsWith("__E__")){if(!L){return{key:Z,value:T[Y],valueExpression:true,keyExpression:false}}else{return T[Y]}}var b=Appcelerator.Compiler.decodeParameterValue(Y,a);if(!L){return{key:Z,value:b}}return b}for(var S=0,Q=M.length;S<Q;S++){var I=M.charAt(S);var R=true;switch(I){case'"':case"'":switch(E){case STATE_LOOKING_FOR_VARIABLE_BEGIN:quoted=true;R=false;E=STATE_LOOKING_FOR_VARIABLE_END;J=I=='"';U=I=="'";break;case STATE_LOOKING_FOR_VARIABLE_END:var D=M.charAt(S-1);if(J&&I=="'"||U&&I=='"'){}else{if(D!="\\"){E=STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER;R=false;X=A.trim();A=""}}break;case STATE_LOOKING_FOR_VALUE_BEGIN:R=false;J=I=='"';U=I=="'";E=STATE_LOOKING_FOR_VALUE_END;break;case STATE_LOOKING_FOR_VALUE_END:var D=M.charAt(S-1);if(J&&I=="'"||U&&I=='"'){}else{if(D!="\\"){E=STATE_LOOKING_FOR_VARIABLE_BEGIN;R=false;if(L){V[X]=O(X,A,J||U)}else{V.push(O(X,A,J||U))}X=null;J=false,U=false;A=""}}break}break;case">":case"<":case"=":case":":if(E==STATE_LOOKING_FOR_VARIABLE_END){if(I=="<"||I==">"){X=A.trim();A="";E=STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER}}switch(E){case STATE_LOOKING_FOR_VARIABLE_END:R=false;E=STATE_LOOKING_FOR_VALUE_BEGIN;X=A.trim();A="";G=I;break;case STATE_LOOKING_FOR_VARIABLE_VALUE_MARKER:R=false;E=STATE_LOOKING_FOR_VALUE_BEGIN;G=I;break}break;case",":switch(E){case STATE_LOOKING_FOR_VARIABLE_BEGIN:R=false;E=STATE_LOOKING_FOR_VARIABLE_BEGIN;break;case STATE_LOOKING_FOR_VARIABLE_END:E=STATE_LOOKING_FOR_VARIABLE_BEGIN;R=false;if(L){V[A]=null}else{var C=O(X,A);C.operator=G;C.key=C.value;C.empty=true;V.push(C)}X=null;J=false,U=false;A="";break;case STATE_LOOKING_FOR_VALUE_END:if(!J&&!U){E=STATE_LOOKING_FOR_VARIABLE_BEGIN;R=false;if(L){V[X]=O(X,A,J||U)}else{var C=O(X,A);C.operator=G;V.push(C)}X=null;J=false,U=false;A=""}break}break;case" ":break;case"\n":case"\t":case"\r":R=false;break;case"{":switch(E){case STATE_LOOKING_FOR_VALUE_BEGIN:E=STATE_LOOKING_FOR_VALUE_AS_JSON_END}break;case"}":if(E==STATE_LOOKING_FOR_VALUE_AS_JSON_END){E=STATE_LOOKING_FOR_VARIABLE_BEGIN;R=false;A+="}";if(L){V[X]=O(X,A,J||U)}else{var C=O(X,A);C.operator=G;V.push(C)}X=null;J=false,U=false;A=""}break;default:switch(E){case STATE_LOOKING_FOR_VARIABLE_BEGIN:E=STATE_LOOKING_FOR_VARIABLE_END;break;case STATE_LOOKING_FOR_VALUE_BEGIN:E=STATE_LOOKING_FOR_VALUE_END;break}}if(R){A+=I}if(S+1==Q&&X){A=A.strip();if(L){V[X]=O(X,A,J||U)}else{var C=O(X,A);C.operator=G;V.push(C)}}}if(A&&!X){if(L){V[X]=null}else{var C=O(X,A);C.empty=true;C.key=C.value;C.operator=G;V.push(C)}}return V};Appcelerator.Compiler.executeAfter=function(D,A,B){var C=(B!=null)?function(){D(B)}:D;if(A>0){C.delay(A/1000)}else{C()}};Appcelerator.Compiler.handleElementException=function(C,D,B){var A=C?Appcelerator.Compiler.getTagname(C):document.body;var E="<strong>Appcelerator Processing Error:</strong><div>Element ["+A+"] with ID: "+(C.id||C)+" has an error: <div>"+Object.getExceptionDetail(D,true)+"</div>"+(B?"<div>in <pre>"+B+"</pre></div>":"")+"</div>";$E(E);if(A=="IMG"){new Insertion.Before(C,E)}else{C.innerHTML='<div style="border:4px solid #777;padding:30px;background-color:#fff;color:#e00;font-family:sans-serif;font-size:18px;margin-left:20px;margin-right:20px;margin-top:100px;text-align:center;">'+E+"</div>"}Element.show(C)};Appcelerator.Compiler.fieldSets={};Appcelerator.Compiler.addFieldSet=function(C,D,B){D=(D==null)?false:D;B=B||C.getAttribute("fieldset");if(B){var A=Appcelerator.Compiler.fieldSets[B];if(!A){A=[];Appcelerator.Compiler.fieldSets[B]=A}if(false==D){$D("adding = ",C.id," to field = ",B,", values=",A);A.push(C.id)}return A}return null};Appcelerator.Compiler.removeFieldSet=function(C){var B=C.getAttribute("fieldset");if(B){var A=Appcelerator.Compiler.fieldSets[B];if(A){A.remove(C.id)}}};Appcelerator.Compiler.updateFieldsetValues=function(K,J,I){var C=Object.getNestedProperty(J,I,null);if(!C){C=J}if(K){var E=Appcelerator.Compiler.fieldSets[K];if(E&&E.length>0){for(var G=0,F=E.length;G<F;G++){var D=E[G];var H=$(D);var A=H.name||H.getAttribute("name")||D;var B=Object.getNestedProperty(C,A,null);if(B!=null){Appcelerator.Compiler.setElementValue(H,B)}}}}};Appcelerator.Compiler.setElementValue=function(C,I){var A=false;var F=false;if(C&&I!=null){var E=C.widget;if(E){if(E.setValue){try{E.setValue(C.id,C.widgetParameters,I)}catch(G){$E(G)}}}else{switch(Appcelerator.Compiler.getTagname(C)){case"input":var H=C.getAttribute("type")||"text";switch(H){case"password":case"hidden":case"text":A=true;C.value=I;break;case"button":case"submit":C.value=I;break;case"checkbox":A=true;if(I==true||I=="true"){C.checked=true}else{C.checked=false}break;case"radio":A=true;if(I==C.getAttribute("value")){C.checked=true}else{C.checked=false}break}break;case"textarea":A=true;C.value=I;break;case"select":if(C.hasAttribute("multiple")){var J=Appcelerator.Util.makeSet(I);var K=C.options;for(var B=0;B<K.length;B++){var D=K[B];if(J[D.value]){if(!D.selected){D.selected=true;F=true;A=true}}else{if(D.selected){D.selected=false;F=true;A=true}}}}else{var K=C.options;for(var B=0;B<K.length;B++){if(K[B].value==I){C.selectedIndex=B;F=true;A=true;break}}}break;case"a":C.href=I;break;case"img":case"iframe":C.src=I;break;default:C.innerHTML=I;break}}}if(F){try{Event.cache[C._eventID]["change"][0]({})}catch(G){$D("failed to fire change listener for element: "+C.id)}}if(A){Appcelerator.Compiler.executeFunction(C,"revalidate")}};Appcelerator.Compiler.CSSAttributes=["color","cursor","font","font-family","font-weight","border","border-right","border-bottom","border-left","border-top","border-color","border-style","border-width","background","background-color","background-attachment","background-position","position","display","visibility","overflow","opacity","filter","top","left","right","bottom","width","height","margin","margin-left","margin-right","margin-bottom","margin-top","padding","padding-left","padding-right","padding-bottom","padding-top"];Appcelerator.Compiler.isCSSAttribute=function(C){if(C=="style"){return true}for(var F=0,A=Appcelerator.Compiler.CSSAttributes.length;F<A;F++){if(Appcelerator.Compiler.CSSAttributes[F]==C){return true}var D=Appcelerator.Compiler.CSSAttributes[F];var B=D.indexOf("-");if(B>0){var E=D.substring(0,B)+D.substring(B+1).capitalize();if(E==C){return true}}}return false};Appcelerator.Compiler.convertCSSAttribute=function(B){var A=B.indexOf("-");if(A>0){var C=B.substring(0,A)+B.substring(A+1).capitalize();return C}return B};Appcelerator.Util.ServerConfig.addConfigListener(function(){if(Appcelerator.Compiler.compileOnLoad){var A=Prototype.K;Appcelerator.Compiler.compileDocument(A)}});Appcelerator.Compiler.setHTML=function(B,A){$(B).innerHTML=A};var AppceleratorCompilerMethods={on:function(B,E,C){Appcelerator.Compiler.destroy(B);if(C){for(var A in C){if(Object.isString(A)){var D=C[A];if(Object.isString(D)||Object.isNumber(D)||Object.isBoolean(D)){B.setAttribute(A,D)}}}Appcelerator.Compiler.delegateToAttributeListeners(B)}Appcelerator.Compiler.compileExpression(B,E,false);return B},get:function(A){return $el(A)}};Element.addMethods(AppceleratorCompilerMethods);Object.extend(Array.prototype,{on:function(C,A){for(var D=0;D<this.length;D++){var B=this[D];if(B&&Object.isElement(B)&&Object.isFunction(B.on)){B.on(C,A)}}return this},withoutAll:function(A){return this.without.apply(this,A)}});Appcelerator.Compiler.macros={};Appcelerator.Compiler.macroRE=/(#[A-Za-z0-9_-]+(\[(.*)?\])?)/;Appcelerator.Compiler.processMacros=function(B,C,A){return B.gsub(Appcelerator.Compiler.macroRE,function(G){var K=G[0].substring(1);var H=K;var F=H.indexOf("[");var D=F>0?H.lastIndexOf("]"):-1;if(F>0&&D>0){H=H.substring(0,F)}var I=Appcelerator.Compiler.macros[H];if(I){A=A||{};if(F>0&&D>0){var E=K.substring(F+1,D);E.split(",").each(function(M){var L=M.split("=");A[L[0].trim()]=L[1].trim()})}if(C){var J=A["id"];if(Object.isUndefined(J)){A["id"]=C}}return Appcelerator.Compiler.processMacros(I(A),C,A)}return G[0]})};function $WEM(B){for(var A in B){var C=B[A];if(Object.isString(C)){Appcelerator.Compiler.macros[A]=Appcelerator.Compiler.compileTemplate(C)}}}Appcelerator.Util.Dom={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,eachAttribute:function(B,F,J,E){E=E==null?true:E;J=J||[];if(B.attributes){var A=B.attributes;for(var I=0,G=A.length;I<G;I++){var K=A[I];if(K&&K.value!=null&&E==K.specified){var H=typeof (K);if(K.value.startsWith("function()")){continue}if(H=="function"||H=="native"||K.name.match(/_moz\-/)){continue}if(J.length>0){var L=false;for(var D=0,C=J.length;D<C;D++){if(J[D]==K.name){L=true;break}}if(L){continue}}F(K.name,K.value,K.specified,I,A.length)}}return I>0}return false},getTagAttribute:function(B,E,A,D){try{var C=B.getElementsByTagName(E)[0].getAttribute(A);if(null!=C){return C}}catch(F){}return D},each:function(D,B,C){if(typeof (D)=="array"){D.each(function(H){if(H.nodeType==B){C(H)}})}else{if(typeof (D)=="object"||typeof (D)=="function"&&navigator.userAgent.match(/WebKit/i)){for(var G=0,A=D.length;G<A;G++){var F=D[G];if(typeof F.nodeType!="undefined"&&F.nodeType==B){try{C(F)}catch(E){if(E==$break){break}else{if(E!=$continue){throw E}}}}}}else{throw ("unsupported dom nodelist type: "+typeof (D))}}},getText:function(D,E,F,K,A){var J=[];var C=D.childNodes;var G=C?C.length:0;for(var H=0;H<G;H++){var B=C[H];if(F){B=F(B)}if(B.nodeType==this.COMMENT_NODE){if(!A){J.push("<!-- "+B.nodeValue+" -->")}continue}if(B.nodeType==this.ELEMENT_NODE){J.push(this.toXML(B,true,null,null,E,K,A))}else{if(B.nodeType==this.TEXT_NODE){var I=B.nodeValue;if(I){J.push(I);if(K){J.push("\n")}}}else{if(B.nodeValue==null){J.push(this.toXML(B,true,null,null,E,K,A))}else{J.push(B.nodeValue||"")}}}}return J.join("")},hasAttribute:function(D,F,B){if(!D.hasAttribute){if(D.attributes){for(var E=0,A=D.attributes.length;E<A;E++){var C=D.attributes[E];if(C&&C.specified){if(B&&C.name==F||!B&&C.name.toLowerCase()==F.toLowerCase()){return true}}}}return false}else{return D.hasAttribute(F)}},getAttribute:function(D,F,B){if(B){return D.getAttribute(F)}else{for(var E=0,A=D.attributes.length;E<A;E++){var C=D.attributes[E];if(C&&C.specified){if(C.name.toLowerCase()==F.toLowerCase()){return C.value}}}return null}},toXML:function(I,H,N,C,D,P,B){N=(N||I.nodeName.toLowerCase());var E=[];E.push("<"+N);if(C){E.push(" id='"+C+"' ")}if(I.attributes){var M=0;var A=I.attributes;for(var L=0,F=A.length;L<F;L++){var O=A[L];if(O&&O.value!=null&&O.specified){var K=typeof (O);if(O.value&&O.value.startsWith("function()")){continue}if(K=="function"||K=="native"||O.name.match(/_moz\-/)){continue}if(C!=null&&O.name=="id"){continue}if(Appcelerator.Browser.isIE&&!D&&O.name=="style"&&I.style&&I.style.cssText){var J=I.style.cssText;E.push(' style="'+J+'"');M++;continue}var G=String.escapeXML(O.value);if(Object.isUndefined(G)||(!G&&N=="input"&&O.name=="value")){G=""}E.push(" "+O.name+'="'+G+'"');M++}}}E.push(">");if(H&&I.childNodes&&I.childNodes.length>0){E.push("\n");E.push(this.getText(I,D,null,P,B))}E.push("</"+N+">"+(P?"\n":""));return E.join("")},getAndRemoveAttribute:function(B,A){var C=B.getAttribute(A);if(C){B.removeAttribute(A)}return C},getAttributesString:function(B,C){var A="";this.eachAttribute(B,function(D,E){if(false==(C&&C.indexOf(D)>-1)){A+=D+'="'+String.escapeXML(E||"")+'" '}},null,true);return A},createElement:function(B,A){var C=document.createElement(B);if(A){if(A["parent"]){A["parent"].appendChild(C)}if(A["className"]){C.className=A["className"]}if(A["html"]){C.innerHTML=A["html"]}if(A["children"]){A["children"].each(function(D){C.appendChild(D)})}}return C}};try{if(typeof (DOMNodeList)=="object"){DOMNodeList.prototype.length=DOMNodeList.prototype.getLength}if(typeof (DOMNode)=="object"){DOMNode.prototype.childNodes=DOMNode.prototype.getChildNodes;DOMNode.prototype.parentNode=DOMNode.prototype.getParentNode;DOMNode.prototype.nodeType=DOMNode.prototype.getNodeType;DOMNode.prototype.nodeName=DOMNode.prototype.getNodeName;DOMNode.prototype.nodeValue=DOMNode.prototype.getNodeValue}}catch(e){}Appcelerator.Util.Cookie=Class.create();Appcelerator.Util.Cookie={toString:function(){return"[Appcelerator.Util.Cookie]"},getCookieVal:function(B){var A=document.cookie.indexOf(";",B);if(A==-1){A=document.cookie.length}return unescape(document.cookie.substring(B,A))},GetCookie:function(D){var B=escape(D)+"=";var F=B.length;var A=document.cookie.length;var E=0;while(E<A){var C=E+F;var H=document.cookie.substring(E,C);if(H==B){var G=this.getCookieVal(C);if(G!=null&&G!=""){$D(this,"GetCookie",D+"="+G);return G}else{$D(this,"GetCookie",D+"=null");return null}}E=document.cookie.indexOf(" ",E)+1;if(E==0){break}}$D(this,"GetCookie",D+"=null");return null},SetCookie:function(B,H){var G=this.SetCookie.arguments;var E=this.SetCookie.arguments.length;var D=(E>2)?G[2]:null;var I=(E>3)?G[3]:null;var F=(E>4)?G[4]:null;var A=(E>5)?G[5]:false;var C=escape(B)+"="+escape(H)+((D==null)?"":("; expires="+D.toGMTString()))+((I==null)?"":("; path="+I))+((F==null)?"":("; domain="+F))+((A)?"; secure":"");$D(this,"SetCookie",C);document.cookie=C},DeleteCookie:function(){var D=new Date();D.setTime(D.getTime()+(-1*24*60*60*1000));var A="; expires="+D.toGMTString();var C=$A(arguments);var B=this;C.each(function(E){$D(B,"DeleteCookie",E);document.cookie=E+"="+A+"; path=/";document.cookie=E+"="+A+";"})},HasCookie:function(A){return this.GetCookie(A)!=null}};Appcelerator.Core.onload(function(){Appcelerator.Util.ServerConfig.addConfigListener(function(){if(window.location.protocol!="file:"){(function(){if(Appcelerator.Config["cookie_check"]){Appcelerator.Util.Cookie.SetCookie("CookieCheck","1");var A=Appcelerator.Util.Cookie.GetCookie("CookieCheck");if(!A){window.location=Appcelerator.DocumentPath+"upgrade_cookies.html"}else{Appcelerator.Util.Cookie.DeleteCookie("CookieCheck")}}})()}})});Appcelerator.Util.ServiceBroker={DEBUG:false,init:false,instanceid:Appcelerator.instanceid,serverPath:Appcelerator.DocumentPath+"servicebroker",interceptors:[],messageQueue:[],localMessageQueue:[],localTimer:null,localTimerPoll:10,initQueue:[],timer:null,time:null,serverDown:false,poll:false,fetching:false,localDirectListeners:{},remoteDirectListeners:{},localPatternListeners:[],remotePatternListeners:[],devmode:(window.location.href.indexOf("devmode=1")>0),disabled:this.devmode||(window.location.href.indexOf("file:/")!=-1)||Appcelerator.Parameters.get("mbDisabled")=="1",remoteDisabled:this.disabled||Appcelerator.Parameters.get("remoteDisabled")=="1",marshaller:"xml/json",transport:"appcelerator",multiplex:true,toString:function(){return"[ServiceBroker]"},addInterceptor:function(A){$D(this.toString()+" Adding interceptor: "+A);this.interceptors.push(A)},removeInterceptor:function(A){$D(this.toString()+"Removing interceptor: "+A);this.interceptors.remove(A)},convertType:function(A){if(A.startsWith("l:")){return"local:"+A.substring(2)}if(A.startsWith("r:")){return"remote:"+A.substring(2)}if(A.startsWith("*:")){return"both:"+A.substring(2)}return A},addListenerByType:function(I,H){I=this.convertType(I.trim());var G=I.indexOf(":");var E=(G!=-1)?(I.substring(0,G)):"both";var D=(G!=-1)?I.substring(G+1):I;var F=D.charAt(0)=="~";if(E=="local"||E=="both"){var C=null;if(F){this.localPatternListeners.push([H,new RegExp(D.substring(1))]);var B=H["_removePatternListenerArrays"];if(!B){B=[];H["_removePatternListenerArrays"]=B}B.push(this.localPatternListeners)}else{C=this.localDirectListeners[D];if(!C){C=[];this.localDirectListeners[D]=C}var A=H["_removeListenerArrays"];if(!A){A=[];H["_removeListenerArrays"]=A}A.push(C);C.push(H)}}if(E=="remote"||E=="both"){var C=null;if(F){this.remotePatternListeners.push([H,new RegExp(D.substring(1))]);var B=H["_removePatternListenerArrays"];if(!B){B=[];H["_removePatternListenerArrays"]=B}B.push(this.remotePatternListeners)}else{C=this.remoteDirectListeners[D];if(!C){C=[];this.remoteDirectListeners[D]=C}var A=H["_removeListenerArrays"];if(!A){A=[];H["_removeListenerArrays"]=A}A.push(C);C.push(H)}}},addListener:function(F){var D=new Date().getTime();var C=F["accept"];if(!C){alert("add listener problem, callback incorrect and has no accept function\n"+F);return }var B=C.call(F);if(B.length==1){this.addListenerByType(B[0],F)}else{for(var E=0,A=B.length;E<A;E++){this.addListenerByType(B[E],F)}}if(this.DEBUG){$D(this.toString()+" Added listener: "+F+" ("+(new Date().getTime()-D)+" ms)")}},removeListener:function(J){var A=new Date().getTime();var C=J["_removeListenerArrays"];if(C&&C.length>0){for(var H=0,E=C.length;H<E;H++){C[H].remove(J)}delete J["_removeListenerArrays"]}var D=J["_removePatternListenerArrays"];if(D&&D.length>0){for(var H=0,E=D.length;H<E;H++){var G=D[H];if(G&&G.length>0){var K=null;for(var I=0,B=G.length;I<B;I++){var F=G[I];if(F[0]==J){K=F;break}}if(K){G.remove(K)}}}}if(this.DEBUG){$D(this.toString()+" Removed listener: "+J+" ("+(new Date().getTime()-A)+" ms)")}},triggerComplete:function(){this.compileComplete=true;this.runInitQueue();this.startLocalTimer()},triggerConfig:function(){this.configComplete=true;this.runInitQueue()},runInitQueue:function(){if(this.compileComplete&&this.configComplete){this.init=true;if(this.initQueue&&this.initQueue.length>0){for(var A=0;A<this.initQueue.length;A++){this.queue(this.initQueue[A][0],this.initQueue[A][1])}this.initQueue=null}}},queue:function(B,M){if(!Appcelerator.Util.ServiceBroker.init){$D(B.type+" will be queued, not yet initialized");this.initQueue.push([B,M]);return }var J=B["type"];if(!J){throw"type must be specified on the message"}J=this.convertType(J);var O=B["scope"]||"appcelerator";var H=B["version"]||"1.0";if(this.interceptors.length>0){var D=true;for(var I=0,G=this.interceptors.length;I<G;I++){var F=this.interceptors[I];var C=F["interceptQueue"];if(C){var P=C.apply(F,[B,M,J,O,H]);if(this.DEBUG){$D(self.toString()+" Invoked interceptor: "+F+", returned: "+P+" for message: "+J)}if(P!=null&&!P){D=false;break}}}if(!D){$D(this+" interceptor squashed event: "+B["type"]);return }}var K=J.indexOf(":");var L=K!=-1?J.substring(0,K):"local";var A=K!=-1?J.substring(K+1):J;B["type"]=A;var E=(B["data"])?B["data"]:{};if(Logger.debugEnabled){var N=null;switch(typeof (E)){case"object":case"array":N=Object.toJSON(E);break;default:N=E.toString();break}$D(this+" message queued: "+A+", data: "+N+", version: "+H+", scope: "+O)}this.localMessageQueue.push([A,E,L,O,H]);if(L=="remote"){if(this.messageQueue){if(!this.devmode&&!this.remoteDisabled){this.queueRemote(B,M,O,H)}}else{$E(this+" message:"+A+" ignored since we don't have a messageQueue!")}}},queueRemote:function(C,D,B,A){this.messageQueue.push([C,D,B,A]);this.startTimer(C["immediate"]||false)},dispatch:function(B){var Q=B.requestid;var M=B.type;var G=B.datatype;var O=B.scope;var F=B.data;if(this.interceptors.length>0){var D=true;for(var L=0,I=this.interceptors.length;L<I;L++){var H=this.interceptors[L];var C=H["interceptDispatch"];if(C){var P=C.apply(H,[Q,M,B,G,O]);if(P!=null&&!P){D=false;break}}}if(!D){return }}var E=Appcelerator.Util.Performance.logStats?Appcelerator.Util.Performance.createStat():null;var J=this.remoteDirectListeners[M];if(J&&J.length>0){for(var L=0,I=J.length;L<I;L++){this.sendToListener(J[L],M,F,G,"remote",O)}}if(this.remotePatternListeners.length>0){for(var L=0,I=this.remotePatternListeners.length;L<I;L++){var N=this.remotePatternListeners[L];var A=N[0];var K=N[1];if(K.test(M)){this.sendToListener(A,M,F,G,"remote",O)}}}if(Appcelerator.Util.Performance.logStats){Appcelerator.Util.Performance.endStat(E,M,"remote")}},sendToListener:function(C,K,B,F,L,M){if(this.interceptors.length>0){var E=true;for(var J=0,H=this.interceptors.length;J<H;J++){var G=this.interceptors[J];var D=G.interceptSendToListener;if(D){var N=D.apply(G,[C,K,B,F,L,M]);if(N!=null&&!N){E=false;break}}}if(!E){return }}var A=C.acceptScope;if(A){if(!A(M)){return }}$D(this.toString()+" forwarding "+K+" to "+C+", direction:"+L+", datatype:"+F+", data: "+B);try{C.onMessage.apply(C,[K,B,F,L,M])}catch(I){$E("Unhandled Exception dispatching:"+K+", "+B+", to listener:"+C+", "+Object.getExceptionDetail(I))}return true},flush:function(){this.deliver(false,true)},deliver:function(D,B){if(this.messageQueue==null){$E(this.toString()+", deliver called but no message queue");return }if(this.remoteDisabled){return }var F=Appcelerator.Util.ServiceBrokerMarshaller[this.marshaller];if(!F){$E(this+" - no marshaller defined, will not send message to remote endpoint");this.remoteDisabled=true;return }var G=Appcelerator.Util.ServiceBrokerTransportHandler[this.transport];if(!G){$E(this+" - no transport handler defined, will not send message to remote endpoint");this.remoteDisabled=true;return }this.fetching=true;var K=F.serialize(this.messageQueue,this.multiplex);var I=K.postBody;var J=K.contentType;var H=G.prepare(this,D,I,J);if(this.multiplex){this.messageQueue.clear()}else{if(this.messageQueue.length>0){this.messageQueue.removeAt(0)}}var C=H.url;var A=H.method;var E=H.postBody;var J=H.contentType;this.sendRequest(C,A,E,J,F,G,B);if(!this.multiplex&&this.messageQueue.length>0){this.deliver.defer()}},sendRequest:function(C,A,G,I,E,F,H,B){H=(H||0)+1;if(H>3){$E("failed to send request too many times to "+C);return }var J=this;var D=false;new Ajax.Request(C,{asynchronous:!B,method:A,postBody:G,contentType:I,evalJSON:false,evalJS:false,onComplete:function(){J.fetching=false},onSuccess:function(K){(function(){J.fetching=false;J.startTimer(false);if(K&&K.status&&K.status>=200&&K.status<300){if(J.serverDown){J.serverDown=false;var M=new Date().getTime()-J.serverDownStarted;if(Logger.infoEnabled){Logger.info("["+Appcelerator.Util.DateTime.get12HourTime(new Date(),true,true)+"] "+J.toString()+" Server is UP at "+J.serverPath)}J.queue({type:"local:appcelerator.servicebroker.server.up",data:{path:this.serverPath,downtime:M}})}var L=parseInt(K.getResponseHeader("Content-Length")||"1");var P=K.getResponseHeader("Content-Type")||"unknown";if(L>0){var N=E.deserialize(K,parseInt(L),P);if(N&&N.length>0){for(var O=0;O<N.length;O++){J.localMessageQueue.push([N[O].type,N[O].data,"remote",N[O].scope,N[O].version||"1.0"])}}}}}).defer()},onFailure:function(N,L){if(N.status==400){if(D){J.queue({type:"l:appcelerator.servicebroker.failed",data:{}});Logger.warn("Failed authentication");return }else{D=true;var K=F.prepare(J,false,G,I);var M=K.url;J.sendRequest(M,A,G,I,E,F,H+1);return }}if(N.status==406){J.sendRequest(C,A,G,I,E,H);return }J.fetching=false;if(N.status>=500||N.status==404){J.serverDown=true;J.serverDownStarted=new Date().getTime();Logger.warn(J.toString()+" Server is DOWN at "+J.serverPath);J.queue({type:"local:appcelerator.servicebroker.server.down",data:{path:J.serverPath}})}else{$E(J.toString()+" Failure: "+N.status+" "+N.statusText)}J.startTimer(false)},onException:function(O,K){var N=new String(K);var L=true;var M=true;J.fetching=false;if(N.indexOf("NS_ERROR_NOT_AVAILABLE")!=-1&&N.indexOf("nsIXMLHttpRequest.status")!=-1){L=false}if(N.indexOf("NS_ERROR_FILE_NOT_FOUND")!=-1){M=false}if(L){$E(J.toString()+" Exception: "+N)}if(M){J.startTimer(false)}}})},destroy:function(){this.cancelTimer();this.cancelLocalTimer();if(this.messageQueue){this.messageQueue.clear()}if(this.localMessageQueue){this.localMessageQueue.clear()}this.messageQueue=null;this.time=null;if(this.localDirectListeners){for(var B in this.localDirectListeners){var A=this.localDirectListeners[B];if(Object.isArray(A)){A.clear()}}this.localDirectListeners=null}if(this.remoteDirectListeners){for(var B in this.remoteDirectListeners){var A=this.remoteDirectListeners[B];if(Object.isArray(A)){A.clear()}}this.remoteDirectListeners=null}if(this.localPatternListeners){this.localPatternListeners.clear()}this.localPatternListeners=null;if(this.remotePatternListeners){this.remotePatternListeners.clear()}this.remotePatternListeners=null},cancelLocalTimer:function(){if(this.locaTimer){clearInterval(this.locaTimer);this.locaTimer=0}},cancelTimer:function(){if(this.timer){clearTimeout(this.timer);this.timer=0}},onServiceBrokerInvalidContentType:function(A){if(Logger.fatalEnabled){Logger.fatal(this+", received an invalid content type ("+(A||"none")+"), probably need to re-login, redirecting to landing page")}},onServiceBrokerInvalidLogin:function(){if(Logger.fatalEnabled){Logger.fatal(this+", received an invalid credentials, probably need to re-login, redirecting to landing page")}},startLocalTimer:function(){this.localTimer=setInterval(function(){var F=this.localMessageQueue;if(F&&F.length>0){var O=F[0];var A=O[0];var D=O[1];var L=O[2];var N=O[3];var H=O[4];var E=Appcelerator.Util.Performance.logStats?Appcelerator.Util.Performance.createStat():null;switch(L){case"remote":var C=this.remoteDirectListeners[A];var M=this.remotePatternListeners;if(C){for(var J=0,G=C.length;J<G;J++){this.sendToListener(C[J],A,D,"JSON",L,N,H)}}if(M){for(var J=0,G=M.length;J<G;J++){var K=M[J];var B=K[0];var I=K[1];if(I.test(A)){this.sendToListener(B,A,D,"JSON",L,N,H)}}}break;case"local":C=this.localDirectListeners[A];M=this.localPatternListeners;if(C){for(var J=0,G=C.length;J<G;J++){this.sendToListener(C[J],A,D,"JSON",L,N,H)}}if(M){for(var J=0,G=M.length;J<G;J++){var K=M[J];var B=K[0];var I=K[1];if(I.test(A)){this.sendToListener(B,A,D,"JSON",L,N,H)}}}break}if(Appcelerator.Util.Performance.logStats){Appcelerator.Util.Performance.endStat(E,A,L)}F.remove(O)}}.bind(this),this.localTimerPoll)},startTimer:function(D){if(!this.init){$D(this.toString()+" - startTimer called but not running yet");return }if(this.disabled){return }this.cancelTimer();if(this.messageQueue){if(!this.poll){if(this.messageQueue.length>0&&!this.fetching){this.emptyQueueHits=0;this.deliver(true);return }return }if(D&&!this.fetching){this.emptyQueueHits=0;this.deliver(D);return }var B=new Date().getTime();if(this.time){if(this.messageQueue.length>0&&B-this.time>=150&&!this.fetching){this.emptyQueueHits=0;this.deliver(false);return }}this.time=B;var A=this;var C=this.downServerPoll;if(!this.serverDown){if(this.messageQueue.length>1){C=this.moreThanOneEntryQueuePoll;this.emptyQueueHits=0}else{if(this.messageQueue.length>0){C=this.oneEntryQueuePoll;this.emptyQueueHits=0}else{C=Math.min(this.emptyQueuePollMax,this.emptyQueuePoll+(this.emptyQueueHits*this.emptyQueueDecay));this.emptyQueueHits++}}}this.timer=setTimeout(function(){if(!A.fetching){A.deliver(false)}},C)}else{$E(toString()+" startTimer called and we have no message queue")}},maxWaitPollTime:200,maxWaitPollTimeWhenSending:0,moreThanOneEntryQueuePoll:50,oneEntryQueuePoll:200,emptyQueuePoll:2000,emptyQueuePollMax:30000,emptyQueueDecay:500,emptyQueueHits:0,downServerPoll:10000};function $MQ(C,D,B,A){Appcelerator.Util.ServiceBroker.queue({type:C,data:D||{},scope:B,version:A||"1.0"})}function $MQL(B,E,D,A){var C={accept:function(){if(Object.isArray(B)){return B}return[B]},acceptScope:function(F){if(D){return D=="*"||F==D}return true},onMessage:function(H,J,G,K,F){try{E.apply(E,[H,J,G,K,F])}catch(I){Appcelerator.Compiler.handleElementException(A,I,"service broker handling => "+K+":"+H+" ("+Object.toJSON(J)+"), tried invoking function:"+E)}}};Appcelerator.Util.ServiceBroker.addListener(C);if(A){Appcelerator.Compiler.addTrash(A,function(){Appcelerator.Util.ServiceBroker.removeListener(C)})}return C}if(APPCELERATOR_DEBUG_LEVEL=="2"){$MQL("*:~.*",function(C,D,B,E,A){Logger.info("Message Type: "+E+":"+C+"\nMessage Data: "+Object.toJSON(D))})}Appcelerator.Util.ServiceBrokerMarshaller={};Appcelerator.Util.ServiceBrokerMarshaller["xml/json"]={currentRequestId:1,jsonify:function(G){var E=this.currentRequestId++;var D=G[2];var A=G[3];var C="JSON";var F=G[0]["data"];var B="<message requestid='"+E+"' type='"+G[0]["type"]+"' datatype='"+C+"' scope='"+D+"' version='"+A+"'>";B+="<![CDATA["+Object.toJSON(F)+"]]>";B+="</message>";return B},serialize:function(I,A){var D=null;if(I.length>0){D="";var B=new Date();var G=B.getTime();D="<?xml version='1.0' encoding='UTF-8'?>\n";var C=B.getTimezoneOffset()/60;var E=Appcelerator.Util.IdleManager.getIdleTimeInMS();D+="<request version='1.0' idle='"+E+"' timestamp='"+G+"' tz='"+C+"'>\n";if(A){for(var H=0,F=I.length;H<F;H++){D+=this.jsonify(I[H])}}else{D+=this.jsonify(I[0])}D+="</request>"}return{"postBody":D,"contentType":"text/xml"}},deserialize:function(D,B,L){if(D.status==202){return null}if(L.indexOf("text/xml")==-1&&L.indexOf("application/xml")==-1){$E(this+", invalid content type: "+L+", expected: text/xml or application/xml");return null}var G=D.responseXML;if(!G){return null}var C=G.documentElement.childNodes;var K=null;if(C&&C.length>0){K=[];for(var J=0;J<C.length;J++){var A=C.item(J);if(A.nodeType==Appcelerator.Util.Dom.ELEMENT_NODE){var O=A.getAttribute("requestid");try{var I=A.getAttribute("type");var F=A.getAttribute("datatype");var N=A.getAttribute("scope")||"appcelerator";var E,M;try{M=Appcelerator.Util.Dom.getText(A);E=M.evalJSON();E.toString=function(){return Object.toJSON(this)}}catch(H){$E("Error received evaluating: "+M+" for type: "+I+", error: "+Object.getExceptionDetail(H));return }$D(this.toString()+" received remote message, type:"+I+",data:"+E);K.push({type:I,data:E,datatype:F,scope:N,requestid:O})}catch(H){$E(this+" - Error in dispatch of message. "+Object.getExceptionDetail(H))}}}}return K}};Appcelerator.Util.ServiceBrokerMarshaller["application/json"]={prepareMsg:function(B){var A={};A["type"]=B[0]["type"];A["scope"]=B[2];A["version"]=B[3];A["data"]=B[0]["data"];return A},serialize:function(D,C){var B={};if(D.length>0){var E={};var F=new Date();B["timestamp"]=F.getTime()+(F.getTimezoneOffset()*60*1000);B["version"]="1.0";B["messages"]=[];if(C){for(var G=0,A=D.length;G<A;G++){B["messages"].push(this.prepareMsg(D[G]))}}else{B["messages"].push(this.prepareMsg(D[0]))}}return{"postBody":Object.toJSON(B),"contentType":"application/json"}},deserialize:function(B,A,J){if(B.status==202){return null}if(J.indexOf("application/json")==-1){$E(this+", invalid content type: "+J+", expected: application/json");return null}var M=B.responseText.evalJSON();var C=M["messages"];var I=[];for(var H=0;H<C.length;H++){try{var L=C[H];var G=L["type"];var E=L["datatype"];var K=L["scope"]||"appcelerator";var D=L["data"];L["datatype"]="JSON";$D(this.toString()+" received remote message, type:"+G+",data:"+D);I.push({type:G,data:D,datatype:E,scope:K})}catch(F){$E(this+" - Error in dispatch of message. "+Object.getExceptionDetail(F))}}return I}};function jsonParameterEncode(A,B,E){switch(typeof (B)){case"string":case"number":case"boolean":E.push(A+"="+encodeURIComponent(B));break;case"array":case"object":if(Object.isArray(B)){for(var D=0;D<B.length;D++){jsonParameterEncode(A+"."+D,B[D],E)}}else{for(var C in B){jsonParameterEncode(A+"."+C,B[C],E)}}break;case"function":break;default:E.push(encodeURIComponent(A)+"=");break}}function jsonToQueryParams(B){var C=[];for(var A in B){var D=B[A];jsonParameterEncode(A,D,C)}return C.join("&")}function json_encode_xml(C,A){var E={};var D=A[C.nodeName];if(D){if(Object.isArray(D)){D.push(E)}else{A[C.nodeName]=[D,E]}}else{A[C.nodeName]=E}Appcelerator.Util.Dom.eachAttribute(C,function(G,H){E[G]=H});var B=false;Appcelerator.Util.Dom.each(C.childNodes,Appcelerator.Util.Dom.ELEMENT_NODE,function(G){json_encode_xml(G,E);B=true});if(!B){var F=Appcelerator.Util.Dom.getText(C);A[C.nodeName]=F}}Appcelerator.Util.ServiceBrokerMarshaller["application/x-www-form-urlencoded"]={currentRequestId:1,parameterize:function(G){var D=this.currentRequestId++;var C=G[2];var A=G[3];var B="JSON";var E=G[0]["data"];var F="$messagetype="+G[0]["type"]+"&$requestid="+D+"&$datatype="+B+"&$scope="+C+"&$version="+A;if(E){F+="&"+jsonToQueryParams(E)}return F},serialize:function(D,C){var B=null;if(D.length>0){B="";if(C){for(var E=0,A=D.length;E<A;E++){B+=this.parameterize(D[E])}}else{B+=this.parameterize(D[0])}}return{"postBody":B,"contentType":"application/x-www-form-urlencoded"}},deserialize:function(A,B,C){if(A.status==202){return null}if(C.indexOf("/json")==-1){$E(this+", invalid content type: "+C+", expected json mimetype");return null}return A.responseText.evalJSON(true)}};Appcelerator.Util.ServiceBrokerTransportHandler={};Appcelerator.Util.ServiceBrokerTransportHandler["appcelerator"]={prepare:function(G,C,F,I){var E=Appcelerator.ServerConfig["sessionid"].value||"JSESSIONID";var H=Appcelerator.Util.Cookie.GetCookie(E);var D=(H)?Appcelerator.Util.MD5.hex_md5(H+G.instanceid):"";var J="?maxwait="+((!C&&F)?G.maxWaitPollTime:G.maxWaitPollTimeWhenSending)+"&instanceid="+G.instanceid+"&auth="+D+"&ts="+new Date().getTime();var B=G.serverPath+J;var A=F?"post":"get";return{"url":B,"method":A,"postBody":F||"","contentType":I}}};Appcelerator.Util.ServiceBrokerInterceptor=Class.create();Object.extend(Appcelerator.Util.ServiceBrokerInterceptor.prototype,{initialize:function(){},toString:function(){return"[Appcelerator.Util.ServiceBrokerInterceptor]"},interceptQueue:function(A,B){return true},interceptDispatch:function(C,B,D,A){return true},interceptSendToListener:function(C,B,D,A){return true}});if(Appcelerator.Util.ServiceBroker.disabled||Appcelerator.Util.ServiceBroker.remoteDisabled){Appcelerator.Util.ServiceBroker.triggerConfig();Logger.warn("[ServiceBroker] remote delivery of messages is disabled")}else{Appcelerator.Util.ServerConfig.addConfigListener(function(){var A=Appcelerator.ServerConfig["servicebroker"];if(!A||A["disabled"]=="true"){Appcelerator.Util.ServiceBroker.disabled=true;Appcelerator.Util.ServiceBroker.remoteDisabled=true;Appcelerator.Util.ServiceBroker.triggerConfig();Logger.warn("[ServiceBroker] remote delivery of messages is disabled");return }Appcelerator.Util.ServiceBroker.serverPath=A.value;Appcelerator.Util.ServiceBroker.poll=(A.poll=="true");Appcelerator.Util.ServiceBroker.multiplex=A.multiplex?(A.multiplex=="true"):true;Appcelerator.Util.ServiceBroker.transport=A.transport||Appcelerator.Util.ServiceBroker.transport;Appcelerator.Util.ServiceBroker.marshaller=A.marshaller||Appcelerator.Util.ServiceBroker.marshaller;var C=Appcelerator.ServerConfig["sessionid"].value||"unknown_cookie_name";var B=Appcelerator.Util.Cookie.GetCookie(C);if(!B){new Ajax.Request(Appcelerator.Util.ServiceBroker.serverPath+"?initial=1",{asynchronous:true,method:"get",evalJSON:false,evalJS:false,onSuccess:function(D){Appcelerator.Util.ServiceBroker.triggerConfig();Appcelerator.Util.ServiceBroker.startTimer();Logger.info("ServiceBroker ready")}});return }Appcelerator.Util.ServiceBroker.triggerConfig();Appcelerator.Util.ServiceBroker.startTimer();Logger.info("ServiceBroker ready")})}Appcelerator.Core.onunload(Appcelerator.Util.ServiceBroker.destroy.bind(Appcelerator.Util.ServiceBroker));Appcelerator.Compiler.afterDocumentCompile(function(){Appcelerator.Util.ServiceBroker.triggerComplete()});Appcelerator.Util.Performance=Class.create();Appcelerator.Util.Performance={logStats:(window.location.href.indexOf("logStats=1")>0),stats:$H({}),createStat:function(){if(this.logStats){return new Date()}},endStat:function(H,C,D,E){if(this.logStats){var G=C;if(D){G=G+"."+D}else{D=""}var A=new Date();var B=this.stats.get(G);var F=(A.getTime()-H.getTime());if(!B){var B={"type":C,"category":D,"hits":0,"mean":0,"min":F,"max":F,"total":0};this.stats.set(G,B)}B.hits++;B.last=F;B.total+=F;B.mean=B.total/B.hits;B.max=(B.last>B.max?B.last:B.max);B.min=(B.last<B.min?B.last:B.min);Logger.info("stats: "+C+" last:"+B.last+"ms mean:"+B.mean+"ms hits:"+B.hits+" min:"+B.min+"ms max:"+B.max+"ms total:"+B.total+"ms")}},reset:function(C,A,B){this.stats=$H({})}};$MQL("l:get.performance.request",function(B,C,A,D){$MQ("l:get.performance.response",{"stats":Appcelerator.Util.Performance.stats.values()})});$MQL("l:reset.performance.request",function(B,C,A,D){Appcelerator.Util.Performance.reset()});Appcelerator.Types={};Appcelerator.Types.enumeration=function(){var A="^("+$A(arguments).join(")|(")+")$";return{name:"Enumeration",values:$A(arguments),regex:RegExp(A)}};Appcelerator.Types.openEnumeration=function(){var A="^("+$A(arguments).join(")|(")+")|(.*)$";return{name:"Enumeration",values:$A(arguments),regex:RegExp(A)}};Appcelerator.Types.pattern=function(B,A){A=A||"pattern";return{name:A,regex:B}};Appcelerator.Types.bool=Appcelerator.Types.enumeration("true","false");Appcelerator.Types.bool.name="Boolean";Appcelerator.Types.number=Appcelerator.Types.pattern(/^-?[0-9]+(\.[0-9]+)$/,"Number");Appcelerator.Types.naturalNumber=Appcelerator.Types.pattern(/[0-9]+/,"Natural Number");Appcelerator.Types.cssDimension=Appcelerator.Types.pattern(/^-?[0-9]+(\.[0-9]+)(%|(em)|(en)|(px)|(pc)|(pt))?$/,"CSS Dimension");Appcelerator.Types.identifier=Appcelerator.Types.pattern(/^[a-zA-Z_][a-zA-Z0-9_.]*$/,"Identifier");Appcelerator.Types.messageSend=Appcelerator.Types.pattern(/^((l:)|(r:)|(local:)|(remote:))[a-zA-Z0-9_.]+/,"Appcelerator Message Send");Appcelerator.Types.messageReceive=Appcelerator.Types.pattern(/^((l:)|(r:)|(local:)|(remote:))((~.+)|([a-zA-Z0-9_.]+))/,"Appcelerator Message Reception");Appcelerator.Types.onExpr={name:"On Expression"};Appcelerator.Types.fieldset={name:"Fieldset"};Appcelerator.Types.json={name:"JSON Object"};Appcelerator.Types.javascriptExpr={name:"Javascript Expression"};Appcelerator.Types.pathOrUrl={name:"Path or url to resource"};Appcelerator.Types.cssClass={name:"CSS Class name"};Appcelerator.Types.color={name:"Color value"};Appcelerator.Types.time={name:"Time value"};Appcelerator.Types.elementId={name:"Element Id"};Appcelerator.Types.commaSeparated={name:"Comma Separated Values"};Appcelerator.Types.languageId={name:"Localization String Id"};Appcelerator.Types.isInstance=function(C,A){if(A.regex){return A.regex.match(C)}switch(A){case Appcelerator.Types.onExpr:try{var B=Appcelerator.Compiler.parseExpression(C);return B&&B.length>0}catch(D){return false}case Appcelerator.Types.time:return C&&!isNaN(Appcelerator.Util.DateTime.timeFormat(C));case Appcelerator.Types.fieldset:return true;default:return true}};Appcelerator.Types.getTypeId=function(A){try{return $H(Appcelerator.Types).find(function(C){return C[1]==A})[0]}catch(B){return null}};Appcelerator.Compiler.registerCustomAction("show",{execute:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;Element.show(A)}else{Element.show(E)}}});Appcelerator.Compiler.registerCustomAction("hide",{execute:function(G,D,E){if(E&&E.length>0){var A=false;var B=null;for(var F=0;F<E.length;F++){if(E[F].key=="optional"){A=E[F].value;continue}if(E[F].key=="id"){B=E[F].value;continue}if(!B){B=E[F].key}}if(!B&&!A){throw"no key specified for hide action"}var C=$(B);if(!C&&!A){throw"no element with id: "+B+" found for hide action"}if(C){Element.hide(C)}}else{Element.hide(G)}}});Appcelerator.Compiler.registerCustomAction("visible",{execute:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;Element.setStyle(A,{visibility:"visible"})}else{Element.setStyle(E,{visibility:"visible"})}}});Appcelerator.Compiler.registerCustomAction("hidden",{execute:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;Element.setStyle(A,{visibility:"hidden"})}else{Element.setStyle(E,{visibility:"hidden"})}}});Appcelerator.Compiler.effects=$H(Effect).select(function(C){var B=C[0];var D=C[1];var A=B.charAt(0).toLowerCase()+B.substring(1);return Effect.Methods[A]||D.superclass==Effect.Base}).pluck("0");Appcelerator.Compiler.effects.push("ScrollTo");Appcelerator.Compiler.customEffects={};Appcelerator.Compiler.registerCustomEffect=function(A,B){Appcelerator.Compiler.customEffects[A]=B};Appcelerator.Compiler.getMoveByOpts=function(C){var A=Appcelerator.Compiler.findParameter(C,"x");A=(A==null)?0:A;var D=Appcelerator.Compiler.findParameter(C,"y");D=(D==null)?0:D;var B=Appcelerator.Compiler.findParameter(C,"duration");B=(B==null)?2:B;return{"x":A,"y":D,"duration":B}};Appcelerator.Compiler.registerCustomEffect("Bounce",function(B,A){opts=Appcelerator.Compiler.getMoveByOpts(A);new Effect.MoveBy($(B),opts["x"],opts["y"],{duration:opts["duration"],transition:Effect.Transitions.SwingTo})});Appcelerator.Compiler.registerCustomEffect("Bang",function(B,A){opts=Appcelerator.Compiler.getMoveByOpts(A);new Effect.MoveBy($(B),opts["x"],opts["y"],{duration:opts["duration"],transition:Effect.Transitions.Bounce})});Appcelerator.Compiler.registerCustomAction("effect",{metadata:{requiresParameters:true,shorthandParameters:true,optionalParameterKeys:Appcelerator.Compiler.effects,description:"Invokes a visual effect on this element"},execute:function(id,action,params){if(params&&params.length>0){var arg1=params[0].key.split(",");var effectName=arg1[0];effectName=effectName.dasherize().camelize();effectName=effectName.charAt(0).toUpperCase()+effectName.substring(1);var options={};var target=id;if(params.length>1){for(var c=1;c<params.length;c++){if(params[c].key=="id"){target=params[c].value;options["id"]=target}else{if(params[c].key=="transition"){var t=params[c].value;if(!t.startsWith("Effect.Transitions.")){var error=false;var x=0;while(x<1){x=1;eval("try { "+t+"; error = false;} catch(e) { error = true; }");if(error){t="Effect.Transitions."+t}else{break}}}var f=Object.evalWithinScope(t,{});if(Object.isFunction(f)){options[params[c].key]=f}}else{options[params[c].key]=params[c].value}}}}if(Appcelerator.Compiler.customEffects[effectName]){var f=Appcelerator.Compiler.customEffects[effectName];f(id,options)}else{if(Appcelerator.Compiler.effects.indexOf(effectName)!=-1){Element.visualEffect(target,effectName,options)}else{throw"syntax error: unsupported effect type: "+effectName}}}else{throw"syntax error: effect action must have parameters."}}});Appcelerator.Compiler.registerCustomAction("toggle",{metadata:{requiresParameters:true,description:"Toggles a CSS property, CSS Class, or boolean attribute on this element"},execute:function(A,E,D){if(D&&D.length>0){var F=D[0];var J=F.key;var C=F.value;var B=null;if(J=="class"){if(Element.hasClassName(A,C)){Element.removeClassName(A,C)}else{Element.addClassName(A,C)}}else{if(Appcelerator.Compiler.isCSSAttribute(J)){J=Appcelerator.Compiler.convertCSSAttribute(J);switch(J){case"display":case"visibility":var G="";if(!C){C=(J=="display")?"block":"visible"}switch(C){case"inline":G="none";break;case"block":G="none";break;case"none":G="block";break;case"hidden":G="visible";break;case"visible":G="hidden";break}var H=Element.getStyle(A,J);var D={};if(H!=G){D[J]=G}else{D[J]=C}Element.setStyle(A,D);break;default:var H=Element.getStyle(A,J);var D={};if(H){D[J]=""}else{D[J]=C}Element.setStyle(A,D);break}}else{var H=$(A);if(!H){throw"no element with ID: "+A}var I=H.getAttribute(J);if(I){H.removeAttribute(J)}else{H.setAttribute(J,C)}}}}else{throw"syntax error: toggle action must have parameters"}}});Appcelerator.Compiler.generateSetter=function(B,A){if(A){return Appcelerator.Compiler.getEvaluatedValue(B,A.data||{})}else{return Appcelerator.Compiler.getEvaluatedValue(B,{})}};Appcelerator.Compiler.findTargetFromParams=function(E,C){var B=E;if(C&&C.length>0){for(var D=0;D<C.length;D++){var A=C[D];if(A.key=="id"){B=A.value;break}}}return $(B)};(function(){var A=function(B,E,D,N){if(D.length==0){throw"syntax error: expected parameter key:value for action: "+E}var K=null;var I=Appcelerator.Compiler.findTargetFromParams(B,D);for(var J=0;J<D.length;J++){var G=D[J];var M=G.key;if(!Object.isString(M)){continue}var L=G.value;if(Appcelerator.Compiler.isCSSAttribute(M)){M=Appcelerator.Compiler.convertCSSAttribute(M);if(!K){K={}}K[M]=Appcelerator.Compiler.generateSetter(L,N);continue}else{if(M=="class"){if(E=="set"){$(I).className=Appcelerator.Compiler.generateSetter(L,N)}Element.addClassName(B,Appcelerator.Compiler.generateSetter(L,N))}else{if(M.startsWith("style")){$(I)[M]=Appcelerator.Compiler.generateSetter(L,N)}else{var H=$(I);if(!H){throw"syntax error: element with ID: "+I+" doesn't exist"}if(H.nodeName=="IFRAME"&&M=="src"){var C=H.getAttribute("onloaded");if(C){Appcelerator.Util.IFrame.monitor(H,function(){$MQ(C,{},H.scope)})}}if(H[M]!=null){switch(M){case"checked":case"selected":case"disabled":case"defaultChecked":var L=Appcelerator.Compiler.generateSetter(L,N);if(L){H.setAttribute(M,L)}else{H.removeAttribute(M)}break;default:var F=Appcelerator.Browser.isOpera&&H.nodeName=="IFRAME"&&M=="src";if(F){H.location.href=Appcelerator.Compiler.generateSetter(L,N)}else{H[M]=Appcelerator.Compiler.generateSetter(L,N)}}}else{H.setAttribute(M,Appcelerator.Compiler.generateSetter(L,N))}}}}}if(K){Element.setStyle(I,K)}};Appcelerator.Compiler.registerCustomAction("add",{metadata:{description:"Add a CSS property or attribute on this element"},execute:A});Appcelerator.Compiler.registerCustomAction("set",{metadata:{description:"Set a CSS property or attribute on this element"},execute:A})})();Appcelerator.Compiler.registerCustomAction("remove",{execute:function(H,D,F){if(F.length==0){throw"syntax error: expected parameter for action: "+D}var E=Appcelerator.Compiler.findTargetFromParams(H,F);var B=null;var C=null;var A=false;for(var G=0;G<F.length;G++){if(F[G].key=="id"){continue}if(F[G].key=="optional"){A=F[G].value;continue}if(!B){B=F[G].key;C=F[G].value}}if(!B&&!A){throw"couldn't find key to remove"}if(B){switch(B){case"class":Element.removeClassName(E,Appcelerator.Compiler.formatValue(C,false));break;default:E.removeAttribute(B)}}}});Appcelerator.Compiler.registerCustomAction("statechange",{metadata:{requiresParameters:true},execute:function(D,B,C){if(C.length==0){throw"syntax error: expected parameters in format 'statechange[statemachine=state]'"}var A=C.map(function(G){var E=G.key;var F=G.value;Appcelerator.Compiler.StateMachine.fireStateMachineChange(E,F,true,true,false)})}});(function(){var scriptBuilderAction={metadata:{requiresParameters:true,description:"Executes a line of javascript"},parseParameters:function(id,action,params){return params},execute:function(id,action,params,scope){var f=function(){eval(params)}.bind(scope);f()}};Appcelerator.Compiler.registerCustomAction("javascript",scriptBuilderAction);Appcelerator.Compiler.registerCustomAction("function",scriptBuilderAction);Appcelerator.Compiler.registerCustomAction("script",scriptBuilderAction)})();Appcelerator.Compiler.findParameter=function(C,A){if(C){if(C[A]){return C[A]}else{if(C.length>0){for(var D=0;D<C.length;D++){var B=C[D];if(B.key==A){return B.value}}}}}return null};Appcelerator.Compiler.registerCustomAction("selectOption",{execute:function(A,D,C,K){if(C.length==0){throw"syntax error: expected parameter property for action: "+D}var I=$(A);if(!I.options){throw"syntax error: selectOption must apply to a select tag"}var J=C[0].key;var B=C[0].value||J;if(B=="$null"){B=""}var H=Object.getNestedProperty(K.data,J,B);var F=$(A);var G=Object.isArray(H);F.selectedIndex=-1;for(var E=0;E<F.options.length;E++){if(G){F.options[E].selected=H.include(F.options[E].value)}else{if(F.options[E].value==H){F.selectedIndex=E;break}}}Appcelerator.Compiler.executeFunction(F,"revalidate")}});var ResetAction={execute:function(A,E,D){var H=Appcelerator.Compiler.findParameter(D,"id")||A;var G=$(H);var B=false;var C=null;var G=$(H);var F="";var I="";switch(Appcelerator.Compiler.getTagname(G)){case"input":case"textarea":G.value=I;B=true;break;case"select":G.selectedIndex=0;B=true;break;case"img":G.src="";break;case"a":G.href="#";break;case"form":Form.reset(H);Form.Methods.getInputs(H).each(function(J){Appcelerator.Compiler.executeFunction(J,"revalidate")});return ;default:G.update(I);return }if(B){Appcelerator.Compiler.executeFunction(G,B)}}};Appcelerator.Compiler.registerCustomAction("clear",ResetAction);Appcelerator.Compiler.registerCustomAction("reset",ResetAction);var ResetFormAction={execute:function(G,D,F){var E=Appcelerator.Compiler.findParameter(F,"id")||G;var A=$(E);var C=null;var B=null;switch(Appcelerator.Compiler.getTagname(A)){case"form":$(E).reset();break;case"input":case"select":case"textarea":default:$(E).form.reset();break}}};Appcelerator.Compiler.registerCustomAction("clearform",ResetFormAction);Appcelerator.Compiler.registerCustomAction("value",{metadata:{requiresParameters:true,requiredParameterKeys:["value"],optionalParameterKeys:["text","append","id","property"],description:"Sets the value of the current element with data from the message payload"},execute:function(U,X,g,C){var E=Appcelerator.Compiler.findTargetFromParams(U,g);var F=null;var a=false;var D=false;var k=null;var V=null;if(g){for(var d=0,Z=g.length;d<Z;d++){var L=g[d];switch(L.key){case"append":a=true;break;case"value":F=L.value;break;default:k=L.key;V=L.value;if(L.empty){if(k.startsWith("'")&&k.endsWith("'")){V=Appcelerator.Compiler.dequote(L.key);V=null}}}}}if(!k&&!F){k=g[0].key;V=g[0].value}if(!F){if(!V&&k&&k.startsWith("'")&&k.endsWith("'")){F=Appcelerator.Compiler.dequote(k)}else{if(!V){F=Object.getNestedProperty(C,k)}else{if(V){if(typeof (V)=="object"){F=Object.getNestedProperty(V,k)}else{F=V}}}}}var Q="";var Y="";var S="";var M=false;switch(Appcelerator.Compiler.getTagname(E)){case"input":M=true;var G=E.getAttribute("type")||"text";switch(G){case"password":case"hidden":case"text":Y="value";break;case"checkbox":Y="checked";a=false;S="==true || "+F+"=='true'";break;case"button":case"submit":Y="value";break}break;case"textarea":M=true;Y="value";break;case"select":var B="";var K=Appcelerator.Compiler.findParameter(g,"property");var J=Appcelerator.Compiler.findParameter(g,"row");var V=Appcelerator.Compiler.findParameter(g,"value");var R=Appcelerator.Compiler.findParameter(g,"text");if(!K){throw"required parameter named 'property' not found in value parameter list"}if(!V){throw"required parameter named 'value' not found in value parameter list"}if(!R){R=V}if(!a){E.options.length=0}var T=Appcelerator.Compiler.generateSetter(K,C);if(T){for(var d=0;d<T.length;d++){if(J){var O=Object.getNestedProperty(T[d],J)}else{var O=T[d]}if(O){E.options[E.options.length]=new Option(Object.getNestedProperty(O,R),Object.getNestedProperty(O,V))}}}Appcelerator.Compiler.executeFunction(E,"revalidate");return ;case"div":case"span":case"p":case"a":case"h1":case"h2":case"h3":case"h4":case"h5":case"td":case"code":case"li":case"blockquote":Y="innerHTML";break;case"img":case"iframe":a=false;Y="src";break;case"form":var P=U+"_no_submit";if(!$(P)){var H=document.createElement("input");H.id=P;H.type="text";H.style.display="none";H.name="no_submit_guarantee";E.appendChild(H)}D=true;var W="value["+k+"]";var b=this.findMatchingFormClause(E,W);var N=E.descendants();for(var d=0;d<N.length;d++){var I=N[d];Appcelerator.Compiler.getAndEnsureId(I);var A;switch(Appcelerator.Compiler.getTagname(I)){case"select":case"textarea":case"input":A=I.getAttribute("name")||I.id||"";break;default:A=I.getAttribute("name")||""}if(A){var X="value["+k+"."+A+"]";Appcelerator.Compiler.handleCondition.call(this,[I,true,X,C,null,null])}}break;default:throw"syntax error: "+E.nodeName+" not supported for value action"}if(!D){if(a){var h=E[Y];E[Y]=h+F+S}else{E[Y]=F+S}if(M){Appcelerator.Compiler.executeFunction(E,"revalidate")}}},findMatchingFormClause:function(B,D){var C=Appcelerator.Compiler.parseExpression(B.getAttribute("on"));for(var A=0;A<C.length;A++){var E=C[A][2];if(E==D){return C[A]}}return[]}});Appcelerator.Compiler.registerCustomAction("bind",{metadata:{requiresParameters:false,description:"Sets the value to all elements with the same fieldset to the data from the payload"},parseParameters:function(D,B,C,A){return C},execute:function(G,F,E,D){var C=$(G);var A=C.getAttribute("fieldset");if(!A||A==""){throw"syntax error: element has no field set attribute "+C}var B=E;Appcelerator.Compiler.updateFieldsetValues(A,D.data,B)}});Appcelerator.Compiler.executeActionFunction=function(H,G,F,B,A){var E=Appcelerator.Compiler.findParameter(F,"id")||H;if(B){try{var D=$(E);if(D&&!D.disabled&&Element.showing(D)){Appcelerator.Compiler.executeFunction(E,G,[E,G,A.data,A.scope,A.version,F,A.direction,A.type])}}catch(C){}}else{A=(!A)?{}:A;Appcelerator.Compiler.executeFunction(E,G,[E,G,A.data,A.scope,A.version,F,A.direction,A.type])}};var GenericActionFunction=Class.create();Object.extend(GenericActionFunction.prototype,{initialize:function(A,B){this.checkenabled=A;this.widgetAction=!!B},execute:function(D,B,C,A){Appcelerator.Compiler.executeActionFunction(D,B,C,this.checkenabled,A)}});Appcelerator.Compiler.GenericFunctions=[["execute",false],["enable",false],["disable",false],["focus",true],["blur",true],["select",false],["selected",false],["unselect",false],["click",false],["submit",false]];for(var c=0,len=Appcelerator.Compiler.GenericFunctions.length;c<len;c++){var gf=Appcelerator.Compiler.GenericFunctions[c];var f=new GenericActionFunction(gf[1]);Appcelerator.Compiler.registerCustomAction(gf[0],f)}Appcelerator.Compiler.buildCustomAction=function(A){var C=Appcelerator.Compiler.customActions[A];if(!C){var B=new GenericActionFunction(false,true);Appcelerator.Compiler.registerCustomAction(A,B)}};Appcelerator.Compiler.buildCustomElementAction=function(A,B,D){var C=new GenericActionFunction(false,true);Appcelerator.Compiler.registerCustomAction(A,C,B);Appcelerator.Compiler.attachFunction(B.id,A,D)};Appcelerator.Compiler.registerCustomAction("history",{execute:function(E,B,D){if(D&&D.length>0){var C=D[0];var A=C.key;Appcelerator.History.go(A)}else{throw"required parameter for history action"}}});Object.extend(Array.prototype,{remove:function(C){var A=[];for(var B=0;B<this.length;B++){if(this[B]!=C){A.push(this[B])}}this.clear();for(var B=0;B<A.length;B++){this.push(A[B])}return A}});Appcelerator.Compiler.registerCustomCondition({conditionNames:["dragstart","drag","dragend","dragover","drop"],description:"Respond to drag-and-drop events on the element"},function(E,B,C,I,F,D){var G=null;switch(B){case"dragstart":G="onStart";break;case"drag":G="onDrag";break;case"dragend":G="onEnd";break;case"dragover":if(!E.getAttribute("droppable")){throw"dragover condition only applies to elements that have droppable attribute"}if(!E.hoverListeners){E.hoverListeners=[]}var J=Appcelerator.Compiler.makeConditionalAction(E.id,C,D);E.hoverListeners.push({onHover:function(K){Appcelerator.Compiler.executeAfter(J,F,{id:E.id,dragged:K.id})}});return true;case"drop":if(!E.getAttribute("droppable")){throw"drop condition only applies to elements that have droppable attribute"}if(!E.dropListeners){E.dropListeners=[]}var J=Appcelerator.Compiler.makeConditionalAction(E.id,C,D);E.dropListeners.push({onDrop:function(K){Appcelerator.Compiler.executeAfter(J,F,{id:E.id,dropped:K.id})}});return true}if(G){var A=E.id;var J=Appcelerator.Compiler.makeConditionalAction(E.id,C,D);var H={};H[G]=function(L,K){if(K.element.id==A){Appcelerator.Compiler.executeAfter(J,F,{id:A})}};Draggables.addObserver(H);Appcelerator.Compiler.addTrash(E,function(){Draggables.removeObserver(E)});return true}return false});Appcelerator.Compiler.registerCustomCondition({conditionNames:["enter","enter!"],description:"Respond to 'enter' keypress on a form"},function(E,B,C,I,F,D){switch(B){case"enter":case"enter!":if(Appcelerator.Compiler.getTagname(E)!="form"){throw"invalid condition: "+B+" on element of type: "+E.tagName+", only supported on form elements"}var A=E.id;var K=Appcelerator.Compiler.makeConditionalAction(A,C,D,{id:A});var C=function(L){Appcelerator.Compiler.executeAfter(K,F,{id:A});if(B=="enter!"){Event.stop(Event.getEvent(L))}};var G=Form.Methods.getInputs(E);for(var H=0;H<G.length;H++){var J=G[H];Appcelerator.Compiler.getAndEnsureId(J);Appcelerator.Util.KeyManager.installHandler(Appcelerator.Util.KeyManager.KEY_ENTER,J,C);Appcelerator.Compiler.addTrash(J,function(){Appcelerator.Util.KeyManager.removeHandler(Appcelerator.Util.KeyManager.KEY_ENTER,J)})}return true}return false});Appcelerator.Compiler.Events=["click","focus","blur","dblclick","mousedown","mouseout","mouseover","mousemove","change","scroll","contextmenu","mousewheel","input","paste","orientationchange"];Appcelerator.Compiler.EventTargets=["this","parent","down","after","next","sibling","next-sibling","before","up","prev-sibling","previous-sibling","child","children","window","body"];Appcelerator.Compiler.actionId=0;Appcelerator.Compiler.isEventSelector=function(C){if(C.indexOf(":")!=-1){return false}if(C.charAt(C.length-1)=="!"){C=C.substring(0,C.length-1)}for(var D=0,A=Appcelerator.Compiler.Events.length;D<A;D++){if(C==Appcelerator.Compiler.Events[D]){return true}var B=C.indexOf(".");realtoken=C.substring(B+1);realtoken=Appcelerator.Compiler.parseEventConditionName(realtoken);if(realtoken==Appcelerator.Compiler.Events[D]){return true}}return false};Appcelerator.Compiler.filteredEvent=function(D,C){if(C!=null){for(var A=0;A<C.length;A++){filter=C[A];var B=filter.value;var E=""+D[filter.name];if(E!=B){return true}}}return false};Appcelerator.Compiler.parseEventConditionName=function(A){if(A.indexOf("[")==-1){return A}else{return A.substring(0,A.indexOf("["))}};Appcelerator.Compiler.parseEventConditionFilters=function(G){if(G.indexOf("[")!=-1){filters=new Array();var F=(G.indexOf("[")+1);var A=(G.indexOf("]"));var C=G.substring(F,A);var D=(C.split(","));for(var B=0;B<D.length;B++){var E=D[B].split("=");filters.push({name:E[0],value:E[1]})}return filters}else{return null}};Appcelerator.Compiler.registerCustomCondition({conditionPrefixes:Appcelerator.Compiler.EventTargets.map(function(A){return A+"."}),conditionSuffixes:Appcelerator.Compiler.Events,prefixOptional:true,description:"Respond to standard DOM event"},function(B,L,I,D,Q,G){if(!Appcelerator.Compiler.isEventSelector(L)){return false}if(D){throw"syntax error: 'else' action not supported on event conditions for: "+L}var O=false;if(L.charAt(L.length-1)=="!"){O=true;L=L.substring(0,L.length-1)}var E=Appcelerator.Compiler.parseEventConditionFilters(L);L=Appcelerator.Compiler.parseEventConditionName(L);var K=L.indexOf(".");var J=L,R=B.id,C=false;if(K>0){var M=L.substring(0,K);switch(M){case"this":R=B.id;break;case"parent":R=B.parentNode.id;break;case"down":case"after":case"next":case"sibling":case"next-sibling":R=B.nextSibling.id;break;case"before":case"up":case"prev-sibling":case"previous-sibling":R=B.previousSibling.id;break;case"child":case"children":C=true;break;case"window":R="window";break;case"body":R=document.body.id;break;default:R=M}J=L.substring(K+1)}if(J=="orientationchange"){R=document.body.id}if(Appcelerator.Compiler.getTagname(B)=="select"&&J=="change"&&(C||R==B.id)){var N=function(U){if(Appcelerator.Compiler.filteredEvent(U,E)){return }var V=B.options[B.selectedIndex||0];var T=V;if(Element.isDisabled(T)||Element.isDisabled(T.parentNode)){return }var S=Appcelerator.Compiler.makeConditionalAction(B.id,I,G,{value:V.value,text:V.text});S();if(O){Event.stop(U);return false}};Appcelerator.Compiler.addEventListener(B,J,N,Q)}else{if(J=="change"){var F=Appcelerator.Compiler.makeConditionalAction(B.id,I,G);B._validatorObserver=new Form.Element.Observer(B,0.5,function(S,T){F(S,T)})}else{if(C){for(var P=0;P<B.childNodes.length;P++){(function(){var U=B.childNodes[P];if(U.nodeType==1){Appcelerator.Compiler.getAndEnsureId(U);$D("adding listener to "+U.id+" for event: "+J);var T=function(Z){if(Appcelerator.Compiler.filteredEvent(Z,E)){return }var Y=U;if(Element.isDisabled(Y)||Element.isDisabled(Y.parentNode)){return }var X=Appcelerator.Compiler.makeConditionalAction(Appcelerator.Compiler.getAndEnsureId(U),I,G);var V=X,W=$A(arguments);return V.apply(this,[Z||window.event].concat(W))};var S=T;if(O){S=function(V){if(Appcelerator.Compiler.filteredEvent(V,E)){return }T(V);Event.stop(V);return false}}Appcelerator.Compiler.addEventListener(U,J,S,Q)}})()}}else{if(Object.isString(R)){R=R=="window"?window:$(R)}if(!R){throw"syntax error: target not found for "+L}$D("adding listener to "+R+", name: "+R.nodeName+", id: "+R.id+" for event: "+J);var F=Appcelerator.Compiler.makeConditionalAction(R.id,I,G);var A={id:R.id};var H=function(V){if(Appcelerator.Compiler.filteredEvent(V,E)){return }var U=$(A.id);if(Element.isDisabled(U)||Element.isDisabled(U.parentNode)){return }var S=F,T=$A(arguments);return S.apply(A,[V||window.event].concat(T))};var N=H;if(O){N=function(S){if(Appcelerator.Compiler.filteredEvent(S,E)){return }H(S);Event.stop(S);return false}}Appcelerator.Compiler.addEventListener(R,J,N,Q)}}}return true});if(Appcelerator.Browser.isIPhone){window.onorientationchange=function(){if(!Element.hasClassName("orientation_"+window.orientation)){var B=Element.classNames(document.body);if(B){B._each(function(C){if(C.startsWith("orientation_")){B.remove(C)}})}Element.addClassName(document.body,"orientation_"+window.orientation)}var A=document.createEvent("Events");A.initEvent("orientationchange",true,true);document.body.dispatchEvent(A)}}Appcelerator.Compiler.registerCustomCondition({conditionPrefixes:["history:==","history:!="],suffixOptional:true,description:"Respond to back/forward navigation"},function(G,C,E,J,H,F){if(!C.startsWith("history:")&&!C.startsWith("history[")){return false}var D=null;if(C.startsWith("history:")){D=C.substring(8)}if(C.startsWith("history[")){D=C.substring(8,C.indexOf("]"))}D=D||"";var A=G.id;var K=Appcelerator.Compiler.makeConditionalAction(A,E,F);var I=J?Appcelerator.Compiler.makeConditionalAction(A,J,null):null;var B="==";if(D.charAt(0)=="!"){D=D.substring(1);B="!="}else{if(D=="*"){B="*"}}D=D.length==0||D=="_none_"||D==="null"?null:D;Appcelerator.History.onChange(function(N,M,L){switch(B){case"==":if(N==D){Appcelerator.Compiler.executeAfter(K,H,{data:M})}else{if(I){Appcelerator.Compiler.executeAfter(I,H,{data:M})}}break;case"!=":if(N!=D){Appcelerator.Compiler.executeAfter(K,H,{data:M})}else{if(I){Appcelerator.Compiler.executeAfter(I,H,{data:M})}}break;case"*":if(N){Appcelerator.Compiler.executeAfter(K,H,{data:M})}break}});return true});Appcelerator.Compiler.registerCustomCondition({conditionNames:["keypress","keyup","keydown"],description:"Respond to key events on the element"},function(B,M,J,E,Q,G){if(M.indexOf("keypress")==-1&&M.indexOf("keyup")==-1&&M.indexOf("keydown")==-1){return false}if(E){throw"syntax error: 'else' action not supported on event conditions for: "+M}var D=M;var P=false;if(M.charAt(D.length-1)=="!"){M=M.substring(0,M.length-1);P=true}var L=M.indexOf(".");var K=M,R=B.id,C=false;if(L>0){var N=M.substring(0,L);switch(N){case"this":R=B.id;break;case"parent":R=B.parentNode.id;break;case"down":case"after":case"next":case"sibling":case"next-sibling":R=B.nextSibling.id;break;case"before":case"up":case"prev-sibling":case"previous-sibling":R=B.previousSibling.id;break;case"child":case"children":C=true;break;case"window":R="window";break;case"body":R=document.body.id;break;default:R=N}K=M.substring(L+1)}var L=M.indexOf("[");var H=null;if(L>0){H=M.substring(L+1,M.indexOf("]"));K=K.substring(0,L)}if(K=="keypress"||K=="keydown"||K=="keyup"){if(Object.isString(R)){R=R=="window"?window:$(R)}if(!R){throw"syntax error: target not found for "+M}$D("adding listener to "+R+", name: "+R.nodeName+", id: "+R.id+" for event: "+K);var F=Appcelerator.Compiler.makeConditionalAction(R.id,J,G);var A={id:R.id};var I=function(Z){var X=$(A.id);if(Element.isDisabled(X)||Element.isDisabled(X.parentNode)){return }var U=Z.keyCode;var Y={key:U,event:Z};if(H){var W=H.split("+");var V=W[W.length-1];switch(V){case"enter":if(U!=Event.KEY_RETURN){return }break;case"esc":if(U!=Event.KEY_ESC){return }break;case"left":if(U!=Event.KEY_LEFT){return }break;case"right":if(U!=Event.KEY_RIGHT){return }break;case"up":if(U!=Event.KEY_UP){return }break;case"down":if(U!=Event.KEY_DOWN){return }break;case"tab":if(U!=Event.KEY_TAB){return }break;case"delete":if(U!=Event.KEY_DELETE){return }break;case"backspace":if(U!=Event.KEY_BACKSPACE){return }break;default:if(U!=V){return }break}if(W.length>1){for(var T=0;T<(W.length-1);T++){var S=W[T];switch(S){case"ctrl":if(!Z.ctrlKey){return }break;case"alt":if(!Z.altKey){return }break;case"shift":if(!Z.shiftKey){return }break;case"meta":if(!Z.metaKey){return }break}}}}Appcelerator.Compiler.executeAfter(F,0,Y)};var O=I;if(P){O=function(S){I(S);Event.stop(S);return false}}Appcelerator.Compiler.addEventListener(R,K,O,Q);return true}return false});Appcelerator.Compiler.registerCustomCondition({conditionPrefixes:["local:","remote:","l:","r:","both:","*:"],freeformSuffix:true,description:"Respond to a local or remote message"},function(G,B,E,K,H,F){if(B.startsWith("local:")||B.startsWith("l:")||B.startsWith("remote:")||B.startsWith("r:")||B.startsWith("both:")||B.startsWith("*:")){var A=G.id;var C=Appcelerator.Compiler.parameterRE.exec(B);var I=(C?C[1]:B);var D=C?C[2]:null;var L=Appcelerator.Compiler.makeConditionalAction(A,E,F);var J=(K?Appcelerator.Compiler.makeConditionalAction(A,K,null):null);return Appcelerator.Compiler.MessageAction.makeMBListener(G,I,L,D,H,J)}return null});Appcelerator.Compiler.MessageAction={};Appcelerator.Compiler.MessageAction.onMessage=function(G,C,D,J,K,F,A,E,I){var H=Appcelerator.Compiler.parseConditionCondition(F,C);var B={type:G,datatype:D,direction:J,data:C,scope:K};if(H){Appcelerator.Compiler.executeAfter(A,E,B)}else{if(I){Appcelerator.Compiler.executeAfter(I,E,B)}}};Appcelerator.Compiler.MessageAction.makeMBListener=function(D,G,C,B,F,H){var A=B?Appcelerator.Compiler.getParameters(B,false):null;var E=A?G.indexOf("["):0;if(E>0){G=G.substring(0,E)}var I=(A)?Object.toJSON(A):null;$MQL(G,function(L,M,K,N,J){Appcelerator.Compiler.MessageAction.onMessage(L,M,K,N,J,I,C,F,H)},D.scope,D);return true};Appcelerator.Compiler.registerCustomCondition({conditionNames:["resize"],description:("Respond to resizing of an element, requires that the <i>resizable</i> attribute be set")},function(D,G,F,A,B,E){if(G=="resize"){if(!D.getAttribute("resizable")){throw'resize condition only applies to elements that have resizable="true"'}if(!D.resizeListeners){D.resizeListeners=[]}var C=Appcelerator.Compiler.makeConditionalAction(D.id,F,E);D.resizeListeners.push({onResize:function(H){Appcelerator.Compiler.executeAfter(C,B,{id:D.id})}});return true}return false});Appcelerator.Compiler.Selected={};Appcelerator.Compiler.Selected.makeSelectedListener=function(C,G,E,A,B,D){var F=Appcelerator.Compiler.getAndEnsureId(C);Appcelerator.Compiler.attachFunction(C,"selected",function(K,L,H){if(K){var J=Appcelerator.Compiler.makeConditionalAction(F,E,D,{count:L,unselect:H});Appcelerator.Compiler.executeAfter(J,B,{count:L,id:F,unselect:H})}else{if(A){var I=Appcelerator.Compiler.makeConditionalAction(F,A,null,{count:L,unselect:H});Appcelerator.Compiler.executeAfter(I,B,{count:L,id:F,unselect:H})}}})};Appcelerator.Compiler.registerCustomCondition({conditionPrefixes:["parent.","child.","children."],conditionSuffixes:["selected"],prefixOptional:true,description:("Respond to selection of this element, requires the <i>selectable</i> attribute be set")},function(C,H,E,A,B,D){switch(H){case"selected":Element.addClassName(C,"app_selectable");Appcelerator.Compiler.Selected.makeSelectedListener(C,H,E,A,B,D);break;case"parent.selected":Element.addClassName(C,"app_selectable");Appcelerator.Compiler.Selected.makeSelectedListener(C.parentNode,H,E,A,B,D);break;case"children.selected":case"child.selected":Element.addClassName(C,"app_selectgroup");for(var G=0;G<C.childNodes.length;G++){var F=C.childNodes[G];if(F.nodeType==1){Element.addClassName(F,"app_selectable");Appcelerator.Compiler.Selected.makeSelectedListener(F,H,E,A,B,D)}}break;default:return false}return true});Appcelerator.Compiler.registerCustomCondition({conditionNames:["sortupdate","sortchange"],description:"Respond to sortable events on the element"},function(E,H,G,B,C,F){var A=null;switch(H){case"sortupdate":if(!E.getAttribute("sortable")){throw"sortupdate condition only applies to elements that have sortable attribute"}if(!E.updateListeners){E.updateListeners=[]}var D=Appcelerator.Compiler.makeConditionalAction(E.id,G,F);E.updateListeners.push({onUpdate:function(I){Appcelerator.Compiler.executeAfter(D,C,{id:I.id})}});return true;case"sortchange":if(!E.getAttribute("sortable")){throw"sortchange condition only applies to elements that have sortable attribute"}if(!E.changeListeners){E.changeListeners=[]}var D=Appcelerator.Compiler.makeConditionalAction(E.id,G,F);E.changeListeners.push({onChange:function(I){Appcelerator.Compiler.executeAfter(D,C,{id:I.id})}});return true}return false});Appcelerator.Compiler.StateMachine={};Appcelerator.Compiler.StateMachine.APP_STATES={};Appcelerator.Compiler.StateMachine.CompiledStateConditionCache={};Appcelerator.Compiler.StateMachine.isStateCondition=function(A){return Appcelerator.Compiler.parameterRE.test(A)};Appcelerator.Compiler.getTransitionSource=function(A){if(A.indexOf(":")==-1){return""}else{value=A.split(":")[0];return""+value}};Appcelerator.Compiler.getTransitionTarget=function(A){if(A.indexOf(":")==-1){return A}else{value=A.split(":")[1];return""+value}};Appcelerator.Compiler.registerCustomCondition({pattern:/([^\[]*)\[([^\]]*)\]/},function(B,Q,P,F,V,L){if(!Appcelerator.Compiler.StateMachine.isStateCondition(Q)){return false}var O=B.id;var M=Q.split(" ");var Q="";var G=[];for(var T=0,R=M.length;T<R;T++){var E=M[T].trim();if(E.length==0){continue}switch(E){case"and":Q+=" && ";continue;case"||":case"&&":Q+=" "+E+" ";continue;default:break}var K="";if(E.charAt(0)=="!"){K="!";E=E.substring(1)}else{if(E.startsWith("not ")){K="!";E=E.substring(4)}}var I=Appcelerator.Compiler.parameterRE.exec(E);var N=I[1];var D=Appcelerator.Compiler.getTransitionTarget(I[2]);var U=Appcelerator.Compiler.getTransitionSource(I[2]);G.push([N,D,U]);if(D!=""&&D){Q+=K+'Appcelerator.Compiler.StateMachine.isStateValid("'+N+'","'+D+'")'}}var J=Appcelerator.Compiler.makeConditionalAction(O,P,L);var S=(F?Appcelerator.Compiler.makeConditionalAction(O,F,null):null);var H=Appcelerator.Compiler.StateMachine.CompiledStateConditionCache[Q];if(!H){H=Q.toFunction();Appcelerator.Compiler.StateMachine.CompiledStateConditionCache[Q]=H;$D("compiled state => "+Q)}for(var T=0,R=G.length;T<R;T++){var N=G[T][0];var A=G[T][1];var C=G[T][2];$D("adding state change listener for "+N+"["+A+"]");Appcelerator.Compiler.StateMachine.registerStateListener(N,function(a,Y,b,X){var W=false;if(C!=""){var Z=C==(""+X)||C=="";var d=A==(""+Y)||A=="";W=Z&&d}else{W=H();$D("statemachine: "+a+"["+Y+"] logic returned => "+W)}if(W){Appcelerator.Compiler.executeAfter(J,V)}else{if(S){Appcelerator.Compiler.executeAfter(S,V)}}});Appcelerator.Compiler.StateMachine.addOnLoadStateCheck(N)}return true});Appcelerator.Compiler.StateMachine.isStateMachine=function(A){return Appcelerator.Compiler.StateMachine.APP_STATES[A]!=null};Appcelerator.Compiler.StateMachine.isStateValid=function(B,C){var A=Appcelerator.Compiler.StateMachine.APP_STATES[B];if(A){if(A.active){return(C=="*"||A.states["state_"+C]==true)}}return false};Appcelerator.Compiler.StateMachine.disableStateMachine=function(B){var C=Appcelerator.Compiler.StateMachine.getActiveState(B,true);var A=Appcelerator.Compiler.StateMachine.APP_STATES[B];if(A){A.active=false;A.init=true;$D("disable state machine="+B+"["+C+"]");if(C){Appcelerator.Compiler.StateMachine.fireStateMachineChange(B,C,false)}A.activeState=C}};Appcelerator.Compiler.StateMachine.enableStateMachine=function(B){var A=Appcelerator.Compiler.StateMachine.APP_STATES[B];if(A){A.active=true;A.init=true;var C=A.activeState;$D("enable state machine="+B+"["+C+"]");if(C){A.activeState=null;Appcelerator.Compiler.StateMachine.fireStateMachineChange(B,C,true,true)}}};Appcelerator.Compiler.StateMachine.addState=function(C,D,B){var A=Appcelerator.Compiler.StateMachine.APP_STATES[C];if(!A){A=Appcelerator.Compiler.StateMachine.createStateMachine(C)}A.states["state_"+D]=B};Appcelerator.Compiler.StateMachine.createStateMachine=function(B){var A={"states":{},"listeners":[],"active":true,"activeState":null,"init":false};Appcelerator.Compiler.StateMachine.APP_STATES[B]=A;return A};Appcelerator.Compiler.StateMachine.registerStateListener=function(B,C){var A=Appcelerator.Compiler.StateMachine.APP_STATES[B];if(!A){A=Appcelerator.Compiler.StateMachine.createStateMachine(B)}A.listeners.push(C)};Appcelerator.Compiler.StateMachine.unregisterStateListener=function(C,D){var B=Appcelerator.Compiler.StateMachine.APP_STATES[C];if(B){var A=B.indexOf(D);if(A>=0){B.removeAt(A);return true}}return false};Appcelerator.Compiler.StateMachine.getActiveState=function(B,D){var A=Appcelerator.Compiler.StateMachine.APP_STATES[B];if(A&&(A.active||D==true)){if(A.activeState!=null){return A.activeState}for(var C in A.states){if(C.startsWith("state_")){if(true==A.states[C]){return C.substring(6)}}}}return null};Appcelerator.Compiler.StateMachine.fireStateMachineChange=function(I,A,K,C,L){$D("fireStateMachineChange => "+I+"["+A+"] = "+K+", force="+(C==true)+",init="+L);var F=Appcelerator.Compiler.StateMachine.APP_STATES[I];if(F){var B=false;var N="state_"+F.activeState;var G=F.activeState;for(var M in F.states){if(M.startsWith("state_")){if(A==M.substring(6)){var E=F.states[M];if(L==true||C==true||K==null||E==null||(E!=null&&E!=K)){F.states[M]=K;F.activeState=K?M.substring(6):null;B=N==M?false:true}}else{if(K!=null&&K==true){F.states[M]=false}}}}$D("setting activeState = "+F.activeState+" for "+I);F.init=true;B=C==true?true:B;if(B&&F.listeners.length>0){for(var J=0,H=F.listeners.length;J<H;J++){var D=F.listeners[J];D.apply(D,[I,A,K,G])}}}};Appcelerator.Compiler.StateMachine.addOnLoadStateCheck=function(A){if(Appcelerator.Compiler.StateMachine.initialStateInit){if(Appcelerator.Compiler.StateMachine.initialStateInit.indexOf(A)<0){Appcelerator.Compiler.StateMachine.initialStateInit.push(A)}}};Appcelerator.Compiler.StateMachine.resetOnStateListeners=function(){if(!Appcelerator.Compiler.StateMachine.initialStateLoaders){Appcelerator.Compiler.StateMachine.initialStateLoaders=[];Appcelerator.Compiler.StateMachine.initialStateInit=[]}};Appcelerator.Compiler.StateMachine.fireOnStateListeners=function(){if(Appcelerator.Compiler.StateMachine.initialStateLoaders&&Appcelerator.Compiler.StateMachine.initialStateLoaders.length>0){var C=[];for(var F=0,A=Appcelerator.Compiler.StateMachine.initialStateLoaders.length;F<A;F++){var E=Appcelerator.Compiler.StateMachine.initialStateLoaders[F];$D("firing initial state change = "+E[0]+"["+E[1]+"]");Appcelerator.Compiler.StateMachine.fireStateMachineChange(E[0],E[1],true,false,true);C.push(E[0])}if(Appcelerator.Compiler.StateMachine.initialStateInit&&Appcelerator.Compiler.StateMachine.initialStateInit.length>0){for(var F=0;F<Appcelerator.Compiler.StateMachine.initialStateInit.length;F++){var B=Appcelerator.Compiler.StateMachine.initialStateInit[F];if(C.indexOf(B)<0){var D=Appcelerator.Compiler.StateMachine.getActiveState(B);if(D){Appcelerator.Compiler.StateMachine.fireStateMachineChange(B,D,true,true,false);C.push(B)}}}}}Appcelerator.Compiler.StateMachine.initialStateLoaders=null;Appcelerator.Compiler.StateMachine.initialStateInit=null};Appcelerator.Compiler.StateMachine.re=/[\s\n\r]+or[\s\n\r]+/;Appcelerator.Compiler.StateMachine.compileStateCondition=function(B,L){var A={"name":B,"states":{},"types":[]};if(L){var K=L.split(Appcelerator.Compiler.StateMachine.re);for(var J=0,G=K.length;J<G;J++){var C=K[J];var E=Appcelerator.Compiler.parameterRE.exec(C);var I=Appcelerator.Compiler.convertMessageType(E?E[1]:C);var D=E?E[2]:null;var M=D?Appcelerator.Compiler.getParameters(D,false):null;var H=M?Appcelerator.Compiler.StateMachine.compileMessageConditionExpression(M):null;var F=A.states[I];if(!F){A.types.push(I);F=[];A.states[I]=F}F.push(H||"1==1")}}return A};Appcelerator.Compiler.StateMachine.compileMessageConditionExpression=function(D){var C="";for(var H=0,A=D.length;H<A;H++){var G=D[H];var E=null;var F="==";var B=G.key;if(B.endsWith("!")){F="!=";B=B.substring(0,B.length-1)}switch(typeof (G.value)){case"string":E='"'+G.value+'"';break;case"number":case"boolean":E=G.value;break}C+='Object.getNestedProperty(this.data,"'+B+'")'+F+E;if(H+1<A){C+=" && "}}return C};Appcelerator.Compiler.StateMachine.buildConditions=function(E){var H={};for(var I=0,G=E.length;I<G;I++){var B=E[I];for(var K=0,C=B.types.length;K<C;K++){var J=B.types[K];var D=H[J];if(!D){D=[];D.push('case "'+J+'": { ');H[J]=D}var L=B.states[J];D.push("if ("+L.join(" || ")+') return "'+B.name+'";')}}var A=[];var F=[];for(var J in H){F.push(J);var D=H[J];A.push(D.join("")+"break; } ")}return{types:F.uniq(),code:"switch(this.messagetype) { "+A.join("")+" default: return null; } "}};Appcelerator.Compiler.StateMachine.initialStateLoaders=[];Appcelerator.Compiler.StateMachine.initialStateInit=[];Appcelerator.Compiler.afterDocumentCompile(Appcelerator.Compiler.StateMachine.fireOnStateListeners);Object.extend(Appcelerator.Decorator,{invalidImage:Appcelerator.ImagePath+"warning.png",validImage:Appcelerator.ImagePath+"confirm.png",toString:function(){return"[Appcelerator.Decorator]"},decoratorId:0,names:[],addDecorator:function(B,A){Appcelerator.Decorator[B]=A;Appcelerator.Decorator.names.push(B)},checkInvalid:function(C,D,A,E,B){if(A){var G=$(A);if(G){if(B){if(D){Appcelerator.Compiler.setHTML(G,'<img src="'+Appcelerator.Decorator.validImage+'"/> <span class="success_color">'+E+"</span>");Appcelerator.Compiler.dynamicCompile(G)}}else{if(!D){Appcelerator.Compiler.setHTML(G,'<img src="'+Appcelerator.Decorator.invalidImage+'" style="margin: 3px 0 -3px 0"/> '+E);Appcelerator.Compiler.dynamicCompile(G)}Element.setStyle(A,{visibility:(D?"hidden":"visible")})}}}else{var F="decorate_"+C.id;var G=$(F);if(!G){new Insertion.After(C.id,'<span id="'+F+'" style="font-size:11px;color:#ff0000"></span>');G=$(F)}if(B){Appcelerator.Compiler.setHTML(G,'<img src="'+Appcelerator.Decorator.validImage+'"/> <span class="success_color">'+E+"</span>");Appcelerator.Compiler.dynamicCompile(G)}else{if(!D){Appcelerator.Compiler.setHTML(G,'<img src="'+Appcelerator.Decorator.invalidImage+'" style="margin: 3px 0 -3px 0"/> '+E);Appcelerator.Compiler.dynamicCompile(G)}Element.setStyle(F,{visibility:(D?"hidden":"visible")})}}}});(function(){var A=Appcelerator.Decorator.addDecorator;A("defaultDecorator",function(B,C){});A("custom",function(C,D,B){if(!B){throw"invalid custom decorator, decoratorId attribute must be specified"}var E=$(B);if(!E){throw"invalid custom decorator, decorator with ID: "+B+" not found"}if(!D){if(E.style.display=="none"){E.style.display=""}if(E.style.visibility=="hidden"){E.style.visibility=""}}else{if(E.style.display!="none"){E.style.display="none"}if(E.style.visibility!="hidden"){E.style.visibility="hidden"}}});A("termsAccepted",function(C,D,B){this.checkInvalid(C,D,B,"must accept terms and conditions")});A("required",function(C,D,B){this.checkInvalid(C,D,B,"required")});A("zipcode_5",function(C,D,B){this.checkInvalid(C,D,B,"5 digit zipcode required")});A("phone_us",function(C,D,B){this.checkInvalid(C,D,B,"10 digit phone number required (###-###-####)")});A("ssn",function(C,D,B){this.checkInvalid(C,D,B,"9 digit ssn required (###-##-####)")});A("email",function(C,D,B){this.checkInvalid(C,D,B,"enter a valid email address")});A("date",function(C,D,B){this.checkInvalid(C,D,B,"invalid date")});A("number",function(C,D,B){this.checkInvalid(C,D,B,"invalid number")});A("fullname",function(C,D,B){this.checkInvalid(C,D,B,"enter first and last name")});A("alphanumeric",function(C,D,B){this.checkInvalid(C,D,B,"enter an alphanumeric value")});A("noSpaces",function(C,D,B){this.checkInvalid(C,D,B,"value must contain no spaces")});A("password",function(C,D,B){this.checkInvalid(C,D,B,"password must be at least 6 characters")});A("url",function(C,D,B){this.checkInvalid(C,D,B,"enter a valid URL")});A("checked",function(C,D,B){this.checkInvalid(C,D,B,"item must be checked")});A("wholenumber",function(C,D,B){this.checkInvalid(C,D,B,"enter a whole number")});A("length",function(E,F,C){if(!F){var D=E.getAttribute("validatorMinLength")||"0";var B=E.getAttribute("validatorMaxLength")||"999999";this.checkInvalid(E,F,C,"value must be between "+D+"-"+B+" characters")}else{this.checkInvalid(E,F,C,E.value.length+" characters",true)}})})();$MQL("appcelerator.download",function(I,D,E,J){var A=D["name"];var H=D["ticket"];var G=Appcelerator.ServerConfig["download"];var B=G?G.path:Appcelerator.DocumentPath+"/download";var C=Appcelerator.Util.UUID.generateNewId();B=B+"?ticket="+encodeURIComponent(H)+"&name="+encodeURIComponent(A)+"&reqid="+C;var F='<iframe id="'+C+'" src="'+B+'" height="1" width="1" style="position:absolute;left:-400px;top:-400px;height:1px;width:1px;"></iframe>';new Insertion.Bottom(document.body,F)});Object.extend(Effect.Transitions,{elastic:function(A){return -1*Math.pow(4,-8*A)*Math.sin((A*6-1)*(2*Math.PI)/2)+1},swingFromTo:function(B){var A=1.70158;return((B/=0.5)<1)?0.5*(B*B*(((A*=(1.525))+1)*B-A)):0.5*((B-=2)*B*(((A*=(1.525))+1)*B+A)+2)},swingFrom:function(B){var A=1.70158;return B*B*((A+1)*B-A)},swingTo:function(B){var A=1.70158;return(B-=1)*B*((A+1)*B+A)+1},bounce:function(A){if(A<(1/2.75)){return(7.5625*A*A)}else{if(A<(2/2.75)){return(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}},bouncePast:function(A){if(A<(1/2.75)){return(7.5625*A*A)}else{if(A<(2/2.75)){return 2-(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return 2-(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return 2-(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}},easeFromTo:function(A){if((A/=0.5)<1){return 0.5*Math.pow(A,4)}return -0.5*((A-=2)*Math.pow(A,3)-2)},easeFrom:function(A){return Math.pow(A,4)},easeTo:function(A){return Math.pow(A,0.25)}});for(var p in Effect.Transitions){var v=Effect.Transitions[p];if(Object.isFunction(v)){Effect.Transitions[String(p.charAt(0)).toUpperCase()+p.substring(1)]=v}}Element.getDocumentSize=function(){var E,A;var D,B;if(window.innerHeight&&window.scrollMaxY){E=document.body.scrollWidth;A=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){E=document.body.scrollWidth;A=document.body.scrollHeight}else{E=document.body.offsetWidth;A=document.body.offsetHeight}}var C,F;if(self.innerHeight){C=self.innerWidth;F=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){C=document.documentElement.clientWidth;F=document.documentElement.clientHeight}else{if(document.body){C=document.body.clientWidth;F=document.body.clientHeight}}}if(A<F){D=F}else{D=A}if(E<C){B=C}else{B=E}return[B,D,C,F]};Element.getPageScroll=function(){var A;if(self.pageYOffset){A=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){A=document.documentElement.scrollTop}else{if(document.body){A=document.body.scrollTop}}}return A};Element.getCenteredTopPosition=function(B,A){var C=Element.getDimensions(B);var D=Element.getDimensions(A).width;return(C.height-D)/2};Element.center=function(A,B,I){var E=$(B);var F=Element.getDimensions(A);var C=F.width;var J=F.height;var H=Element.getDimensions(B).width;var D=(C-H)/2;E.style.position="absolute";E.style.left=D+"px";E.style.right=D+C+"px";if(I){E.style.top=I+"px"}else{var G=E.offsetHeight||parseInt(E.style.height)||200;E.style.top=(J-G)/2+"px"}};Element.findParentForm=function(A){var B=null;Element.ancestors(A).each(function(C){if(C.nodeName=="FORM"){B=C;throw $break}});return B};Element.showing=function(A,B){if(!Element.visible(A)){return false}B=B||A.ancestors();var C=true;B.each(function(D){if(!Element.visible(D)){C=false;throw $break}});return C};Element.findNonShowingAncestor=function(A,B){if(!Element.visible(A)){return A}B=B||A.ancestors();var C=null;B.each(function(D){if(!Element.visible(D)){C=D;throw $break}});return C};Element.setHeight=function(A,B){A=$(A);A.style.height=B+"px"};Element.setWidth=function(B,A){B=$(B);B.style.width=A+"px"};Element.setTop=function(B,A){B=$(B);B.style.top=A+"px"};Element.isVisible=function(A){return A.style.visibility!="hidden"&&A.style.display!="none"};Element.ensureVisible=function(D){D=$(D);Position.prepare();var H=Position.cumulativeOffset(D);var F=Element.getDocumentSize();var I=Element.getPageScroll();var A=I+F[3];var B=H[1]>=I+25;var E=H[1]<=A-25;var C=(B&&E);if(!C){var G=Math.max(0,H[1]-30);window.scrollTo(0,G)}};Element.isDisabled=function(A){A=$(A);return(A&&(A.disabled||A.getAttribute("disabled")=="true"))};Object.extend(Event,{getEvent:function(A){A=A||window.event;return A?typeof (A.inspect)=="function"?A:Event.extend(A):null},isEventObject:function(A){A=this.getEvent(A);if(A){if(typeof (A.cancelBubble)!="undefined"&&typeof (A.qualifier)!="undefined"){return true}if(typeof (A.stopPropagation)!="undefined"&&typeof (A.preventDefault)!="undefined"){return true}}return false},getKeyCode:function(B){var A;if(B){if(typeof (B.keyCode)!="undefined"){A=B.keyCode}else{if(typeof (B.which)!="undefined"){A=B.which}}}else{A=window.event.keyCode}return A},isKey:function(B,A){return Event.getKeyCode(B)==A},isEscapeKey:function(A){return Event.isKey(A,Event.KEY_ESC)||Event.isKey(A,A.DOM_VK_ESCAPE)},isEnterKey:function(A){return Event.isKey(A,Event.KEY_RETURN)||Event.isKey(A,A.DOM_VK_ENTER)},isSpaceBarKey:function(A){return Event.isKey(A,Event.KEY_SPACEBAR)||Event.isKey(A,A.DOM_VK_SPACE)},isPageUpKey:function(A){return Event.isKey(A,Event.KEY_PAGEUP)||Event.isKey(A,A.DOM_VK_PAGE_UP)},isPageDownKey:function(A){return Event.isKey(A,Event.KEY_PAGEDOWN)||Event.isKey(A,A.DOM_VK_PAGE_DOWN)},isHomeKey:function(A){return Event.isKey(A,Event.KEY_HOME)||Event.isKey(A,A.DOM_VK_HOME)},isEndKey:function(A){return Event.isKey(A,Event.KEY_END)||Event.isKey(A,A.DOM_VK_END)},isDeleteKey:function(A){return Event.isKey(A,Event.KEY_DELETE)||Event.isKey(A,A.DOM_VK_DELETE)},isLeftKey:function(A){return Event.isKey(A,Event.KEY_LEFT)||Event.isKey(A,A.DOM_VK_LEFT)},isRightKey:function(A){return Event.isKey(A,Event.KEY_RIGHT)||Event.isKey(A,A.DOM_VK_RIGHT)},KEY_SPACEBAR:0,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_END:35,KEY_HOME:36,KEY_DELETE:46});(function(){if(!Appcelerator.Config["usegears"]){return }if(window.google&&google.gears){return }var A=null;if(typeof GearsFactory!="undefined"){A=new GearsFactory()}else{try{A=new ActiveXObject("Gears.Factory");if(A.getBuildInfo().indexOf("ie_mobile")!=-1){A.privateSetGlobalObject(this)}}catch(C){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){A=document.createElement("object");A.style.display="none";A.width=0;A.height=0;A.type="application/x-googlegears";document.documentElement.appendChild(A)}}}if(!A){return }if(!window.google){google={}}if(!google.gears){google.gears={factory:A}}google.gears.appcelerator={};google.gears.appcelerator.workerPool=google.gears.factory.create("beta.workerpool");google.gears.appcelerator.workerPool.onmessage=function(E,D,F){Appcelerator.Util.ServiceBroker.gearsDispatch(F.text)};var B=(Appcelerator.WidgetPath+"common/js/gears/").replace(window.location,"");google.gears.appcelerator.serviceBrokerId=google.gears.appcelerator.workerPool.createWorkerFromUrl(B+"servicebroker_remote.js");Appcelerator.Core.requireCommonJS("gears/servicebroker_local.js")})();Appcelerator.History={};Appcelerator.History.changeListeners=[];Appcelerator.History.currentState=false;Appcelerator.History.onChange=function(A){Appcelerator.History.changeListeners.push(A)};Appcelerator.History.go=function(A){document.location.hash=A};Appcelerator.History.fireChange=function(C){if(C&&C.charAt(0)=="#"){C=C.substring(1)}if(C===""){C=null}if(Appcelerator.History.currentState!=C){Appcelerator.History.currentState=C;var B={state:C};for(var D=0;D<Appcelerator.History.changeListeners.length;D++){var A=Appcelerator.History.changeListeners[D];A(C,B)}}};if(Appcelerator.Browser.isIE){Appcelerator.History.loadIE=function(){var C=document.createElement("iframe");C.id="app_hist_frame";C.style.position="absolute";C.style.left="-10px";C.style.top="-10px";C.style.width="1px";C.style.height="1px";C.src="javascript:false";document.body.appendChild(C);var E=$("app_hist_frame");var A=null;var D=null;var B=false;setInterval(function(){var G=E.contentWindow.document;if(!G){return }A=G.getElementById("state");var H=document.location.hash;if(H!==B){B=H;G.open();G.write('<html><body><div id="state">'+H+"</div></body></html>");G.close();Appcelerator.History.fireChange(H)}else{if(A){var F=A.innerText;if(D!=F){D=F;if(F==null||F===""){if(document.location.hash){B="#";document.location.hash="";Appcelerator.History.fireChange("#")}}else{if(F!=document.location.hash){document.location.hash=F;Appcelerator.History.fireChange(document.location.hash)}}}}else{if(B){B=false}}}},50)}}Appcelerator.Compiler.afterDocumentCompile(function(){if(Appcelerator.Browser.isIE){Appcelerator.History.loadIE()}else{if(Appcelerator.Compiler.isCompiledMode){return }else{var A=history.length;var B=null;setInterval(function(){var C;var D;C=document.location.hash;D=history.length;if(C!==B){B=C;A=D;Appcelerator.History.fireChange(C)}else{if(D!==A){B=C;A=D;Appcelerator.History.fireChange(C)}}},50)}}});Appcelerator.Util.IdleManager=Class.create();Appcelerator.Util.IdleManager={IDLE_TIME:60000,timestamp:null,activeListeners:[],idleListeners:[],idle:false,started:false,install:function(){if(this.started){return }this.started=true;this.event=this.onActivity.bind(this);this.timestamp=new Date().getTime();Event.observe(window.document,"keypress",this.event,false);Event.observe(window.document,"mousemove",this.event,false);var A=this;Event.observe(window,"unload",function(){Event.stopObserving(window.document,"keypress",A.event,false);Event.stopObserving(window.document,"mousemove",A.event,false);A.event=null},false);this.startTimer()},startTimer:function(){this.stopTimer();this.timer=setInterval(this.onTimer.bind(this),500)},stopTimer:function(){if(this.timer){clearInterval(this.timer);this.timer=0}},onTimer:function(){if(this.isIdle()){this.stopTimer();this.idle=true;if(this.idleListeners.length>0){this.idleListeners.each(function(A){A.call(A)})}}},registerIdleListener:function(A){Appcelerator.Util.IdleManager.install();this.idleListeners.push(A)},unregisterIdleListener:function(A){this.idleListeners.remove(A)},registerActiveListener:function(A){Appcelerator.Util.IdleManager.install();this.activeListeners.push(A)},unregisterActiveListener:function(A){this.activeListeners.remove(A)},isIdle:function(){return this.getIdleTimeInMS()>=this.IDLE_TIME},getIdleTimeInMS:function(){return(new Date().getTime()-this.timestamp)},onActivity:function(){this.timestamp=new Date().getTime();if(this.idle){this.idle=false;if(this.activeListeners.length>0){this.activeListeners.each(function(A){A.call(A)})}this.startTimer()}return true}};if(Appcelerator.Browser.isIE6){document.getElementsByTagNameNS=function(G,B){var C=$A(document.getElementsByTagName("*"));if(G=="http://www.w3.org/1999/xhtml"){G=""}var E=[];for(var F=0,A=C.length;F<A;F++){var D=C[F];if(D.tagUrn==G&&(B=="*"||D.nodeName==B)){E.push(D)}}return E};try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}Appcelerator.Util.IFrame={fetch:function(D,C,B,A){setTimeout(function(){A=(A==null)?false:A;var E="frame_"+new Date().getTime()+"_"+Math.round(Math.random()*99);var H=document.createElement("iframe");Appcelerator.Compiler.setElementId(H,E);if(!Appcelerator.Browser.isFirefox){H.setAttribute("name",E)}if(D.indexOf("/")==0){H.setAttribute("src",D)}else{H.setAttribute("src",Appcelerator.DocumentPath+D)}H.style.position="absolute";H.style.width=H.style.height=H.borderWidth="1px";H.style.left="-50px";H.style.top="-50px";var G=document.body.appendChild(H);if(window.frames&&window.frames[E]){G=window.frames[E]}G.name=E;var F={iframe:G,frameid:E,onload:C,removeOnLoad:(B==null)?true:B,src:D,copyContent:A};if(!Appcelerator.Browser.isFirefox){setTimeout(Appcelerator.Util.IFrame.checkIFrame.bind(F),10)}else{G.onload=Appcelerator.Util.IFrame.doIFrameLoad.bind(F)}},0)},monitor:function(C,B){var A={iframe:C,frameid:C.id,onload:B,removeOnLoad:false};if(!Appcelerator.Browser.isFirefox){setTimeout(Appcelerator.Util.IFrame.checkIFrame.bind(A),10)}else{C.onload=Appcelerator.Util.IFrame.doIFrameLoad.bind(A)}},doIFrameLoad:function(){var C=this.iframe.contentDocument||this.iframe.document;var A=C.documentElement.getElementsByTagName("body")[0];if(Appcelerator.Browser.isSafari&&Appcelerator.Browser.isWindows&&A.childNodes.length==0){Appcelerator.Util.IFrame.fetch(this.src,this.onload,this.removeOnLoad);return }if(this.copyContent){var E=document.createElement("div");Appcelerator.Util.IFrame.loadStyles(C.documentElement);var D=document.createElement("div");D.innerHTML=A.innerHTML;E.appendChild(D);this.onload(E)}else{this.onload(A)}if(this.removeOnLoad){var B=this.frameid;if(Appcelerator.Browser.isFirefox){setTimeout(function(){Element.remove(B)},50)}else{Element.remove(B)}}},checkIFrame:function(){var B=this.iframe.contentDocument||this.iframe.document;var A=B.readyState;if(A=="complete"||(!document.getElementById&&A=="interactive")){Appcelerator.Util.IFrame.doIFrameLoad.call(this)}else{setTimeout(Appcelerator.Util.IFrame.checkIFrame.bind(this),10)}},loadStyles:function(B){for(var A=0;A<B.childNodes.length;A++){var E=B.childNodes[A];if(E.nodeName=="STYLE"){if(Appcelerator.Browser.isIE){var C=document.createStyleSheet();C.cssText=E.styleSheet.cssText}else{var C=document.createElement("style");C.setAttribute("type","text/css");try{C.appendChild(document.createTextNode(E.innerHTML))}catch(F){C.cssText=E.innerHTML}Appcelerator.Core.HeadElement.appendChild(C)}}else{if(E.nodeName=="LINK"){var D=document.createElement("link");D.setAttribute("type",E.type);D.setAttribute("rel",E.rel);D.setAttribute("href",E.getAttribute("href"));Appcelerator.Core.HeadElement.appendChild(D)}}Appcelerator.Util.IFrame.loadStyles(E)}}};Appcelerator.Util.EventBroadcaster=Class.create();Object.extend(Appcelerator.Util.EventBroadcaster.prototype,{listeners:[],addListener:function(A){this.listeners.push(A)},removeListener:function(A){if(!this.listeners){return false}return this.listeners.remove(A)},dispose:function(){if(this.listeners){this.listeners.clear()}},fireEvent:function(){if(!this.listeners||this.listeners.length==0){$D(this+" not firing event: registered no listeners");return }var B=$A(arguments);if(undefined==B||0==B.length){throw"fire event not correct for "+this+", requires at least a event name parameter"}var A=B.shift();var C=A.charAt(0).toUpperCase();var D="on"+C+A.substring(1);$D(this+" firing event: "+D+", listeners: "+this.listeners.length);this.listeners.each(function(F){var E=F[D];if(E){E.apply(F,B)}else{if(typeof (F)=="function"){F.apply(F,B)}}})}});Appcelerator.Util.KeyManager=Class.create();Object.extend(Appcelerator.Util.KeyManager,{monitors:[],KEY_ENTER:1,KEY_ESCAPE:2,KEY_SPACEBAR:3,disabled:false,installed:false,toString:function(){return"[Appcelerator.Util.KeyManager]"},disable:function(){this.disabled=true},enable:function(){this.disabled=false},install:function(){this.installed=true;this.keyPressFunc=this.onkeypress.bindAsEventListener(this);document.body.onkeypress=this.keyPressFunc;Appcelerator.Core.onunload(this.dispose.bind(this))},dispose:function(){document.body.onkeypress=null;this.keyPressFunc=null;var A=this;this.monitors.each(function(B){A.removeHandler(B[0],B[1])});this.monitors=null},removeHandler:function(H,A){if(A){var C=A["_focusHandler_"+H];var B=A["_blurHandler_"+H];if(C){Event.stopObserving(A,"focus",C,false);try{delete A["_focusHandler_"+H]}catch(I){}}if(B){Event.stopObserving(A,"blur",B,false);try{delete A["_blurHandler_"+H]}catch(I){}}}if(this.monitors.length>0){var J=null;for(var F=0,D=this.monitors.length;F<D;F++){var G=this.monitors[F];if(G[0]==H&&G[1]==A){J=G;break}}if(J){this.monitors.remove(J)}}},installHandler:function(D,C,E){if(!this.installed){this.install.bind(this)}var B=this;this.removeHandler(D,C);var G=[D,C,E];if(C){var A=function(H){H=Event.getEvent(H);C.focused=true;B.monitors.remove(G);B.monitors.push(G);return true};var F=function(H){H=Event.getEvent(H);C.focused=false;B.monitors.remove(G);return true};C["_focusHandler_"+D]=A;C["_blurHandler_"+D]=F;Event.observe(C,"focus",A,false);Event.observe(C,"blur",F,false)}else{this.monitors.push(G)}},onkeypress:function(E){if(this.monitors.length>0&&!this.disabled){E=Event.getEvent(E);var C=false;for(var F=0,B=this.monitors.length;F<B;F++){var A=this.monitors[F];if((Event.isEnterKey(E)&&A[0]==Appcelerator.Util.KeyManager.KEY_ENTER)||(Event.isEscapeKey(E)&&A[0]==Appcelerator.Util.KeyManager.KEY_ESCAPE)||(Event.isSpaceBarKey(E)&&A[0]==Appcelerator.Util.KeyManager.KEY_SPACEBAR)){var D=Event.element(E);if(A[1]==null||D==A[1]){A[2](E);C=true;break}}}if(C){Event.stop(E);return false}}return true}});Appcelerator.Core.onload(Appcelerator.Util.KeyManager.install.bind(Appcelerator.Util.KeyManager));if(window.navigator.language!=undefined){Appcelerator.Localization.currentLanguage=window.navigator.language}else{Appcelerator.Localization.currentLanguage="en-US"}Appcelerator.Localization.LanguageMap={};Appcelerator.Localization.addLanguageBundle=function(D,B,C){C=C==null?$H():typeof (C.get)=="function"?C:$H(C);if(Object.isArray(D)){for(var E=0;E<D.length;E++){Appcelerator.Localization.addLanguageBundle(D[E],B,C)}}else{Appcelerator.Localization.LanguageMap["language_"+D]={"map":C,"display":B,"lang":D};var A=D.indexOf("-");if(A>0){Appcelerator.Localization.LanguageMap["language_"+D.substring(0,A)]={"map":C,"display":B,"lang":D.substring(0,A)}}}};Appcelerator.Localization.updateLanguageBundle=function(E,C,D){var B=Appcelerator.Localization.getBundle(E);if(!B){Appcelerator.Localization.addLanguageBundle(E,C,D)}else{B.map=B.map.merge(D)}var A=E.indexOf("-");if(A>0){Appcelerator.Localization.updateLanguageBundle(E.substring(0,A),C,D)}};Appcelerator.Localization.getLanguages=function(){var B=[];for(var A in Appcelerator.Localization.LanguageMap){if(A.startsWith("language_")){B.push({id:A.substring(9),name:Appcelerator.Localization.LanguageMap[A].display})}}return B};Appcelerator.Localization.getBundle=function(C){C=(C==null)?Appcelerator.Localization.currentLanguage:C;var B=Appcelerator.Localization.LanguageMap["language_"+C];if(!B){var A=C.indexOf("-");if(A>0){return Appcelerator.Localization.getBundle(C.substring(0,A))}}return B};Appcelerator.Localization.set=function(B,C,D){var A=Appcelerator.Localization.getBundle(D);if(!A||!A.map){throw"language bundle not found for language: "+D}A.map.set(B,C)};Appcelerator.Localization.get=function(C,E,F){var B=Appcelerator.Localization.getBundle(F);if(B&&B.map){var D=B.map.get(C);if(!D){var A=B.lang.indexOf("-");if(A>0){return Appcelerator.Localization.get(C,E,B.lang.substring(0,A))}}return D||E}return E};Appcelerator.Localization.compiledTemplates={};Appcelerator.Localization.getWithFormat=function(B,D,F,A){F=(F==null)?Appcelerator.Localization.currentLanguage:F;var E=B+":"+F;var G=Appcelerator.Localization.compiledTemplates[E];if(!G){var C=Appcelerator.Localization.get(B,D,F);if(!C){return D}G=Appcelerator.Compiler.compileTemplate(C);Appcelerator.Localization.compiledTemplates[E]=G}return G.call(G,A)};Appcelerator.Localization.supportedTags=["div","span","input","a","td","select","option","li","h1","h2","h3","h4","ol","legend","img"];Appcelerator.Localization.registerTag=function(A){if(Appcelerator.Localization.supportedTags.indexOf(A)==-1){Appcelerator.Localization.supportedTags.push(A)}};Appcelerator.Localization.unregisterTag=function(A){var B=Appcelerator.Localization.supportedTags.indexOf(A);if(B!=-1){Appcelerator.Localization.supportedTags.removeAt(B)}};Appcelerator.Localization.addLanguageBundle(["en","en-US"],"English",{});Appcelerator.Util.MD5={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(A){return this.binl2hex(this.core_md5(this.str2binl(A),A.length*this.chrsz))},b64_md5:function(A){return this.binl2b64(this.core_md5(this.str2binl(A),A.length*this.chrsz))},str_md5:function(A){return this.binl2str(this.core_md5(this.str2binl(A),A.length*this.chrsz))},hex_hmac_md5:function(A,B){return this.binl2hex(this.core_hmac_md5(A,B))},b64_hmac_md5:function(A,B){return this.binl2b64(this.core_hmac_md5(A,B))},str_hmac_md5:function(A,B){return this.binl2str(this.core_hmac_md5(A,B))},md5_vm_test:function(){return this.hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"},core_md5:function(K,F){K[F>>5]|=128<<((F)%32);K[(((F+64)>>>9)<<4)+14]=F;var J=1732584193;var I=-271733879;var H=-1732584194;var G=271733878;for(var C=0;C<K.length;C+=16){var E=J;var D=I;var B=H;var A=G;J=this.md5_ff(J,I,H,G,K[C+0],7,-680876936);G=this.md5_ff(G,J,I,H,K[C+1],12,-389564586);H=this.md5_ff(H,G,J,I,K[C+2],17,606105819);I=this.md5_ff(I,H,G,J,K[C+3],22,-1044525330);J=this.md5_ff(J,I,H,G,K[C+4],7,-176418897);G=this.md5_ff(G,J,I,H,K[C+5],12,1200080426);H=this.md5_ff(H,G,J,I,K[C+6],17,-1473231341);I=this.md5_ff(I,H,G,J,K[C+7],22,-45705983);J=this.md5_ff(J,I,H,G,K[C+8],7,1770035416);G=this.md5_ff(G,J,I,H,K[C+9],12,-1958414417);H=this.md5_ff(H,G,J,I,K[C+10],17,-42063);I=this.md5_ff(I,H,G,J,K[C+11],22,-1990404162);J=this.md5_ff(J,I,H,G,K[C+12],7,1804603682);G=this.md5_ff(G,J,I,H,K[C+13],12,-40341101);H=this.md5_ff(H,G,J,I,K[C+14],17,-1502002290);I=this.md5_ff(I,H,G,J,K[C+15],22,1236535329);J=this.md5_gg(J,I,H,G,K[C+1],5,-165796510);G=this.md5_gg(G,J,I,H,K[C+6],9,-1069501632);H=this.md5_gg(H,G,J,I,K[C+11],14,643717713);I=this.md5_gg(I,H,G,J,K[C+0],20,-373897302);J=this.md5_gg(J,I,H,G,K[C+5],5,-701558691);G=this.md5_gg(G,J,I,H,K[C+10],9,38016083);H=this.md5_gg(H,G,J,I,K[C+15],14,-660478335);I=this.md5_gg(I,H,G,J,K[C+4],20,-405537848);J=this.md5_gg(J,I,H,G,K[C+9],5,568446438);G=this.md5_gg(G,J,I,H,K[C+14],9,-1019803690);H=this.md5_gg(H,G,J,I,K[C+3],14,-187363961);I=this.md5_gg(I,H,G,J,K[C+8],20,1163531501);J=this.md5_gg(J,I,H,G,K[C+13],5,-1444681467);G=this.md5_gg(G,J,I,H,K[C+2],9,-51403784);H=this.md5_gg(H,G,J,I,K[C+7],14,1735328473);I=this.md5_gg(I,H,G,J,K[C+12],20,-1926607734);J=this.md5_hh(J,I,H,G,K[C+5],4,-378558);G=this.md5_hh(G,J,I,H,K[C+8],11,-2022574463);H=this.md5_hh(H,G,J,I,K[C+11],16,1839030562);I=this.md5_hh(I,H,G,J,K[C+14],23,-35309556);J=this.md5_hh(J,I,H,G,K[C+1],4,-1530992060);G=this.md5_hh(G,J,I,H,K[C+4],11,1272893353);H=this.md5_hh(H,G,J,I,K[C+7],16,-155497632);I=this.md5_hh(I,H,G,J,K[C+10],23,-1094730640);J=this.md5_hh(J,I,H,G,K[C+13],4,681279174);G=this.md5_hh(G,J,I,H,K[C+0],11,-358537222);H=this.md5_hh(H,G,J,I,K[C+3],16,-722521979);I=this.md5_hh(I,H,G,J,K[C+6],23,76029189);J=this.md5_hh(J,I,H,G,K[C+9],4,-640364487);G=this.md5_hh(G,J,I,H,K[C+12],11,-421815835);H=this.md5_hh(H,G,J,I,K[C+15],16,530742520);I=this.md5_hh(I,H,G,J,K[C+2],23,-995338651);J=this.md5_ii(J,I,H,G,K[C+0],6,-198630844);G=this.md5_ii(G,J,I,H,K[C+7],10,1126891415);H=this.md5_ii(H,G,J,I,K[C+14],15,-1416354905);I=this.md5_ii(I,H,G,J,K[C+5],21,-57434055);J=this.md5_ii(J,I,H,G,K[C+12],6,1700485571);G=this.md5_ii(G,J,I,H,K[C+3],10,-1894986606);H=this.md5_ii(H,G,J,I,K[C+10],15,-1051523);I=this.md5_ii(I,H,G,J,K[C+1],21,-2054922799);J=this.md5_ii(J,I,H,G,K[C+8],6,1873313359);G=this.md5_ii(G,J,I,H,K[C+15],10,-30611744);H=this.md5_ii(H,G,J,I,K[C+6],15,-1560198380);I=this.md5_ii(I,H,G,J,K[C+13],21,1309151649);J=this.md5_ii(J,I,H,G,K[C+4],6,-145523070);G=this.md5_ii(G,J,I,H,K[C+11],10,-1120210379);H=this.md5_ii(H,G,J,I,K[C+2],15,718787259);I=this.md5_ii(I,H,G,J,K[C+9],21,-343485551);J=this.safe_add(J,E);I=this.safe_add(I,D);H=this.safe_add(H,B);G=this.safe_add(G,A)}return Array(J,I,H,G)},md5_cmn:function(F,C,B,A,E,D){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(C,F),this.safe_add(A,D)),E),B)},md5_ff:function(C,B,G,F,A,E,D){return this.md5_cmn((B&G)|((~B)&F),C,B,A,E,D)},md5_gg:function(C,B,G,F,A,E,D){return this.md5_cmn((B&F)|(G&(~F)),C,B,A,E,D)},md5_hh:function(C,B,G,F,A,E,D){return this.md5_cmn(B^G^F,C,B,A,E,D)},md5_ii:function(C,B,G,F,A,E,D){return this.md5_cmn(G^(B|(~F)),C,B,A,E,D)},core_hmac_md5:function(C,F){var E=this.str2binl(C);if(E.length>16){E=this.core_md5(E,C.length*this.chrsz)}var A=Array(16),D=Array(16);for(var B=0;B<16;B++){A[B]=E[B]^909522486;D[B]=E[B]^1549556828}var G=this.core_md5(A.concat(this.str2binl(F)),512+F.length*this.chrsz);return this.core_md5(D.concat(G),512+128)},safe_add:function(A,D){var C=(A&65535)+(D&65535);var B=(A>>16)+(D>>16)+(C>>16);return(B<<16)|(C&65535)},bit_rol:function(A,B){return(A<<B)|(A>>>(32-B))},str2binl:function(D){var C=Array();var A=(1<<this.chrsz)-1;for(var B=0;B<D.length*this.chrsz;B+=this.chrsz){C[B>>5]|=(D.charCodeAt(B/this.chrsz)&A)<<(B%32)}return C},binl2str:function(C){var D="";var A=(1<<this.chrsz)-1;for(var B=0;B<C.length*32;B+=this.chrsz){D+=String.fromCharCode((C[B>>5]>>>(B%32))&A)}return D},binl2hex:function(C){var B=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var D="";for(var A=0;A<C.length*4;A++){D+=B.charAt((C[A>>2]>>((A%4)*8+4))&15)+B.charAt((C[A>>2]>>((A%4)*8))&15)}return D},binl2b64:function(D){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var F="";for(var B=0;B<D.length*4;B+=3){var E=(((D[B>>2]>>8*(B%4))&255)<<16)|(((D[B+1>>2]>>8*((B+1)%4))&255)<<8)|((D[B+2>>2]>>8*((B+2)%4))&255);for(var A=0;A<4;A++){if(B*8+A*6>D.length*32){F+=this.b64pad}else{F+=C.charAt((E>>6*(3-A))&63)}}}return F}};if(!Appcelerator.Browser.isSafari){String.prototype.gsub=function(G,E){var A=[],F=this,C;if(typeof G=="string"){G=new RegExp(G,"g")}else{var B=(G.multiline?"m":"")+(G.ignoreCase?"i":"")+"g";G=new RegExp(G.source,B)}E=arguments.callee.prepareReplacement(E);var D=0;var C=G.exec(F);while(C){A.push(F.slice(D,C.index));D=G.lastIndex;A.push(String.interpret(E(C)));C=G.exec(F)}A.push(F.slice(D,F.length));return A.join("")};String.prototype.gsub.prepareReplacement=function(B){if(Object.isFunction(B)){return B}var A=new Template(B);return function(C){return A.evaluate(C)}}}Appcelerator.Compiler.registerAttributeProcessor(["div","input","button"],"activators",{handle:function(B,A,I){if(I&&(B.nodeName=="DIV"||B.getAttribute("type")=="button"||B.nodeName=="BUTTON")){Appcelerator.Compiler.addFieldSet(B,true);var E=I.split(",");if(E.length>0){var D=function(){var L=true;for(var N=0,K=E.length;N<K;N++){var M=$(E[N]);var J=M.validatorValid;if(!J){L=false;break}}B.setAttribute("disabled",!L);B.disabled=!L;if(B.disabled&&B.onActivatorsDisable){B.onActivatorsDisable()}if(!B.disabled&&B.onActivatorsEnable){B.onActivatorsEnable()}};for(var G=0,F=E.length;G<F;G++){var C=E[G];var H=$(C);if(!H){throw"syntax error: invalid field: "+C+" specified for activator on field: "+B.id}if(!Appcelerator.Compiler.getFunction(H,"addValidationListener")){throw"syntax error: non-validator field: "+C+" specified for activator on field: "+B.id}Appcelerator.Compiler.executeFunction(H,"addValidationListener",[D])}D()}}},metadata:{description:("")}});Appcelerator.Compiler.registerAttributeProcessor("form","disablesubmit",{handle:function(B,C,D){if(D=="true"){var A=document.createElement("input");A.type="text";A.style.display="none";A.name="disablesubmit";B.appendChild(A)}},metadata:{description:("When set to true, then it will disable the form from auto-submit when a user hits enter.")}});Appcelerator.Compiler.registerAttributeProcessor("div","draggable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();var E=new Draggable(B.id,A);Appcelerator.Compiler.addTrash(B,function(){E.destroy()})}},metadata:{description:("Make this element draggable. Dragged elements can be dropped on a droppable.")}});Appcelerator.Compiler.registerAttributeProcessor("div","droppable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();A.onHover=function(G){var F=B.hoverListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onHover(G)}}};A.onDrop=function(G){var F=B.dropListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onDrop(G)}}};Droppables.add(B.id,A);Appcelerator.Compiler.addTrash(B,function(){Droppables.remove(B)})}},metadata:{description:("Make this element a possible drop target.")}});Appcelerator.Compiler.registerAttributeProcessor("*","fieldset",{handle:function(A,B,C){if(C&&A.getAttribute("type")!="button"){Appcelerator.Compiler.addFieldSet(A,false);Appcelerator.Compiler.addTrash(A,function(){Appcelerator.Compiler.removeFieldSet(A)})}},metadata:{description:("Groups fields together. Messages sent from an element with a <i>fieldset</i> will contain a payload built from all the elements in the fieldset.<br/>The keys of the payload will be the names (or, lacking names, the ids) of the fieldset elements and the payload values will be the result of Appcelerator.Compiler.getInputFieldValue() on each element.")}});Appcelerator.Compiler.Image={};Appcelerator.Compiler.registerAttributeProcessor("img","srcexpr",{handle:function(img,attribute,value){if(value){try{var srcvalue=eval(String.unescapeXML(value));if(Appcelerator.Browser.isIE6){img.onload=function(){img.addBehavior(Appcelerator.Core.getModuleCommonDirectory()+"/images/appcelerator/iepngfix.htc")}}img.src=srcvalue}catch(e){Appcelerator.Compiler.handleElementException(img,e,"setting img srcexpr using expression = "+value)}}}});Appcelerator.Localization.AttributeProcessor={handle:function(B,C,D){if(D){var A=Appcelerator.Localization.get(D);if(!A){Logger.error("couldn't find localization key for "+D);return }switch(Appcelerator.Compiler.getTagname(B)){case"select":B.options.length=0;for(var F=0;F<A.length;F++){var E=A[F];B.options[B.options.length]=new Option(E.value,E.id)}break;case"option":if(typeof A=="object"){B.text=A.value;B.value=A.id}else{B.value=B.text=A}break;case"input":B.value=A;break;case"img":B.setAttribute("title",A);B.setAttribute("alt",A);break;default:B.innerHTML=A;break}}},metadata:{description:("Specify a language bundle key that will be used to lookup localized text for this element.")}};Appcelerator.Compiler.registerAttributeProcessor(Appcelerator.Localization.supportedTags,"langid",Appcelerator.Localization.AttributeProcessor);Appcelerator.Compiler.registerAttributeProcessor("*","on",{handle:function(A,B,C){if(C){var C=A.getAttribute("set");if(C){return }Appcelerator.Compiler.parseOnAttribute(A)}},metadata:{description:("Contains a Web Expression: a mapping between event triggers and actions. Independent trigger/action pairs can be join with the <b>or</b> keyword.<br/> Multiple actions for a single trigger can be combined with the <b>and</b> keyword.<br/> ")}});Appcelerator.Compiler.registerAttributeProcessor(["img"],"reflectable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();Reflection.add(B,A)}},metadata:{description:("Add reflection to any image across all browsers.")}});var Reflection={defaultHeight:0.5,defaultOpacity:0.5,add:function(D,O){Reflection.remove(D);doptions={"height":Reflection.defaultHeight,"opacity":Reflection.defaultOpacity};if(O){for(var I in doptions){if(!O[I]){O[I]=doptions[I]}}}else{O=doptions}try{var L=document.createElement("div");var B=D;var E=B.className.split(" ");var H="";for(j=0;j<E.length;j++){if(E[j]!="reflect"){if(H){H+=" "}H+=E[j]}}var J=Math.floor(B.height*O["height"]);var G=Math.floor(B.height*(1+O["height"]));var N=B.width;if(document.all&&!window.opera){if(B.parentElement.tagName=="A"){var L=document.createElement("a");L.href=B.parentElement.href}L.className=H;B.className="reflected";L.style.cssText=B.style.cssText;B.style.cssText="vertical-align: bottom";var F=document.createElement("img");F.src=B.src;F.style.width=N+"px";F.style.display="block";F.style.height=B.height+"px";F.style.marginBottom="-"+(B.height-J)+"px";F.style.filter="flipv progid:DXImageTransform.Microsoft.Alpha(opacity="+(O["opacity"]*100)+", style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy="+(O["height"]*100)+")";L.style.width=N+"px";L.style.height=G+"px";B.parentNode.replaceChild(L,B);L.appendChild(B);L.appendChild(F)}else{var C=document.createElement("canvas");if(C.getContext){L.className=H;B.className="reflected";L.style.cssText=B.style.cssText;B.style.cssText="vertical-align: bottom";var A=C.getContext("2d");C.style.height=J+"px";C.style.width=N+"px";C.height=J;C.width=N;L.style.width=N+"px";L.style.height=G+"px";B.parentNode.replaceChild(L,B);L.appendChild(B);L.appendChild(C);A.save();A.translate(0,D.height-1);A.scale(1,-1);A.drawImage(D,0,0,N,D.height);A.restore();A.globalCompositeOperation="destination-out";var M=A.createLinearGradient(0,0,0,J);M.addColorStop(1,"rgba(255, 255, 255, 1.0)");M.addColorStop(0,"rgba(255, 255, 255, "+(1-O["opacity"])+")");A.fillStyle=M;if(navigator.appVersion.indexOf("WebKit")!=-1){A.fill()}else{A.fillRect(0,0,N,J*2)}}}}catch(K){}},remove:function(A){if(A.className=="reflected"){A.className=A.parentNode.className;A.parentNode.parentNode.replaceChild(A,A.parentNode)}}};Appcelerator.Compiler.registerAttributeProcessor(["div","img","table"],"resizable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();A.resize=function(G){var F=B.resizeListeners;if(F&&F.length>0){for(var H=0;H<F.length;H++){var E=F[H];E.onResize(G)}}};B.resizable=new Resizeable(B.id,A);Appcelerator.Compiler.addTrash(B,function(){B.resizable.destroy()})}},metadata:{description:("")}});Appcelerator.Compiler.SelectableGroups={};Appcelerator.Compiler.retainedWidgetAttributes.push("selectable");Appcelerator.Compiler.wireSelectable=function(G,K){G=$(G);var A=K;var D=false;var J=A.split(",");if(J.length>1){D=J[1]=="multiselect"}var B=G.id;var M=G.getAttribute("supressAutoStyles")=="true";var F=Appcelerator.Compiler.SelectableGroups[A];if(!F){var L=D?[]:null;F={selected:L,members:[]};Appcelerator.Compiler.SelectableGroups[A]=F}var E=function(O,P,Q,N){Q=Q||0;if(!M){if(P){O.setAttribute("selected","true");Element.addClassName(O,"selected")}else{O.removeAttribute("selected");Element.removeClassName(O,"selected")}}Appcelerator.Compiler.executeFunction(O,"selected",[P,Q,N])};for(var I=0,H=G.childNodes.length;I<H;I++){var C=G.childNodes[I];if(C&&C.nodeType&&C.nodeType==1){(function(){var O=Appcelerator.Compiler.getAndEnsureId(C);F.members.push(O);var N={};N.element=C;C.app_selectable=true;var Q=function(W,a){W=Event.getEvent(W);var X=this.element;if(W){var Z=Event.element(W);if(Z==this.element){if(W._selectedEventSeen){return }W._selectedEventSeen=true}else{var T=Z.parentNode;while(T&&T!=document.body){if(T.app_selectable){X=T;if(W._selectedEventSeen){return }if(X==F.selected){return }W._selectedEventSeen=true;break}else{T=T.parentNode}}}}a=a!=null?a==true:false;var R=false;var U=a;var S=(!a&&F.selected&&F.selected!=X);if(F.selected||(a&&!F.selected)){if(D){var Y=F.selected.indexOf(X.id);if(Y>=0){U=true;E(X,false,F.selected.length-1,U);F.selected.removeAt(Y);R=true;return }}else{var Z=F.selected;E(F.selected,false,S?1:0,true);R=true;F.selected=null;if(Z==X){return }}}if(!a){var V=1;if(D){F.selected.push(X.id);V=F.selected.length}else{F.selected=X}E(X,true,V,false);R=true}else{if(!R){var Y=F.selected.indexOf(X.id);if(Y>=0){E(X,false,F.selected.length-1,U);F.selected.removeAt(Y);R=true;return }Logger.warn("not removed on unselected "+X.id+",current="+F.selected.join(","))}}};var P=Q.bind(N);Appcelerator.Compiler.attachFunction(C,"unselect",function(){Q.apply(this,[null,true])}.bind(N));Appcelerator.Compiler.attachFunction(C,"select",function(){Q.apply(this,[null,false])}.bind(N));Event.observe(C,"click",P,false);Appcelerator.Compiler.addTrash(C,function(){Q.apply(this,[null,true]);F.members.remove(this.element.id);Event.stopObserving(this.element,"click",P)}.bind(N))})()}}};Appcelerator.Compiler.registerAttributeProcessor(["div","ul","ol","tr"],"selectable",{handle:function(A,B,C){if(C){Appcelerator.Compiler.wireSelectable(A,C)}}});Appcelerator.Compiler.registerAttributeProcessor(["div","ul","ol"],"sortable",{handle:function(B,C,D){if(D&&D!="false"){var A=D=="true"?{}:D.evalJSON();if(!A.tag){Element.cleanWhitespace(B);var E=B.down();if(E){A.tag=Appcelerator.Compiler.getTagname(E)}}A.onUpdate=function(H){var G=B.updateListeners;if(G&&G.length>0){for(var I=0;I<G.length;I++){var F=G[I];F.onUpdate(H)}}};A.onChange=function(H){var G=B.changeListeners;if(G&&G.length>0){for(var I=0;I<G.length;I++){var F=G[I];F.onChange(H)}}};Sortable.create(B.id,A);Appcelerator.Compiler.addTrash(B,function(){Sortable.destroy(B)})}}});Appcelerator.Compiler.registerAttributeProcessor(["textarea","input","select"],"validator",{handle:function(H,B,J){if(J&&H.getAttribute("type")!="button"){var G=Appcelerator.Validator[J];if(!G){throw"syntax error: validator specified is not registered: "+J}var G=Appcelerator.Validator[J];var J=Appcelerator.Compiler.getInputFieldValue(H,true,true);H.validatorValid=G(J,H)||false;var D=H.getAttribute("decorator");var F=null,K=null;if(D){F=Appcelerator.Decorator[D];if(!F){throw"syntax error: decorator specified is not registered: "+D}K=F?H.getAttribute("decoratorId"):null}var A=null;var E=0;var C=function(){E=0;Appcelerator.Compiler.executeFunction(H,"revalidate")};Appcelerator.Compiler.installChangeListener(H,function(){if(A){clearTimeout(A);A=null}if(E++<10){A=setTimeout(C,100)}else{C()}return true});var I=[];Appcelerator.Compiler.attachFunction(H,"revalidate",function(){var O=Appcelerator.Compiler.getInputFieldValue(H,true,true);var M=G(O,H);var Q=M==H.validatorValid;H.validatorValid=M;if(F){F.apply(Appcelerator.Decorator,[H,H.validatorValid,K])}if(!O){Element.addClassName(H,"validator_empty");Element.removeClassName(H,"validator_value")}else{Element.addClassName(H,"validator_value");Element.removeClassName(H,"validator_empty")}if(M){Element.removeClassName(H,"validator_invalid");Element.addClassName(H,"validator_valid")}else{Element.removeClassName(H,"validator_valid");Element.addClassName(H,"validator_invalid")}if(Q){return M}if(I.length>0){for(var P=0,L=I.length;P<L;P++){var N=I[P];N.apply(N,[H,H.validatorValid])}}return H.validatorValid});Appcelerator.Compiler.attachFunction(H,"removeValidationListener",function(M){var L=I.indexOf(M);if(L>=0){I.removeAt(L)}});Appcelerator.Compiler.attachFunction(H,"addValidationListener",function(L){I.push(L)});Appcelerator.Compiler.addTrash(H,function(){Appcelerator.Compiler.removeChangeListener(H);I=null});Appcelerator.Compiler.executeFunction(H,"revalidate")}}});Appcelerator.UI=Class.create();Appcelerator.UI.UIManager={managers:{}};Appcelerator.UI.UIComponents={};Appcelerator.UI.UIListeners={};Appcelerator.UI.registerListener=function(C,A,D,F){var E=function(){if(this.name==A||A=="*"){if(this.event==D||D=="*"){var G=this.data||{};G.type=this.type;G.name=this.name;G.event=this.event;F.call(G)}}};var B=Appcelerator.UI.UIListeners[C];if(!B){B=[];Appcelerator.UI.UIListeners[C]=B}B.push(E)};Appcelerator.UI.fireEvent=function(D,A,E,F){var C=Appcelerator.UI.UIListeners[D];if(C&&C.length>0){var B={type:D,name:A,event:E,data:F};for(var G=0;G<C.length;G++){C[G].call(B)}}};Appcelerator.UI.registerUIManager=function(B,A){Appcelerator.UI.UIManager.managers[B]=A};Appcelerator.UI.registerUIComponent=function(C,B,A){try{var D=Appcelerator.UI.UIComponents[C+":"+B];if(!D){D={};Appcelerator.UI.UIComponents[C+":"+B]=D}D.impl=A;D.loaded=true;if(A.setPath){A.setPath.call(A,D.dir)}if(D.elements){for(var G=0;G<D.elements.length;G++){var F=D.elements[G];Appcelerator.UI.activateUIComponent(D.impl,D.dir,F.type,F.name,F.element,F.options,F.callback)}D.elements=null}}catch(E){Appcelerator.Compiler.handleElementException(null,E,"registerUIComponent for "+C+":"+B)}};Appcelerator.UI.activateUIComponent=function(K,H,M,B,G,P,N){var J=Appcelerator.UI.UIManager.parseAttributes(G,K,P);if(J!=false){try{K.build(G,J);Appcelerator.UI.addElementUI(G,M,B)}catch(I){Appcelerator.Compiler.handleElementException(G,I,"activateUIComponent for "+M+":"+B)}}if(K.getActions){var E=K.getActions();var C=G.id;for(var L=0;L<E.length;L++){(function(){var Q=E[L];var S=K[Q];if(S){var R=function(T,U,V,b,Y,X,a,Z){try{S.apply(K,[T,J,V,b,Y,X,a,Z])}catch(W){$E("Error executing "+Q+" in container type: "+Z+". Error "+Object.getExceptionDetail(W)+", stack="+W.stack)}};Appcelerator.Compiler.buildCustomElementAction(Q,G,R)}})()}}if(K.getConditions){Appcelerator.Compiler.customConditionObservers[G.id]={};var D=K.getConditions();for(var F=0;F<D.length;F++){var O=D[F];var A=Appcelerator.Compiler.customConditionFunctionCallback(O);Appcelerator.Compiler.registerCustomCondition({conditionNames:[O]},A,G.id)}}Appcelerator.Compiler.parseOnAttribute(G);if(N){N()}};Appcelerator.UI.loadUIComponent=function(E,C,D,B,H){var F=Appcelerator.UI.UIComponents[E+":"+C];if(F){if(F.loaded){Appcelerator.UI.activateUIComponent(F.impl,F.dir,E,C,D,B,H)}else{F.elements.push({type:E,name:C,element:D,options:B,callback:H})}}else{if(!D.state){D.state={pending:0}}D.state.pending+=1;var A=Appcelerator.DocumentPath+"/components/"+E+"s/"+C;var G=A+"/"+C+".js";Appcelerator.UI.UIComponents[E+":"+C]={dir:A,loaded:false,elements:[{type:E,name:C,element:D,options:B,callback:H}]};Appcelerator.Core.remoteLoadScript(G,function(){D.state.pending-=1;Appcelerator.Compiler.checkLoadState(D)},function(){Appcelerator.UI.UIManager.handleLoadError(D,E,C,null,G);D.state.pending-=1;Appcelerator.Compiler.checkLoadState(D)})}};Appcelerator.UI.UIManager.handleLoadError=function(C,D,B,A,E){$E("error loading - type:"+D+",name:"+B+",subtype:"+A+"\nfor "+C.id+" from url="+E);Appcelerator.Compiler.handleElementException(C,null,"couldn't load "+D+":"+B+" for : "+E)};Appcelerator.UI.createControl=function(B,C,A,D){Appcelerator.loadUIManager("control",C,B,A||{},D)};Appcelerator.UI.addBehavior=function(B,C,A,D){Appcelerator.loadUIManager("behavior",C,B,A||{},D)};Appcelerator.UI.createLayout=function(B,C,A,D){Appcelerator.loadUIManager("layout",C,B,A||{},D)};Appcelerator.UI.dependencyMap=[];Appcelerator.UI.elementMap={};Appcelerator.UI.addElementUIDependency=function(B,D,C,E,A,F){if(Appcelerator.UI.elementMap[B.id+"_"+E+"_"+A]){F(B)}else{Appcelerator.UI.dependencyMap.push({element:B,ui:D,type:C,dependencyUI:E,dependencyType:A,callback:F})}};Appcelerator.UI.addElementUI=function(B,D,C){var E=Appcelerator.UI.dependencyMap;for(var A=0;A<E.length;A++){if(E[A].element.id==B.id){if((E[A].dependencyUI==D)&&(E[A].dependencyType==C)){if(Appcelerator.UI.elementMap[B.id+"_"+E[A].ui+"_"+E[A].type]){E[A].callback(B)}}}}Appcelerator.UI.elementMap[B.id+"_"+D+"_"+C]={element:B}};Appcelerator.loadUIManager=function(G,F,B,E,H,I){var D=Appcelerator.UI.UIManager.managers[G];if(D){var A={element:B,args:E};Appcelerator.UI.fireEvent(G,F,"beforeBuild",A);var C=function(){Appcelerator.UI.fireEvent(G,F,"afterBuild",A);if(I){I()}};D(F,B,E,C)}else{if(H==true){$E("UI not found for "+G+", type: "+F)}else{B.state.pending+=1;Appcelerator.Core.requireCommonJS("appcelerator/"+G+"s/"+G+"s.js",function(){Appcelerator.UI.fireEvent(G,F,"register");Appcelerator.loadUIManager(G,F,B,E,true,I);B.state.pending-=1;Appcelerator.Compiler.checkLoadState(B.state)},function(){Appcelerator.Compiler.handleElementException(B,null,"error loading "+F+"["+name+"]");B.state.pending-=1;Appcelerator.Compiler.checkLoadState(B.state)})}}};Appcelerator.Compiler.registerAttributeProcessor("*","set",{queue:[],handle:function(E,B,N){Element.addClassName(E,"container");var G=Appcelerator.Compiler.smartSplit(N," and ");var H=0;var A=function(){H++;if(H==G.length){Appcelerator.Compiler.compileElementChildren(E)}};for(var F=0;F<G.length;F++){var M=G[F].replace("[",",").replace("]","");var L=M.split(",");var K;var J;var I={};for(var D=0;D<L.length;D++){if(D==0){K=L[0].trim()}else{if(D==1){J=L[1].trim()}else{var C=L[D].split("=");I[C[0].trim()]=C[1].trim()}}}if(F==0){E.stopCompile=true}Appcelerator.loadUIManager(K,J,E,I,false,A)}},metadata:{description:("set visual properties for an element")}});Appcelerator.UI.UIManager.defaultThemes={"panel":"basic","shadow":"basic","button":"white_gradient","input":"white_gradient","textarea":"white_gradient","select":"thinline","tabpanel":"white","accordion":"basic"};Appcelerator.UI.UIManager.getDefaultTheme=function(A){return Appcelerator.UI.UIManager.defaultThemes[A]};Appcelerator.UI.UIManager.setDefaultThemes=function(A,B){Appcelerator.UI.UIManager.defaultThemes[A]=B};Appcelerator.UI.UIManager.attrToJSON=function(D){var A=D.split(",");var C={};for(var B=0;B<A.length;B++){var E=A[B].split("=");C[E[0].trim()]=E[1].trim()}return C};Appcelerator.UI.UIManager.parseAttributes=function(F,H,C){var A=H.getAttributes();for(var E=0;E<A.length;E++){var B=false;var D=A[E];var G=C[D.name]||F.style[D.name]||D.defaultValue;if(Object.isFunction(G)){G=D.defaultValue}if(!G&&!D.optional){Appcelerator.Compiler.handleElementException(F,null,'required attribute "'+D.name+'" not defined for '+F.id);B=true}C[D.name]=G;if(B==true){$E("error parsing attributes for "+F);return false}}return C};Appcelerator.UI.themes={};Appcelerator.Core.registerTheme=function(D,A,F,B){var C=Appcelerator.Core.getThemeKey(D,A,F);var E=Appcelerator.UI.themes[C];if(!E){E={};Appcelerator.UI.themes[C]=E}E.impl=B;E.loaded=true;Appcelerator.Core.loadTheme(D,A,F,null,null)};Appcelerator.Core.getThemeKey=function(B,A,C){return B+":"+A+":"+C};Appcelerator.Core.loadTheme=function(H,C,D,E,M){D=D||Appcelerator.UI.UIManager.getDefaultTheme(C);var J=Appcelerator.Core.getThemeKey(H,C,D);var B=Appcelerator.UI.themes[J];var A=false;var L=Appcelerator.DocumentPath+"/components/"+H+"s/"+C+"/themes/"+D;if(!B){B={callbacks:[],impl:null,loaded:false,path:L};Appcelerator.UI.themes[J]=B;A=true}if(B.loaded){if(B.callbacks&&B.callbacks.length>0&&B.impl&&B.impl.build){for(var I=0;I<B.callbacks.length;I++){var K=B.callbacks[I];B.impl.build(K.element,K.options)}}if(E!=null&&M!=null&&B.impl&&B.impl.build){if(B.impl.setPath){B.impl.setPath.call(B.impl,L)}B.impl.build(E,M)}B.callbacks=null}else{B.callbacks.push({element:E,options:M})}if(A){var G=L+"/"+D+".css";Appcelerator.Core.remoteLoadCSS(G);var F=L+"/"+D+".js";Appcelerator.Core.remoteLoadScript(F,null,function(){Appcelerator.UI.UIManager.handleLoadError(E,H,D,C,F)})}};Appcelerator.UI.registerUIManager("theme",function(E,C,A,F){if(E=="defaults"){for(var B in A){Appcelerator.UI.UIManager.setDefaultThemes(B,A[B])}Appcelerator.Compiler.compileElementChildren(C)}else{Element.addClassName(C,"themed");var D=C.nodeName.toLowerCase();A["theme"]=E;Appcelerator.UI.loadUIComponent("control",D,C,A,F)}});Appcelerator.UI.ContainerManager={};Appcelerator.UI.widgetRegex=/^app:/;Appcelerator.UI.registerUIManager("control",function(C,B,A,E){if(Appcelerator.UI.widgetRegex.test(C)){var D=Appcelerator.Compiler.createCompilerState();D.pending+=1;D.scanned=true;Appcelerator.Core.requireModule(C,function(){var F=Appcelerator.Compiler.compileWidget(B,D,C);D.pending-=1;Appcelerator.Compiler.checkLoadState(D);Element.fire(B,"element:compiled:"+B.id,{id:B.id})});return }Element.addClassName(B,C);Appcelerator.UI.loadUIComponent("control",C,B,A,E)});Appcelerator.UI.LayoutManager={};Appcelerator.UI.LayoutManager._formatTable=function(A){return'<table width="'+A["width"]+'" cellspacing="'+(A["cellspacing"]||"")+'" cellpadding="'+(A["cellpadding"]||"0")+'">'};Appcelerator.UI.LayoutManager._buildForm=function(E){var B=E["childNodes"];var L=E["html"];var O=E["align"];var C=E["colspan"];var I=E["hintPos"];var D=E["errorPos"];var P=E["buttonPos"];var U=E["labelWidth"];var W=E["element"];var R=W.getAttribute("fieldset")||W.id+"_fieldset";var V=[];var H=[];var A=[];var X=[];var S=[];for(var T=0,Q=B.length;T<Q;T++){var N=B[T];if(N.nodeType==1){switch(N.tagName.toLowerCase()){case"input":case"select":case"textarea":if(N.getAttribute("type")=="button"){if(Appcelerator.Browser.isIE){A.push(N.outerHTML)}else{A.push(Appcelerator.Util.Dom.toXML(N,true,Appcelerator.Compiler.getTagname(N)))}}else{var F=N.getAttribute("fieldset");if(!F){N.setAttribute("fieldset",R)}V.push({"element":N})}break;case"label":if(Appcelerator.Browser.isIE){if(N.getAttribute("type")=="hint"){X.push({"id":N.htmlFor,"element":N,"html":N.outerHTML})}else{if(N.getAttribute("type")=="error"){S.push({"id":N.htmlFor,"element":N,"html":N.outerHTML})}else{H.push({"id":N.htmlFor,"element":N,"html":N.outerHTML})}}}else{if(N.getAttribute("type")=="hint"){X.push({"id":N.getAttribute("for"),"element":N,"html":Appcelerator.Util.Dom.toXML(N,true,Appcelerator.Compiler.getTagname(N))})}else{if(N.getAttribute("type")=="error"){S.push({"id":N.getAttribute("for"),"element":N,"html":Appcelerator.Util.Dom.toXML(N,true,Appcelerator.Compiler.getTagname(N))})}else{H.push({"id":N.getAttribute("for"),"element":N,"html":Appcelerator.Util.Dom.toXML(N,true,Appcelerator.Compiler.getTagname(N))})}}}break;case"button":if(Appcelerator.Browser.isIE){A.push(N.outerHTML)}else{A.push(Appcelerator.Util.Dom.toXML(N,true,Appcelerator.Compiler.getTagname(N)))}break}}}for(var K=0;K<V.length;K++){(function(){var k="";var g="";var a="";var l="";l=V[K].element;k="";for(var b=0;b<H.length;b++){if(H[b].id==l.id){k=H[b].html;break}}g="";for(var b=0;b<S.length;b++){if(S[b].id==l.id){g=S[b].html;break}}a="";for(var b=0;b<X.length;b++){if(X[b].id==l.id){a=(I=="input")?X[b].element.innerHTML:X[b].html;break}}if(O=="horizontal"){var h="middle";var Z="5px";var d="5px";var Y="0px";if((D=="top"||D=="bottom")&&((I=="top"||I=="bottom"))){h="middle";Z="15px"}else{if(D=="top"||I=="top"){h="bottom"}else{if(D=="bottom"||I=="bottom"){h="top";Y="4px"}}}if((Z=="5px")&&(I!="bottom")&&(D!="bottom")){Z="9px"}L+='<tr><td align="left" valign="'+h+'" width="'+U+'" style="padding-bottom:'+Z+";padding-top:"+Y+'" >'+k+"</td>";L+='<td align="left" style="padding-bottom:'+d+'">';L+=(I=="top")?"<div>"+a+"</div>":"";L+=(D=="top")?"<div>"+g+"</div>":"";L+=Appcelerator.Util.Dom.toXML(l,true,Appcelerator.Compiler.getTagname(l));L+=(I=="right")?'<span style="padding-left:5px">'+a+"</span>":"";L+=(D=="right")?'<span style="padding-left:5px">'+g+"</span>":"";L+=(I=="bottom")?'<div style="margin-bottom:10px;position:relative;top:-1px">'+a+"</div>":"";L+=(D=="bottom")?'<div style="margin-bottom:10px;position:relative;top:-1px">'+g+"</div>":"";L+="</td></tr>"}else{L+='<tr><td align="left">'+k;L+=(I=="top")?'<span style="padding-left:5px">'+a+"</span>":"";L+=(D=="top")?'<span style="padding-left:5px">'+g+"</span>":"";L+="</td></tr><tr>";L+=(D!="bottom"&&I!="bottom")?'<td align="left" style="padding-bottom:5px">':'<td align="left">';L+=Appcelerator.Util.Dom.toXML(l,true,Appcelerator.Compiler.getTagname(l));L+=(I=="right")?'<span style="padding-left:5px">'+a+"</span>":"";L+=(D=="right")?'<span style="padding-left:5px">'+g+"</span>":"";L+=(I=="bottom")?'<div style="margin-bottom:5px;position:relative;top:-1px">'+a+"</div>":"";L+=(D=="bottom")?'<div style="margin-bottom:5px;position:relative;top:-1px">'+g+"</div>":"";L+="</td></tr>"}if(E["hintPos"]=="input"){W.observe("element:compiled:"+W.id,function(m){if(I=="input"){$(l.id).value=a;Element.addClassName($(l.id),"layout_form_hinttext")}Event.observe(l.id,"click",function(n){if($(l.id).value==a){$(l.id).value="";Element.removeClassName($(l.id),"layout_form_hinttext")}});Event.observe(l.id,"blur",function(n){if($(l.id).value==""){$(l.id).value=a;Element.addClassName($(l.id),"layout_form_hinttext")}})})}})()}if(A.length>0){var M=(D=="bottom"||I=="bottom")?"0px":"5px";var G="5px";if(P=="right"){L+='<tr><td></td><td align="left" colspan="1" style="padding-top:'+M+";padding-bottom:"+G+'">'}else{L+='<tr><td align="left" colspan='+C+' style="padding-top:'+M+";padding-bottom:"+G+'">'}for(var J=0;J<A.length;J++){L+=A[J]+'<span style="padding-right:10px"></span>'}L+="</td></tr>"}L+="</table>";return L};Appcelerator.UI.registerUIManager("layout",function(C,B,A,D){Element.addClassName(B,"layout");Element.addClassName(B,C);Appcelerator.UI.loadUIComponent("layout",C,B,A,D)});Appcelerator.UI.registerUIManager("behavior",function(C,B,A,D){Appcelerator.UI.loadUIComponent("behavior",C,B,A,D)});var absoluteUriRefRegex=/^[A-Z][0-9A-Z+\-\.]*:/i;var splitUriRefRegex=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/;var reMissingGroupSupport=(typeof "".match(/(a)?/)[1]!="string");Appcelerator.URI=Class.create();Appcelerator.URI.isAbsolute=function(A){return absoluteUriRefRegex.test(A)};Appcelerator.URI.splitUriRef=function(B){var G=B.match(splitUriRefRegex);G.shift();var A=G[1],D=G[3],F=G[4],E=G[6],H=G[8];if(!reMissingGroupSupport){var C;if(G[0]==""){A=C}if(G[2]==""){D=C}if(G[5]==""){E=C}if(G[7]==""){H=C}}G=[A,D,this.uriPathRemoveDotSegments(F),E,H];return G};Appcelerator.URI.unsplitUriRef=function(B){var A="";if(typeof B[0]!="undefined"){A+=B[0]+":"}if(typeof B[1]!="undefined"){A+="//"+B[1]}A+=B[2];if(typeof B[3]!="undefined"){A+="?"+B[3]}if(typeof B[4]!="undefined"){A+="#"+B[4]}return A};Appcelerator.URI.uriPathRemoveDotSegments=function(E){if(E=="."||E==".."){return""}while(E){if(E.substring(0,2)=="./"){E=E.substring(2)}else{if(E.substring(0,3)=="../"){E=E.substring(3)}else{if(E.substring(0,2)=="//"){E=E.substring(1)}else{break}}}}var D=false;if(E.charAt(0)=="/"){E=E.substring(1);if(E.charAt(0)=="/"){E=E.substring(1)}D=true}if(E.substring(E.length-2)=="/."){E=E.substring(0,E.length-1)}var B=E.split("/");var C=[];B=B.reverse();while(B.length){var A=B.pop();if(A==".."){if(C.length){C.pop()}else{if(!D){C.push(A)}}if(!B.length){C.push("")}}else{if(A!="."){C.push(A)}}}return(D&&"/"||"")+C.join("/")};Appcelerator.URI.absolutizeURI=function(Q,B){if(!B||!Appcelerator.URI.isAbsolute(B)){throw Error("baseUri '"+B+"' is not absolute")}if(Q==""||Q.charAt(0)=="#"){return B.split("#")[0]+Q}var R,F,H,O;var M=Appcelerator.URI.splitUriRef(Q);var L=M[0],A=M[1],E=M[2],K=M[3],N=M[4];if(typeof L!="undefined"){var R=L;var F=A;var H=Appcelerator.URI.uriPathRemoveDotSegments(E);var O=K}else{M=Appcelerator.URI.splitUriRef(B);var C=M[0],D=M[1],G=M[2],J=M[3],P=M[4];if(typeof A!="undefined"){F=A;H=Appcelerator.URI.uriPathRemoveDotSegments(E);O=K}else{if(!E){H=G;O=(typeof K!="undefined"&&K||J)}else{if(E.charAt(0)=="/"){H=Appcelerator.URI.uriPathRemoveDotSegments(E)}else{if(typeof D!="undefined"&&!G){H="/"+E}else{H=G.substring(0,G.lastIndexOf("/")+1)+E}H=Appcelerator.URI.uriPathRemoveDotSegments(H)}O=K}F=D}R=C}var I=Appcelerator.URI.unsplitUriRef([R,F,H,O,N]);return I};Appcelerator.Util.UUID={dateSeed:(Appcelerator.started||new Date).getTime(),convert:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],base16:function(C){var B=null;if(C<16){B=this.convert[C]}else{var D=""+Math.floor(C/16);var A=C-D*16;if(D>=16){B=this.base16(D)+this.convert[A]}else{B=this.convert[D]+this.convert[A]}}return B},generateNewId:function(){var E=new Date(1970,9,22,0,0,0,0);var D=this.base16(this.dateSeed-E.getTime());var B=this.base16(Math.floor(999999999999*Math.random()));var C=String(window.location.pathname).encode64();var A=(C.length>10?C.substring(0,10):C).gsub(/[^a-zA-Z0-9]/,"0");var F=this.base16(Math.round(this.dateSeed*Math.random()));return D+"-"+B+"-"+A+"-"+F}};Object.extend(Appcelerator.Validator,{toString:function(){return"[Appcelerator.Validator]"},uniqueId:0,names:[],addValidator:function(A,B){Appcelerator.Validator[A]=B;Appcelerator.Validator.names.push(A)},URI_REGEX:/^((([hH][tT][tT][pP][sS]?|[fF][tT][pP])\:\/\/)?([\w\.\-]+(\:[\w\.\&%\$\-]+)*@)?((([^\s\(\)\<\>\\\"\.\[\]\,@;:]+)(\.[^\s\(\)\<\>\\\"\.\[\]\,@;:]+)*(\.[a-zA-Z]{2,4}))|((([01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}([01]?\d{1,2}|2[0-4]\d|25[0-5])))(\b\:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}|0)\b)?((\/[^\/][\w\.\,\?\'\\\/\+&%\$#\=~_\-@]*)*[^\.\,\?\"\'\(\)\[\]!;<>{}\s\x7F-\xFF])?)$/,ALPHANUM_REGEX:/^[0-9a-zA-Z]+$/,DECIMAL_REGEX:/^[-]?([1-9]{1}[0-9]{0,}(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|\.[0-9]{1,2})$/,EMAIL_REGEX:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,PHONE_REGEX:/^(?:\([2-9]\d{2}\)\ ?|[2-9]\d{2}(?:\-?|\ ?))[2-9]\d{2}[- ]?\d{4}$/,SSN_REGEX:/(^|\s)(00[1-9]|0[1-9]0|0[1-9][1-9]|[1-6]\d{2}|7[0-6]\d|77[0-2])(-?|[\. ])([1-9]0|0[1-9]|[1-9][1-9])\3(\d{3}[1-9]|[1-9]\d{3}|\d[1-9]\d{2}|\d{2}[1-9]\d)($|\s|[;:,!\.\?])/,dtCh:"/",minYear:1000,maxYear:3000,stripCharsInBag:function(C,D){var B;var A="";for(B=0;B<C.length;B++){var E=C.charAt(B);if(D.indexOf(E)==-1){A+=E}}return A},daysInFebruary:function(A){return(((A%4==0)&&((!(A%100==0))||(A%400==0)))?29:28)},DaysArray:function(B){for(var A=1;A<=B;A++){this[A]=31;if(A==4||A==6||A==9||A==11){this[A]=30}if(A==2){this[A]=29}}return this}});(function(){var A=Appcelerator.Validator.addValidator;A("required",function(B){if(null==B){return false}if(typeof (B)=="boolean"){return B}B=""+B;return B.trim().length>0});A("email_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.EMAIL_REGEX.test(B)});A("email",function(B){return Appcelerator.Validator.EMAIL_REGEX.test(B)});A("zipcode_5",function(B){return(B.length==5&&Appcelerator.Validator.number(B)==true)?true:false});A("zipcode_5_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.zipcode_5(B)});A("ssn",function(B){return Appcelerator.Validator.SSN_REGEX.test(B)});A("ssn_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.ssn(B)});A("phone_us",function(B){return Appcelerator.Validator.PHONE_REGEX.test(B)});A("phone_us_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.phone_us(B)});A("fullname_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.fullname(B)});A("fullname",function(B){return((B.split(" ")).length>1)});A("noSpaces_optional",function(B){if(!B){return true}return Appcelerator.Validator.noSpaces(B)});A("noSpaces",function(B){if(!Appcelerator.Validator.required(B)){return false}return B.indexOf(" ")==-1});A("password_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.password(B)});A("password",function(B){return(B.length>=6)});A("number",function(B){if(!B||B.trim().length==0||B<0){return false}return Appcelerator.Validator.DECIMAL_REGEX.test(B)});A("number_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.number(B)});A("wholenumber_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.wholenumber(B)});A("wholenumber",function(C){if(!C||C<0){return false}for(var B=0;B<C.length;B++){var D=C.charAt(B);if(((D<"0")||(D>"9"))){return false}}return true});A("url_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.url(B)});A("url",function(B){return Appcelerator.Validator.URI_REGEX.test(B)});A("checked",function(B){return B||B=="on"});A("length",function(F,E){if(F){try{var D=parseInt(E.getAttribute("validatorMinLength")||"1");var B=parseInt(E.getAttribute("validatorMaxLength")||"999999");var C=F.length;return C>=D&&C<=B}catch(G){}}return false});A("alphanumeric_optional",function(C,B){if(!C||C.trim().length==0){return true}return Appcelerator.Validator.ALPHANUM_REGEX.test(C)==true});A("alphanumeric",function(C,B){return Appcelerator.Validator.ALPHANUM_REGEX.test(C)==true});A("date_optional",function(B){if(!B||B.trim().length==0){return true}return Appcelerator.Validator.date(B)});A("date",function(J){var B=Appcelerator.Validator.DaysArray(12);var I=J.indexOf(Appcelerator.Validator.dtCh);var H=J.indexOf(Appcelerator.Validator.dtCh,I+1);var G=J.substring(0,I);var C=J.substring(I+1,H);var D=J.substring(H+1);strYr=D;if(C.charAt(0)=="0"&&C.length>1){C=C.substring(1)}if(G.charAt(0)=="0"&&G.length>1){G=G.substring(1)}for(var F=1;F<=3;F++){if(strYr.charAt(0)=="0"&&strYr.length>1){strYr=strYr.substring(1)}}month=parseInt(G);day=parseInt(C);year=parseInt(strYr);if(I==-1||H==-1){return false}if(G.length<1||month<1||month>12){return false}if(C.length<1||day<1||day>31||(month==2&&day>Appcelerator.Validator.daysInFebruary(year))||day>B[month]){return false}if(D.length!=4||year==0||year<Appcelerator.Validator.minYear||year>Appcelerator.Validator.maxYear){return false}var E=month+"/"+day+"/"+year;if(J.indexOf(Appcelerator.dtCh,H+1)!=-1||Appcelerator.Validator.number(Appcelerator.Validator.stripCharsInBag(E,Appcelerator.Validator.dtCh))==false){return false}return true})})();Appcelerator.Widget.register=function(A,B,C){Appcelerator.Core.registerModule(A,B,C)};Appcelerator.Widget.registerWithJS=function(B,C,D,A){Appcelerator.Core.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.registerModuleWithCommonJS=function(A,B,C){Appcelerator.Core.registerModuleWithCommonJS(A,B,C)};Appcelerator.Widget.registerWidgetWithCommonJS=function(A,B,C){Appcelerator.Core.registerModuleWithCommonJS(A,B,C)};Appcelerator.Widget.registerModuleWithJS=function(B,C,D,A){Appcelerator.Core.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.registerWidgetWithJS=function(B,C,D,A){Appcelerator.Core.registerModuleWithJS(B,C,D,A)};Appcelerator.Widget.loadWidgetCommonCSS=function(A,B){Appcelerator.Core.loadModuleCommonCSS(A,B)};Appcelerator.Widget.requireCommonCSS=function(A,B){Appcelerator.Core.requireCommonCSS(A,B)};Appcelerator.Widget.requireCommonJS=function(A,B){Appcelerator.Core.requireCommonJS(A,B)};Appcelerator.Widget.queueRemoteLoadScriptWithDependencies=function(B,A){Appcelerator.Core.queueRemoteLoadScriptWithDependencies(B,A)};Appcelerator.Widget.loadWidgetCSS=function(A,B){Appcelerator.Core.loadModuleCSS(A,B)};Appcelerator.Widget.fireWidgetCondition=function(C,A,B){Appcelerator.Compiler.fireCustomCondition(C,A,B)};Appcelerator.appuid=Appcelerator.Util.Cookie.GetCookie("appuid");Appcelerator.StatsURI=(("https:"==document.location.protocol)?"https://s3.amazonaws.com/tracker.appcelerator.org/":"http://tracker.appcelerator.org/")+"app.gif";if(!Appcelerator.appuid){Appcelerator.appuid=Appcelerator.Util.UUID.generateNewId();var e=new Date(new Date().getTime()+(Appcelerator.Util.DateTime.ONE_YEAR*5));Appcelerator.Util.Cookie.SetCookie("appuid",Appcelerator.appuid,e,"/")}Appcelerator.Compiler.beforeDocumentCompile(function(){Appcelerator.compileStarted=new Date});Appcelerator.Compiler.afterDocumentCompile(function(){var A=new Date().getTime();Appcelerator.compileTime=A-Appcelerator.compileStarted.getTime();Appcelerator.loadTime=A-Appcelerator.started.getTime()});if(window.onerror){Appcelerator._onerror=window.onerror}Appcelerator.TrackStat=function(B,A){try{var C=new Image;var E=new Date().getTime()-(Appcelerator.started||new Date).getTime();C.src=Appcelerator.StatsURI+"?t="+Number(new Date)+"&dur="+E+"&evt="+B+"&appuid="+Appcelerator.appuid+"&tid="+Appcelerator.started.getTime()+"&"+(A||"")}catch(D){}};window.onerror=function(E,B,A){try{var C="msg="+encodeURIComponent(String(E).encode64())+"&url="+encodeURIComponent(String(B||"").encode64())+"&line="+encodeURIComponent(A||-1);(function(){Appcelerator.TrackStat(2,C)}).defer();if(Appcelerator._onerror){Appcelerator._onerror(E,B,A)}}catch(D){return false}};(function(){var B=Logger.error;var A=Logger.fatal;Logger.error=function(E){var C=(String(Object.isArray(E)?E.join(","):E)).encode64();var D="x-lvl=e&x-msg="+encodeURIComponent(C);Appcelerator.TrackStat(3,D);return B(E)};Logger.fatal=function(E){var C=(String(Object.isArray(E)?E.join(","):E)).encode64();var D="x-lvl=f&x-msg="+encodeURIComponent(C);Appcelerator.TrackStat(3,D);return A(E)}})();Appcelerator.Core.onload(function(){var E=window.location.href.indexOf("file:/")!=-1;var G=screen.height;var D=screen.width;var B=screen.colorDepth||-1;var F=Appcelerator.started.getTimezoneOffset()/60;var A=Appcelerator.Browser.isWindows?"win":Appcelerator.Browser.isMac?"mac":Appcelerator.Browser.isLinux?"linux":Appcelerator.Browser.isSunOS?"sunos":"unknown";var C={"userAgent":navigator.userAgent,"flash":Appcelerator.Browser.isFlash,"flashver":Appcelerator.Browser.flashVersion,"silverlight":Appcelerator.Browser.isSilverlight,"silverlightver":Appcelerator.Browser.silverlightVersion,"gears":Appcelerator.Browser.isGears,"fluid":Appcelerator.Browser.isFluid,"screen":{"height":G,"width":D,"color":B},"os":A,"referrer":document.referrer,"path":window.location.href,"cookies":(document.cookie||"").split(";").collect(function(I){var H=I.split("=");return H&&H.length>0?{name:H[0],value:H[1]}:{name:null,value:null}}),"tz":F,"uid":Appcelerator.appuid};if(E){Appcelerator.Util.ServerConfig.addConfigListener(function(){if(window.parent==null||window.parent==window&&Appcelerator.Browser.autoReportStats){$MQ("remote:appcelerator.status.report",C)}})}setTimeout(function(){var Q=0,S=0,R=1,P=null,J=null,N=null;P=Appcelerator.ServerConfig["aid"];if(P){Q=P.value}P=Appcelerator.ServerConfig["sid"];if(P){S=P.value}P=Appcelerator.ServerConfig["language"];if(P){J=P.value}P=Appcelerator.ServerConfig["service"];if(P){N=P.value}var H=Appcelerator.Browser.isWindows?"win":Appcelerator.Browser.isMac?"mac":Appcelerator.Browser.isLinux?"linux":Appcelerator.Browser.isSunOS?"sunos":"unknown";var M=Appcelerator.Browser.flashVersion;var I=(Appcelerator.ServerConfig["sessionid"]||{}).value;var L=Appcelerator.Util.Cookie.GetCookie(I);var K=new Image;var O=$H({"wv":String(Appcelerator.Version),"v":R,"a":Q,"s":S,"gg":Number(Appcelerator.Browser.isGears),"fd":Number(Appcelerator.Browser.isFluid),"dm":C.screen.width+","+C.screen.height+","+C.screen.color,"p":A,"tz":F,"fv":C.flashver,"sv":C.silverlightver,"r":String(document.referrer||"").encode64(),"t":String(document.title||"").encode64(),"si":L,"sct":Appcelerator.compileTime,"slt":Appcelerator.loadTime,"bl":window.navigator.language,"lng":J,"svc":N,"js":String(Appcelerator.jsFileLocation).encode64()}).toQueryString();Appcelerator.TrackStat(1,O)},2000+Math.round(1999*Math.random()));Event.observe(window,"unload",function(){Appcelerator.TrackStat(0)})});if(typeof (Appcelerator.Util)!="undefined"&&typeof ($$AU)=="undefined"){$$AU=Appcelerator.Util;$$AC=Appcelerator.Compiler;$$AV=Appcelerator.Validator;$$AD=Appcelerator.Decorator;$$AR=Appcelerator.Core;$$AM=Appcelerator.Module;$$AL=Appcelerator.Localization;$$AF=Appcelerator.Config;$$AB=Appcelerator.Browser}